---
title: Java02-Javaè¿›é˜¶
date: 2025-08-04 16:51:30
tags:
categories:
- [Javaå­¦ä¹ è·¯å¾„]
---

## 1. Streamæµ

### 1.1 å¸¸è§ç”Ÿæˆæ–¹å¼

- Streamæµçš„æ€æƒ³

  ![01_Streamæµæ€æƒ³](../../../../zyw4259/developJava/èµ„æ–™/day26-é›†åˆï¼ˆStreamæµ&æ–¹æ³•å¼•ç”¨ï¼‰/ç¬”è®°/img/01_Streamæµæ€æƒ³.png)

- Streamæµçš„ä¸‰ç±»æ–¹æ³•

  - è·å–Streamæµ
    - åˆ›å»ºä¸€æ¡æµæ°´çº¿,å¹¶æŠŠæ•°æ®æ”¾åˆ°æµæ°´çº¿ä¸Šå‡†å¤‡è¿›è¡Œæ“ä½œ
  - ä¸­é—´æ–¹æ³•
    - æµæ°´çº¿ä¸Šçš„æ“ä½œ
    - ä¸€æ¬¡æ“ä½œå®Œæ¯•ä¹‹å,è¿˜å¯ä»¥ç»§ç»­è¿›è¡Œå…¶ä»–æ“ä½œ
  - ç»ˆç»“æ–¹æ³•
    - ä¸€ä¸ªStreamæµåªèƒ½æœ‰ä¸€ä¸ªç»ˆç»“æ–¹æ³•
    - æ˜¯æµæ°´çº¿ä¸Šçš„æœ€åä¸€ä¸ªæ“ä½œ

- ç”ŸæˆStreamæµçš„æ–¹å¼

  - Collectionä½“ç³»é›†åˆ

    ä½¿ç”¨é»˜è®¤æ–¹æ³•stream()ç”Ÿæˆæµï¼Œ default Stream<E> stream()

  - Mapä½“ç³»é›†åˆ

    æŠŠMapè½¬æˆSeté›†åˆï¼Œé—´æ¥çš„ç”Ÿæˆæµ

  - æ•°ç»„

    é€šè¿‡Arraysä¸­çš„é™æ€æ–¹æ³•streamç”Ÿæˆæµ

  - åŒç§æ•°æ®ç±»å‹çš„å¤šä¸ªæ•°æ®

    é€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•of(T... values)ç”Ÿæˆæµ

- ä»£ç æ¼”ç¤º

  ```java
  public class StreamDemo {
      public static void main(String[] args) {
          //Collectionä½“ç³»çš„é›†åˆå¯ä»¥ä½¿ç”¨é»˜è®¤æ–¹æ³•stream()ç”Ÿæˆæµ
          List<String> list = new ArrayList<String>();
          Stream<String> listStream = list.stream();
  
          Set<String> set = new HashSet<String>();
          Stream<String> setStream = set.stream();
  
          //Mapä½“ç³»çš„é›†åˆé—´æ¥çš„ç”Ÿæˆæµ
          Map<String,Integer> map = new HashMap<String, Integer>();
          Stream<String> keyStream = map.keySet().stream();
          Stream<Integer> valueStream = map.values().stream();
          Stream<Map.Entry<String, Integer>> entryStream = map.entrySet().stream();
  
          //æ•°ç»„å¯ä»¥é€šè¿‡Arraysä¸­çš„é™æ€æ–¹æ³•streamç”Ÿæˆæµ
          String[] strArray = {"hello","world","java"};
          Stream<String> strArrayStream = Arrays.stream(strArray);
        
        	//åŒç§æ•°æ®ç±»å‹çš„å¤šä¸ªæ•°æ®å¯ä»¥é€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•of(T... values)ç”Ÿæˆæµ
          Stream<String> strArrayStream2 = Stream.of("hello", "world", "java");
          Stream<Integer> intStream = Stream.of(10, 20, 30);
      }
  }
  ```

  â€‹				

### 1.2 ä¸­é—´æ“ä½œæ–¹æ³•

| æ–¹æ³•å                                            | è¯´æ˜                                                       |
| ------------------------------------------------- | ---------------------------------------------------------- |
| Stream\<T> filter(Predicate predicate)            | ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤                                   |
| Stream\<T> limit(long maxSize)                    | è¿”å›æ­¤æµä¸­çš„å…ƒç´ ç»„æˆçš„æµï¼Œæˆªå–å‰æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®         |
| Stream\<T> skip(long n)                           | è·³è¿‡æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®ï¼Œè¿”å›ç”±è¯¥æµçš„å‰©ä½™å…ƒç´ ç»„æˆçš„æµ       |
| static \<T> Stream\<T> concat(Stream a, Stream b) | åˆå¹¶aå’Œbä¸¤ä¸ªæµä¸ºä¸€ä¸ªæµ                                     |
| Stream\<T> distinct()                             | è¿”å›ç”±è¯¥æµçš„ä¸åŒå…ƒç´ ï¼ˆæ ¹æ®Object.equals(Object) ï¼‰ç»„æˆçš„æµ |
| Stream\<T> map(Function)                          | è½¬æ¢æµä¸­çš„æ•°æ®ç±»å‹                                         |

ä»£ç ç¤ºä¾‹ï¼š

```java
        //filteræ–¹æ³•è·å–æµä¸­çš„ æ¯ä¸€ä¸ªæ•°æ®.
        //è€Œtestæ–¹æ³•ä¸­çš„s,å°±ä¾æ¬¡è¡¨ç¤ºæµä¸­çš„æ¯ä¸€ä¸ªæ•°æ®.
        //æˆ‘ä»¬åªè¦åœ¨testæ–¹æ³•ä¸­å¯¹sè¿›è¡Œåˆ¤æ–­å°±å¯ä»¥äº†.
        //å¦‚æœåˆ¤æ–­çš„ç»“æœä¸ºtrue,åˆ™å½“å‰çš„æ•°æ®ç•™ä¸‹
        //å¦‚æœåˆ¤æ–­çš„ç»“æœä¸ºfalse,åˆ™å½“å‰æ•°æ®å°±ä¸è¦.
        list.stream().filter(
                new Predicate<String>() {
                   @Override
                   public boolean test(String s) {
                        boolean result = s.startsWith("å¼ ");
                        return result;
                   }
                }
        ).forEach(s-> System.out.println(s));

		list.stream().filter(s ->s.startsWith("å¼ ")).forEach(s-> System.out.println(s));
```

â€‹		

### 1.3 ç»ˆç»“æ“ä½œæ–¹æ³•

| æ–¹æ³•å                        | è¯´æ˜                           |
| ----------------------------- | ------------------------------ |
| void forEach(Consumer action) | éå†ï¼Œå¯¹æ­¤æµçš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ |
| long count()                  | è¿”å›æ­¤æµä¸­çš„å…ƒç´ æ•°             |

| æ–¹æ³•å                         | è¯´æ˜               |
| ------------------------------ | ------------------ |
| R collect(Collector collector) | æŠŠç»“æœæ”¶é›†åˆ°é›†åˆä¸­ |

| æ–¹æ³•å                                                       | è¯´æ˜                   |
| ------------------------------------------------------------ | ---------------------- |
| public static <T> Collector toList()                         | æŠŠå…ƒç´ æ”¶é›†åˆ°Listé›†åˆä¸­ |
| public static <T> Collector toSet()                          | æŠŠå…ƒç´ æ”¶é›†åˆ°Seté›†åˆä¸­  |
| public static  Collector toMap(Function keyMapper,Function valueMapper) | æŠŠå…ƒç´ æ”¶é›†åˆ°Mapé›†åˆä¸­  |

â€‹			

## 2. æ–¹æ³•å¼•ç”¨

æ–¹æ³•å¼•ç”¨å°±æ˜¯æŠŠå·²ç»å­˜åœ¨çš„æ–¹æ³•æ‹¿è¿‡æ¥ç”¨ï¼Œå½“åšå‡½æ•°å¼æ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“

**æ–¹æ³•å¼•ç”¨ç¬¦**

â€‹	::  è¯¥ç¬¦å·ä¸ºå¼•ç”¨è¿ç®—ç¬¦ï¼Œè€Œå®ƒæ‰€åœ¨çš„è¡¨è¾¾å¼è¢«ç§°ä¸ºæ–¹æ³•å¼•ç”¨

**æ–¹æ³•å¼•ç”¨æ—¶è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ**â€©

â€‹	éœ€è¦æœ‰å‡½æ•°å¼æ¥å£â€©

â€‹	è¢«å¼•ç”¨æ–¹æ³•å¿…é¡»å·²ç»å­˜åœ¨â€©

â€‹	è¢«å¼•ç”¨æ–¹æ³•çš„å½¢å‚å’Œè¿”å›å€¼éœ€è¦è·ŸæŠ½è±¡æ–¹æ³•ä¿æŒä¸€è‡´

â€‹	â€©è¢«å¼•ç”¨æ–¹æ³•çš„åŠŸèƒ½è¦æ»¡è¶³å½“å‰çš„éœ€æ±‚

â€‹		

### 2.1 å¼•ç”¨é™æ€æ–¹æ³•

å¼•ç”¨ç±»æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯å¼•ç”¨ç±»çš„é™æ€æ–¹æ³•

- æ ¼å¼ï¼š`ç±»å::é™æ€æ–¹æ³•`

- èŒƒä¾‹

  Integer::parseInt

  Integerç±»çš„æ–¹æ³•ï¼špublic static int parseInt(String s) å°†æ­¤Stringè½¬æ¢ä¸ºintç±»å‹æ•°æ®

  â€‹		

### 2.2 å¼•ç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•

å¼•ç”¨å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ï¼Œå…¶å®å°±å¼•ç”¨ç±»ä¸­çš„æˆå‘˜æ–¹æ³•

- æ ¼å¼ï¼š`å¯¹è±¡::æˆå‘˜æ–¹æ³•`

  â€‹			`this::æˆå‘˜æ–¹æ³•`

  â€‹			`super::æˆå‘˜æ–¹æ³•`

- èŒƒä¾‹

  "HelloWorld"::toUpperCase

    Stringç±»ä¸­çš„æ–¹æ³•ï¼špublic String toUpperCase() å°†æ­¤Stringæ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™

  â€‹	

### 2.3 å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•

å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯å¼•ç”¨ç±»ä¸­çš„æˆå‘˜æ–¹æ³•

- æ ¼å¼ï¼š`ç±»å::æˆå‘˜æ–¹æ³•`

- èŒƒä¾‹

  String::substring

  public String substring(int beginIndex,int endIndex) 

  ä»beginIndexå¼€å§‹åˆ°endIndexç»“æŸï¼Œæˆªå–å­—ç¬¦ä¸²ã€‚è¿”å›ä¸€ä¸ªå­ä¸²ï¼Œå­ä¸²çš„é•¿åº¦ä¸ºendIndex-beginIndex

- æ³¨æ„ï¼šè¯¥å¼•ç”¨ä¸èƒ½å¼•ç”¨æ‰€æœ‰ç±»ä¸­çš„æˆå‘˜æ–¹æ³•ï¼Œå¦‚æœæŠ½è±¡æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Aç±»å‹çš„ï¼Œåªèƒ½å¼•ç”¨Aç±»ä¸­çš„æ–¹æ³•

  â€‹				

### 2.4 å¼•ç”¨æ„é€ å™¨

å¼•ç”¨æ„é€ å™¨ï¼Œå…¶å®å°±æ˜¯å¼•ç”¨æ„é€ æ–¹æ³•

- æ ¼å¼ï¼š`ç±»å::new`

  å¼•ç”¨æ•°ç»„çš„æ„é€ æ–¹æ³•ï¼š`æ•°æ®ç±»å‹[]::new`

- èŒƒä¾‹

  Student::new

  â€‹					

## 3. å¼‚å¸¸

### 3.1 å¼‚å¸¸ä½“ç³»

* **å¼‚å¸¸** ï¼šæŒ‡çš„æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°çš„éæ­£å¸¸çš„æƒ…å†µï¼Œæœ€ç»ˆä¼šå¯¼è‡´JVMçš„éæ­£å¸¸åœæ­¢ã€‚

åœ¨Javaç­‰é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¼‚å¸¸æœ¬èº«æ˜¯ä¸€ä¸ªç±»ï¼Œäº§ç”Ÿå¼‚å¸¸å°±æ˜¯åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚Javaå¤„ç†å¼‚å¸¸çš„æ–¹å¼æ˜¯ä¸­æ–­å¤„ç†ã€‚

å¼‚å¸¸æœºåˆ¶å…¶å®æ˜¯å¸®åŠ©æˆ‘ä»¬**æ‰¾åˆ°**ç¨‹åºä¸­çš„é—®é¢˜ï¼Œå¼‚å¸¸çš„æ ¹ç±»æ˜¯`java.lang.Throwable`ï¼Œå…¶ä¸‹æœ‰ä¸¤ä¸ªå­ç±»ï¼š`java.lang.Error`ä¸`java.lang.Exception`ï¼Œå¹³å¸¸æ‰€è¯´çš„å¼‚å¸¸æŒ‡`java.lang.Exception`ã€‚

![image-20250806210952721](Java02-Javaè¿›é˜¶/image-20250806210952721.png)

* **Throwableä½“ç³»ï¼š**

  * **Error**:ä¸¥é‡é”™è¯¯Errorï¼Œæ— æ³•é€šè¿‡å¤„ç†çš„é”™è¯¯ï¼Œåªèƒ½äº‹å…ˆé¿å…ï¼Œå¥½æ¯”ç»ç—‡ã€‚
  * **Exception**:è¡¨ç¤ºå¼‚å¸¸ï¼Œå¼‚å¸¸äº§ç”Ÿåç¨‹åºå‘˜å¯ä»¥é€šè¿‡ä»£ç çš„æ–¹å¼çº æ­£ï¼Œä½¿ç¨‹åºç»§ç»­è¿è¡Œï¼Œæ˜¯å¿…é¡»è¦å¤„ç†çš„ã€‚å¥½æ¯”æ„Ÿå†’ã€é˜‘å°¾ç‚ã€‚

  **Throwableä¸­çš„å¸¸ç”¨æ–¹æ³•ï¼š**

  * `public void printStackTrace()`:æ‰“å°å¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ã€‚

    *åŒ…å«äº†å¼‚å¸¸çš„ç±»å‹,å¼‚å¸¸çš„åŸå› ,è¿˜åŒ…æ‹¬å¼‚å¸¸å‡ºç°çš„ä½ç½®,åœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µ,éƒ½å¾—ä½¿ç”¨printStackTraceã€‚*

  * `public String getMessage()`:è·å–å‘ç”Ÿå¼‚å¸¸çš„åŸå› ã€‚

    *æç¤ºç»™ç”¨æˆ·çš„æ—¶å€™,å°±æç¤ºé”™è¯¯åŸå› ã€‚*

  * `public String toString()`:è·å–å¼‚å¸¸çš„ç±»å‹å’Œå¼‚å¸¸æè¿°ä¿¡æ¯(ä¸ç”¨)ã€‚




- **å¼‚å¸¸çš„åˆ†ç±»ï¼š**

  æˆ‘ä»¬å¹³å¸¸è¯´çš„å¼‚å¸¸å°±æ˜¯æŒ‡Exceptionï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸ä¸€æ—¦å‡ºç°ï¼Œæˆ‘ä»¬å°±è¦å¯¹ä»£ç è¿›è¡Œæ›´æ­£ï¼Œä¿®å¤ç¨‹åºã€‚

  **å¼‚å¸¸(Exception)çš„åˆ†ç±»**:æ ¹æ®åœ¨ç¼–è¯‘æ—¶æœŸè¿˜æ˜¯è¿è¡Œæ—¶æœŸå»æ£€æŸ¥å¼‚å¸¸?

  * **ç¼–è¯‘æ—¶æœŸå¼‚å¸¸**:checkedå¼‚å¸¸ã€‚åœ¨ç¼–è¯‘æ—¶æœŸ,å°±ä¼šæ£€æŸ¥,å¦‚æœæ²¡æœ‰å¤„ç†å¼‚å¸¸,åˆ™ç¼–è¯‘å¤±è´¥ã€‚(å¦‚æ—¥æœŸæ ¼å¼åŒ–å¼‚å¸¸)
  * **è¿è¡Œæ—¶æœŸå¼‚å¸¸**:runtimeå¼‚å¸¸ã€‚åœ¨è¿è¡Œæ—¶æœŸ,æ£€æŸ¥å¼‚å¸¸.åœ¨ç¼–è¯‘æ—¶æœŸ,è¿è¡Œå¼‚å¸¸ä¸ä¼šç¼–è¯‘å™¨æ£€æµ‹(ä¸æŠ¥é”™)ã€‚(å¦‚æ•°å­¦å¼‚å¸¸)

![image-20250806211103565](Java02-Javaè¿›é˜¶/image-20250806211103565.png)

â€‹		

### 3.2 æŠ›å‡ºå¼‚å¸¸ throw

åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦è€ƒè™‘ç¨‹åºå‡ºç°é—®é¢˜çš„æƒ…å†µã€‚æ¯”å¦‚ï¼Œåœ¨å®šä¹‰æ–¹æ³•æ—¶ï¼Œæ–¹æ³•éœ€è¦æ¥å—å‚æ•°ã€‚é‚£ä¹ˆï¼Œå½“è°ƒç”¨æ–¹æ³•ä½¿ç”¨æ¥å—åˆ°çš„å‚æ•°æ—¶ï¼Œé¦–å…ˆéœ€è¦å…ˆå¯¹å‚æ•°æ•°æ®è¿›è¡Œåˆæ³•çš„åˆ¤æ–­ï¼Œæ•°æ®è‹¥ä¸åˆæ³•ï¼Œå°±åº”è¯¥å‘Šè¯‰è°ƒç”¨è€…ï¼Œä¼ é€’åˆæ³•çš„æ•°æ®è¿›æ¥ã€‚è¿™æ—¶éœ€è¦ä½¿ç”¨æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼æ¥å‘Šè¯‰è°ƒç”¨è€…ã€‚

åœ¨javaä¸­ï¼Œæä¾›äº†ä¸€ä¸ª**throw**å…³é”®å­—ï¼Œå®ƒç”¨æ¥æŠ›å‡ºä¸€ä¸ªæŒ‡å®šçš„å¼‚å¸¸å¯¹è±¡ã€‚é‚£ä¹ˆï¼ŒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å…·ä½“å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ

1. åˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚å°è£…ä¸€äº›æç¤ºä¿¡æ¯(ä¿¡æ¯å¯ä»¥è‡ªå·±ç¼–å†™)ã€‚

2. éœ€è¦å°†è¿™ä¸ªå¼‚å¸¸å¯¹è±¡å‘ŠçŸ¥ç»™è°ƒç”¨è€…ã€‚æ€ä¹ˆå‘ŠçŸ¥å‘¢ï¼Ÿæ€ä¹ˆå°†è¿™ä¸ªå¼‚å¸¸å¯¹è±¡ä¼ é€’åˆ°è°ƒç”¨è€…å¤„å‘¢ï¼Ÿé€šè¿‡å…³é”®å­—throwå°±å¯ä»¥å®Œæˆã€‚throw å¼‚å¸¸å¯¹è±¡ã€‚

   throw**ç”¨åœ¨æ–¹æ³•å†…**ï¼Œç”¨æ¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œå°†è¿™ä¸ªå¼‚å¸¸å¯¹è±¡ä¼ é€’åˆ°è°ƒç”¨è€…å¤„ï¼Œå¹¶ç»“æŸå½“å‰æ–¹æ³•çš„æ‰§è¡Œã€‚

**ä½¿ç”¨æ ¼å¼ï¼š**

```
throw new å¼‚å¸¸ç±»å(å‚æ•°);
```

â€‹		

### 3.3å£°æ˜å¼‚å¸¸ throws

**å£°æ˜å¼‚å¸¸**ï¼šå°†é—®é¢˜æ ‡è¯†å‡ºæ¥ï¼ŒæŠ¥å‘Šç»™è°ƒç”¨è€…ã€‚å¦‚æœæ–¹æ³•å†…é€šè¿‡throwæŠ›å‡ºäº†ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œè€Œæ²¡æœ‰æ•è·å¤„ç†ï¼ˆç¨åè®²è§£è¯¥æ–¹å¼ï¼‰ï¼Œé‚£ä¹ˆå¿…é¡»é€šè¿‡throwsè¿›è¡Œå£°æ˜ï¼Œè®©è°ƒç”¨è€…å»å¤„ç†ã€‚

å…³é”®å­—**throws**è¿ç”¨äºæ–¹æ³•å£°æ˜ä¹‹ä¸Š,ç”¨äºè¡¨ç¤ºå½“å‰æ–¹æ³•ä¸å¤„ç†å¼‚å¸¸,è€Œæ˜¯æé†’è¯¥æ–¹æ³•çš„è°ƒç”¨è€…æ¥å¤„ç†å¼‚å¸¸(æŠ›å‡ºå¼‚å¸¸).

**å£°æ˜å¼‚å¸¸æ ¼å¼ï¼š**

```
ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°) throws å¼‚å¸¸ç±»å1,å¼‚å¸¸ç±»å2â€¦{   }	
```

â€‹	

### 3.4 æ•è·å¼‚å¸¸ tryâ€¦catch

å¦‚æœå¼‚å¸¸å‡ºç°çš„è¯,ä¼šç«‹åˆ»ç»ˆæ­¢ç¨‹åº,æ‰€ä»¥æˆ‘ä»¬å¾—å¤„ç†å¼‚å¸¸:

1. è¯¥æ–¹æ³•ä¸å¤„ç†,è€Œæ˜¯å£°æ˜æŠ›å‡º,ç”±è¯¥æ–¹æ³•çš„è°ƒç”¨è€…æ¥å¤„ç†(throws)ã€‚
2. åœ¨æ–¹æ³•ä¸­ä½¿ç”¨try-catchçš„è¯­å¥å—æ¥å¤„ç†å¼‚å¸¸ã€‚

**try-catch**çš„æ–¹å¼å°±æ˜¯æ•è·å¼‚å¸¸ã€‚

* **æ•è·å¼‚å¸¸**ï¼šJavaä¸­å¯¹å¼‚å¸¸æœ‰é’ˆå¯¹æ€§çš„è¯­å¥è¿›è¡Œæ•è·ï¼Œå¯ä»¥å¯¹å‡ºç°çš„å¼‚å¸¸è¿›è¡ŒæŒ‡å®šæ–¹å¼çš„å¤„ç†ã€‚

æ•è·å¼‚å¸¸è¯­æ³•å¦‚ä¸‹ï¼š

```java
try{
     ç¼–å†™å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸çš„ä»£ç 
}catch(å¼‚å¸¸ç±»å‹  e){
     å¤„ç†å¼‚å¸¸çš„ä»£ç 
     //è®°å½•æ—¥å¿—/æ‰“å°å¼‚å¸¸ä¿¡æ¯/ç»§ç»­æŠ›å‡ºå¼‚å¸¸
}
```

**tryï¼š**è¯¥ä»£ç å—ä¸­ç¼–å†™å¯èƒ½äº§ç”Ÿå¼‚å¸¸çš„ä»£ç ã€‚

**catchï¼š**ç”¨æ¥è¿›è¡ŒæŸç§å¼‚å¸¸çš„æ•è·ï¼Œå®ç°å¯¹æ•è·åˆ°çš„å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚

> æ³¨æ„:tryå’Œcatchéƒ½ä¸èƒ½å•ç‹¬ä½¿ç”¨,å¿…é¡»è¿ç”¨ã€‚

å¦‚ä½•è·å–å¼‚å¸¸ä¿¡æ¯ï¼š

Throwableç±»ä¸­å®šä¹‰äº†ä¸€äº›æŸ¥çœ‹æ–¹æ³•:

* `public String getMessage()`:è·å–å¼‚å¸¸çš„æè¿°ä¿¡æ¯,åŸå› (æç¤ºç»™ç”¨æˆ·çš„æ—¶å€™,å°±æç¤ºé”™è¯¯åŸå› ã€‚


* `public String toString()`:è·å–å¼‚å¸¸çš„ç±»å‹å’Œå¼‚å¸¸æè¿°ä¿¡æ¯(ä¸ç”¨)ã€‚
* `public void printStackTrace()`:æ‰“å°å¼‚å¸¸çš„è·Ÿè¸ªæ ˆä¿¡æ¯å¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚

å¤šä¸ªå¼‚å¸¸ä½¿ç”¨æ•è·åˆè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ

1. å¤šä¸ªå¼‚å¸¸åˆ†åˆ«å¤„ç†ã€‚
2. å¤šä¸ªå¼‚å¸¸ä¸€æ¬¡æ•è·ï¼Œå¤šæ¬¡å¤„ç†ã€‚
3. å¤šä¸ªå¼‚å¸¸ä¸€æ¬¡æ•è·ä¸€æ¬¡å¤„ç†ã€‚

ä¸€èˆ¬æˆ‘ä»¬æ˜¯ä½¿ç”¨ä¸€æ¬¡æ•è·å¤šæ¬¡å¤„ç†æ–¹å¼ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```java
try{
     ç¼–å†™å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸çš„ä»£ç 
}catch(å¼‚å¸¸ç±»å‹A  e){  å½“tryä¸­å‡ºç°Aç±»å‹å¼‚å¸¸,å°±ç”¨è¯¥catchæ¥æ•è·.
     å¤„ç†å¼‚å¸¸çš„ä»£ç 
     //è®°å½•æ—¥å¿—/æ‰“å°å¼‚å¸¸ä¿¡æ¯/ç»§ç»­æŠ›å‡ºå¼‚å¸¸
}catch(å¼‚å¸¸ç±»å‹B  e){  å½“tryä¸­å‡ºç°Bç±»å‹å¼‚å¸¸,å°±ç”¨è¯¥catchæ¥æ•è·.
     å¤„ç†å¼‚å¸¸çš„ä»£ç 
     //è®°å½•æ—¥å¿—/æ‰“å°å¼‚å¸¸ä¿¡æ¯/ç»§ç»­æŠ›å‡ºå¼‚å¸¸
}
```

> æ³¨æ„:è¿™ç§å¼‚å¸¸å¤„ç†æ–¹å¼ï¼Œè¦æ±‚å¤šä¸ªcatchä¸­çš„å¼‚å¸¸ä¸èƒ½ç›¸åŒï¼Œå¹¶ä¸”è‹¥catchä¸­çš„å¤šä¸ªå¼‚å¸¸ä¹‹é—´æœ‰å­çˆ¶ç±»å¼‚å¸¸çš„å…³ç³»ï¼Œé‚£ä¹ˆå­ç±»å¼‚å¸¸è¦æ±‚åœ¨ä¸Šé¢çš„catchå¤„ç†ï¼Œçˆ¶ç±»å¼‚å¸¸åœ¨ä¸‹é¢çš„catchå¤„ç†ã€‚

â€‹		

### 3.5 finally ä»£ç å—

**finally**ï¼šæœ‰ä¸€äº›ç‰¹å®šçš„ä»£ç æ— è®ºå¼‚å¸¸æ˜¯å¦å‘ç”Ÿï¼Œéƒ½éœ€è¦æ‰§è¡Œã€‚å¦å¤–ï¼Œå› ä¸ºå¼‚å¸¸ä¼šå¼•å‘ç¨‹åºè·³è½¬ï¼Œå¯¼è‡´æœ‰äº›è¯­å¥æ‰§è¡Œä¸åˆ°ã€‚è€Œfinallyå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œåœ¨finallyä»£ç å—ä¸­å­˜æ”¾çš„ä»£ç éƒ½æ˜¯ä¸€å®šä¼šè¢«æ‰§è¡Œçš„ã€‚

ä»€ä¹ˆæ—¶å€™çš„ä»£ç å¿…é¡»æœ€ç»ˆæ‰§è¡Œï¼Ÿ

å½“æˆ‘ä»¬åœ¨tryè¯­å¥å—ä¸­æ‰“å¼€äº†ä¸€äº›ç‰©ç†èµ„æº(ç£ç›˜æ–‡ä»¶/ç½‘ç»œè¿æ¥/æ•°æ®åº“è¿æ¥ç­‰),æˆ‘ä»¬éƒ½å¾—åœ¨ä½¿ç”¨å®Œä¹‹å,æœ€ç»ˆå…³é—­æ‰“å¼€çš„èµ„æºã€‚

finallyçš„è¯­æ³•:

 try...catch....finally:è‡ªèº«éœ€è¦å¤„ç†å¼‚å¸¸,æœ€ç»ˆè¿˜å¾—å…³é—­èµ„æºã€‚

> æ³¨æ„:finallyä¸èƒ½å•ç‹¬ä½¿ç”¨ã€‚

æ¯”å¦‚åœ¨æˆ‘ä»¬ä¹‹åå­¦ä¹ çš„IOæµä¸­ï¼Œå½“æ‰“å¼€äº†ä¸€ä¸ªå…³è”æ–‡ä»¶çš„èµ„æºï¼Œæœ€åç¨‹åºä¸ç®¡ç»“æœå¦‚ä½•ï¼Œéƒ½éœ€è¦æŠŠè¿™ä¸ªèµ„æºå…³é—­æ‰ã€‚

> å½“åªæœ‰åœ¨tryæˆ–è€…catchä¸­è°ƒç”¨é€€å‡ºJVMçš„ç›¸å…³æ–¹æ³•,æ­¤æ—¶finallyæ‰ä¸ä¼šæ‰§è¡Œ,å¦åˆ™finallyæ°¸è¿œä¼šæ‰§è¡Œã€‚

â€‹		

### 3.6 è‡ªå®šä¹‰å¼‚å¸¸

åœ¨ Java ä¸­ï¼Œé™¤äº† JDK æä¾›çš„æ ‡å‡†å¼‚å¸¸ç±»ï¼ˆå¦‚ `NullPointerException`, `IOException` ç­‰ï¼‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®è‡ªå·±åº”ç”¨ç¨‹åºçš„ç‰¹å®šéœ€æ±‚åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ã€‚è¿™æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„æœºåˆ¶ï¼Œèƒ½è®©æˆ‘ä»¬çš„ä»£ç æ›´å…·å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¥å£®æ€§ã€‚

**å®šä¹‰æ­¥éª¤ï¼š**

1. åªéœ€åˆ›å»ºä¸€ä¸ªç±»å¹¶ç»§æ‰¿ `Exception` æˆ–è€… `RuntimeException`
2. ç©ºå‚æ„é€ +å¸¦å‚æ„é€ 

ç¤ºä¾‹ï¼š

```java
// ç¤ºä¾‹ï¼šå®šä¹‰ä¸€ä¸ªâ€œç”¨æˆ·åå·²å­˜åœ¨â€çš„å—æ£€å¼‚å¸¸
public class UserAlreadyExistsException extends Exception {

    // 1. æ— å‚æ„é€ æ–¹æ³•
    public UserAlreadyExistsException() {
        super(); // è°ƒç”¨çˆ¶ç±»æ„é€ 
    }

    // 2. æ¥æ”¶é”™è¯¯ä¿¡æ¯çš„æ„é€ æ–¹æ³•ï¼ˆæœ€å¸¸ç”¨ï¼‰
    public UserAlreadyExistsException(String message) {
        super(message); // è°ƒç”¨çˆ¶ç±»æ„é€ ï¼Œå°†ä¿¡æ¯ä¼ é€’è¿›å»
    }

    // 3. æ¥æ”¶é”™è¯¯ä¿¡æ¯å’ŒåŸå§‹â€œåŸå› â€å¼‚å¸¸çš„æ„é€ æ–¹æ³•ï¼ˆç”¨äºå¼‚å¸¸é“¾ï¼‰
    public UserAlreadyExistsException(String message, Throwable cause) {
        super(message, cause); // å°†åŸå§‹å¼‚å¸¸åŒ…è£…èµ·æ¥ï¼Œé¿å…ä¿¡æ¯ä¸¢å¤±
    }
}

// ç¤ºä¾‹ï¼šå®šä¹‰ä¸€ä¸ªâ€œæ— æ•ˆAPIå¯†é’¥â€çš„éå—æ£€å¼‚å¸¸
public class InvalidApiKeyException extends RuntimeException {
    public InvalidApiKeyException(String message) {
        super(message);
    }
}

```

â€‹			

## 4. File

`java.io.File` ç±»æ˜¯æ–‡ä»¶å’Œç›®å½•è·¯å¾„åçš„æŠ½è±¡è¡¨ç¤ºï¼Œä¸»è¦ç”¨äºæ–‡ä»¶å’Œç›®å½•çš„åˆ›å»ºã€æŸ¥æ‰¾å’Œåˆ é™¤ç­‰æ“ä½œã€‚

â€‹	

### 4.1 å¸¸ç”¨æ–¹æ³•

#### 4.1.1 æ„é€ æ–¹æ³•

- `public File(String pathname) ` ï¼šé€šè¿‡å°†ç»™å®šçš„**è·¯å¾„åå­—ç¬¦ä¸²**è½¬æ¢ä¸ºæŠ½è±¡è·¯å¾„åæ¥åˆ›å»ºæ–°çš„ Fileå®ä¾‹ã€‚  
- `public File(String parent, String child) ` ï¼šä»**çˆ¶è·¯å¾„åå­—ç¬¦ä¸²å’Œå­è·¯å¾„åå­—ç¬¦ä¸²**åˆ›å»ºæ–°çš„ Fileå®ä¾‹ã€‚
- `public File(File parent, String child)` ï¼šä»**çˆ¶æŠ½è±¡è·¯å¾„åå’Œå­è·¯å¾„åå­—ç¬¦ä¸²**åˆ›å»ºæ–°çš„ Fileå®ä¾‹ã€‚  

> å°è´´å£«ï¼š
>
> 1. ä¸€ä¸ªFileå¯¹è±¡ä»£è¡¨ç¡¬ç›˜ä¸­å®é™…å­˜åœ¨çš„ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•ã€‚
> 2. æ— è®ºè¯¥è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œéƒ½ä¸å½±å“Fileå¯¹è±¡çš„åˆ›å»ºã€‚

â€‹	

#### 4.1.2 è·å–åŠŸèƒ½

- `public String getAbsolutePath() ` ï¼šè¿”å›æ­¤Fileçš„ç»å¯¹è·¯å¾„åå­—ç¬¦ä¸²ã€‚

- ` public String getPath() ` ï¼šå°†æ­¤Fileè½¬æ¢ä¸ºè·¯å¾„åå­—ç¬¦ä¸²ã€‚ 

- `public String getName()`  ï¼šè¿”å›ç”±æ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„åç§°ã€‚  

- `public long length()`  ï¼šè¿”å›ç”±æ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶çš„é•¿åº¦ã€‚ 



#### 4.1.3 åˆ¤æ–­åŠŸèƒ½

- `public boolean exists()` ï¼šæ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å®é™…å­˜åœ¨ã€‚

- `public boolean isDirectory()` ï¼šæ­¤Fileè¡¨ç¤ºçš„æ˜¯å¦ä¸ºç›®å½•ã€‚

- `public boolean isFile()` ï¼šæ­¤Fileè¡¨ç¤ºçš„æ˜¯å¦ä¸ºæ–‡ä»¶ã€‚

  â€‹		

#### 4.1.4 åˆ›å»ºåˆ é™¤

- `public boolean createNewFile()` ï¼šå½“ä¸”ä»…å½“å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶å°šä¸å­˜åœ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ã€‚ 

- `public boolean delete()` ï¼šåˆ é™¤ç”±æ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•ã€‚  

- `public boolean mkdir()` ï¼šåˆ›å»ºç”±æ­¤Fileè¡¨ç¤ºçš„ç›®å½•ã€‚

- `public boolean mkdirs()` ï¼šåˆ›å»ºç”±æ­¤Fileè¡¨ç¤ºçš„ç›®å½•ï¼ŒåŒ…æ‹¬ä»»ä½•å¿…éœ€ä½†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ã€‚

  â€‹			

#### 4.1.5 ç›®å½•éå†

- `public String[] list()` ï¼šè¿”å›ä¸€ä¸ªStringæ•°ç»„ï¼Œè¡¨ç¤ºè¯¥Fileç›®å½•ä¸­çš„æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•ã€‚

- `public File[] listFiles()` ï¼šè¿”å›ä¸€ä¸ªFileæ•°ç»„ï¼Œè¡¨ç¤ºè¯¥Fileç›®å½•ä¸­çš„æ‰€æœ‰çš„å­æ–‡ä»¶æˆ–ç›®å½•ã€‚  

  â€‹		

## 5. IOæµ

æˆ‘ä»¬æŠŠæ•°æ®çš„ä¼ è¾“ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ç§æ•°æ®çš„æµåŠ¨ï¼ŒæŒ‰ç…§æµåŠ¨çš„æ–¹å‘ï¼Œä»¥å†…å­˜ä¸ºåŸºå‡†ï¼Œåˆ†ä¸º`è¾“å…¥input` å’Œ`è¾“å‡ºoutput` ï¼Œå³æµå‘å†…å­˜æ˜¯è¾“å…¥æµï¼Œæµå‡ºå†…å­˜çš„è¾“å‡ºæµã€‚

Javaä¸­I/Oæ“ä½œä¸»è¦æ˜¯æŒ‡ä½¿ç”¨`java.io`åŒ…ä¸‹çš„å†…å®¹ï¼Œè¿›è¡Œè¾“å…¥ã€è¾“å‡ºæ“ä½œã€‚**è¾“å…¥**ä¹Ÿå«åš**è¯»å–**æ•°æ®ï¼Œ**è¾“å‡º**ä¹Ÿå«åšä½œ**å†™å‡º**æ•°æ®ã€‚

### 5.1 IOæµçš„åˆ†ç±»

æ ¹æ®æ•°æ®çš„æµå‘åˆ†ä¸ºï¼š**è¾“å…¥æµ**å’Œ**è¾“å‡ºæµ**ã€‚

* **è¾“å…¥æµ** ï¼šæŠŠæ•°æ®ä»`å…¶ä»–è®¾å¤‡`ä¸Šè¯»å–åˆ°`å†…å­˜`ä¸­çš„æµã€‚ 
* **è¾“å‡ºæµ** ï¼šæŠŠæ•°æ®ä»`å†…å­˜` ä¸­å†™å‡ºåˆ°`å…¶ä»–è®¾å¤‡`ä¸Šçš„æµã€‚

æ ¹æ®æ•°æ®çš„ç±»å‹åˆ†ä¸ºï¼š**å­—èŠ‚æµ**å’Œ**å­—ç¬¦æµ**ã€‚

* **å­—èŠ‚æµ** ï¼šä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè¯»å†™æ•°æ®çš„æµã€‚
* **å­—ç¬¦æµ** ï¼šä»¥å­—ç¬¦ä¸ºå•ä½ï¼Œè¯»å†™æ•°æ®çš„æµã€‚

|            |           **è¾“å…¥æµ**            |              è¾“å‡ºæµ              |
| :--------: | :-----------------------------: | :------------------------------: |
| **å­—èŠ‚æµ** | å­—èŠ‚è¾“å…¥æµ<br />**InputStream** | å­—èŠ‚è¾“å‡ºæµ<br />**OutputStream** |
| **å­—ç¬¦æµ** |   å­—ç¬¦è¾“å…¥æµ<br />**Reader**    |    å­—ç¬¦è¾“å‡ºæµ<br />**Writer**    |

![image-20250810184825478](Java02-Javaè¿›é˜¶/image-20250810184825478.png)

â€‹			

### 5.2 å­—èŠ‚æµ

ä¸€åˆ‡æ–‡ä»¶æ•°æ®(æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ç­‰)åœ¨å­˜å‚¨æ—¶ï¼Œéƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æ•°å­—çš„å½¢å¼ä¿å­˜ï¼Œéƒ½ä¸€ä¸ªä¸€ä¸ªçš„å­—èŠ‚ï¼Œé‚£ä¹ˆä¼ è¾“æ—¶ä¸€æ ·å¦‚æ­¤ã€‚æ‰€ä»¥ï¼Œ**å­—èŠ‚æµå¯ä»¥ä¼ è¾“ä»»æ„æ–‡ä»¶æ•°æ®**ã€‚åœ¨æ“ä½œæµçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ—¶åˆ»æ˜ç¡®ï¼Œæ— è®ºä½¿ç”¨ä»€ä¹ˆæ ·çš„æµå¯¹è±¡ï¼Œåº•å±‚ä¼ è¾“çš„å§‹ç»ˆä¸ºäºŒè¿›åˆ¶æ•°æ®ã€‚

#### 5.2.1 å­—èŠ‚è¾“å‡ºæµã€OutputStreamã€‘

`java.io.OutputStream `æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å‡ºæµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå°†æŒ‡å®šçš„å­—èŠ‚ä¿¡æ¯å†™å‡ºåˆ°ç›®çš„åœ°ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å‡ºæµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

* `public void close()` ï¼šå…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚  
* `public void flush() ` ï¼šåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶ä»»ä½•ç¼“å†²çš„è¾“å‡ºå­—èŠ‚è¢«å†™å‡ºã€‚  
* `public void write(byte[] b)`ï¼šå°† b.lengthå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥æ­¤è¾“å‡ºæµã€‚  
* `public void write(byte[] b, int off, int len)` ï¼šä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥ lenå­—èŠ‚ï¼Œä»åç§»é‡ offå¼€å§‹è¾“å‡ºåˆ°æ­¤è¾“å‡ºæµã€‚  
* `public abstract void write(int b)` ï¼šå°†æŒ‡å®šçš„å­—èŠ‚è¾“å‡ºæµã€‚

> å°è´´å£«ï¼š
>
> closeæ–¹æ³•ï¼Œå½“å®Œæˆæµçš„æ“ä½œæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚



#### 5.2.2 FileOutputStreamç±»

`OutputStream`æœ‰å¾ˆå¤šå­ç±»ï¼Œæˆ‘ä»¬ä»æœ€ç®€å•çš„ä¸€ä¸ªå­ç±»å¼€å§‹ã€‚

`java.io.FileOutputStream `ç±»æ˜¯æ–‡ä»¶è¾“å‡ºæµï¼Œç”¨äºå°†æ•°æ®å†™å‡ºåˆ°æ–‡ä»¶ã€‚

**æ„é€ æ–¹æ³•ï¼š**

* `public FileOutputStream(File file)`ï¼šåˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥å†™å…¥ç”±æŒ‡å®šçš„ Fileå¯¹è±¡è¡¨ç¤ºçš„æ–‡ä»¶ã€‚ 
* `public FileOutputStream(String name)`ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶ã€‚  

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚è¯¥è·¯å¾„ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚å¦‚æœæœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šæ¸…ç©ºè¿™ä¸ªæ–‡ä»¶çš„æ•°æ®ã€‚

â€‹	

**å†™å‡ºå­—èŠ‚æ•°æ®**

1. å†™å‡ºå­—èŠ‚ï¼š`write(int b)` æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºä¸€ä¸ªå­—èŠ‚æ•°æ®

> å°è´´å£«ï¼š
>
> 1. è™½ç„¶å‚æ•°ä¸ºintç±»å‹å››ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªä¼šä¿ç•™ä¸€ä¸ªå­—èŠ‚çš„ä¿¡æ¯å†™å‡ºã€‚
> 2. æµæ“ä½œå®Œæ¯•åï¼Œå¿…é¡»é‡Šæ”¾ç³»ç»Ÿèµ„æºï¼Œè°ƒç”¨closeæ–¹æ³•ï¼Œåƒä¸‡è®°å¾—ã€‚

2. å†™å‡ºå­—èŠ‚æ•°ç»„ï¼š`write(byte[] b)`ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºæ•°ç»„ä¸­çš„æ•°æ®

3. å†™å‡ºæŒ‡å®šé•¿åº¦å­—èŠ‚æ•°ç»„ï¼š`write(byte[] b, int off, int len)` ,æ¯æ¬¡å†™å‡ºä»offç´¢å¼•å¼€å§‹ï¼Œlenä¸ªå­—èŠ‚

4. å¯ä»¥å’Œå­—ç¬¦ä¸²é‡Œçš„`byte[] getBytes()`æ–¹æ³•è”åˆä½¿ç”¨ â€»

   

**æ•°æ®è¿½åŠ ç»­å†™ï¼š**

æ¯æ¬¡ç¨‹åºè¿è¡Œï¼Œåˆ›å»ºè¾“å‡ºæµå¯¹è±¡ï¼Œéƒ½ä¼šæ¸…ç©ºç›®æ ‡æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚å¦‚ä½•ä¿ç•™ç›®æ ‡æ–‡ä»¶ä¸­æ•°æ®ï¼Œè¿˜èƒ½ç»§ç»­æ·»åŠ æ–°æ•°æ®å‘¢ï¼Ÿ

- `public FileOutputStream(File file, boolean append)`ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥å†™å…¥ç”±æŒ‡å®šçš„ Fileå¯¹è±¡è¡¨ç¤ºçš„æ–‡ä»¶ã€‚  
- `public FileOutputStream(String name, boolean append)`ï¼š åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµä»¥æŒ‡å®šçš„åç§°å†™å…¥æ–‡ä»¶ã€‚  

è¿™ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œå‚æ•°ä¸­éƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªbooleanç±»å‹çš„å€¼ï¼Œ`true` è¡¨ç¤ºè¿½åŠ æ•°æ®ï¼Œ`false` è¡¨ç¤ºæ¸…ç©ºåŸæœ‰æ•°æ®ã€‚è¿™æ ·åˆ›å»ºçš„è¾“å‡ºæµå¯¹è±¡ï¼Œå°±å¯ä»¥æŒ‡å®šæ˜¯å¦è¿½åŠ ç»­å†™äº†

â€‹	

**å†™å‡ºæ¢è¡Œ**

Windowsç³»ç»Ÿé‡Œï¼Œæ¢è¡Œç¬¦å·æ˜¯`\r\n` ã€‚

> * å›è½¦ç¬¦`\r`å’Œæ¢è¡Œç¬¦`\n` ï¼š
>   * å›è½¦ç¬¦ï¼šå›åˆ°ä¸€è¡Œçš„å¼€å¤´ï¼ˆreturnï¼‰ã€‚
>   * æ¢è¡Œç¬¦ï¼šä¸‹ä¸€è¡Œï¼ˆnewlineï¼‰ã€‚
> * ç³»ç»Ÿä¸­çš„æ¢è¡Œï¼š
>   * Windowsç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ `å›è½¦+æ¢è¡Œ` ï¼Œå³`\r\n`ï¼›
>   * Unixç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾åªæœ‰ `æ¢è¡Œ` ï¼Œå³`\n`ï¼›
>   * Macç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ `å›è½¦` ï¼Œå³`\r`ã€‚ä» Mac OS Xå¼€å§‹ä¸Linuxç»Ÿä¸€ã€‚

```java
fos.write("\r\n".getBytes());
```

â€‹	

**æ³¨æ„ï¼š**

1. åˆ›å»ºå­—èŠ‚è¾“å‡ºæµå¯¹è±¡ï¼š

   â€‹	ç»†èŠ‚1ï¼šå‚æ•°æ˜¯å­—ç¬¦ä¸²è¡¨ç¤ºçš„è·¯å¾„æˆ–è€…Fileå¯¹è±¡éƒ½æ˜¯å¯ä»¥çš„â€©

   â€‹	ç»†èŠ‚2ï¼šå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œä½†æ˜¯è¦ä¿è¯çˆ¶çº§è·¯å¾„æ˜¯å­˜åœ¨çš„ã€‚â€©

   â€‹	ç»†èŠ‚3ï¼šå¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šæ¸…ç©ºæ–‡ä»¶

2. å†™æ•°æ®ï¼šwriteæ–¹æ³•çš„å‚æ•°æ˜¯æ•´æ•°ï¼Œä½†æ˜¯å®é™…ä¸Šå†™åˆ°æœ¬åœ°æ–‡ä»¶ä¸­çš„æ˜¯æ•´æ•°åœ¨ASCIIä¸Šå¯¹åº”çš„å­—ç¬¦

   

#### 5.2.3 å­—èŠ‚è¾“å…¥æµã€InputStreamã€‘

`java.io.InputStream `æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºå­—èŠ‚è¾“å…¥æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯ä»¥è¯»å–å­—èŠ‚ä¿¡æ¯åˆ°å†…å­˜ä¸­ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å…¥æµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

- `public void close()` ï¼šå…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚    
- `public abstract int read()`ï¼š ä»è¾“å…¥æµè¯»å–æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚ 
- `public int read(byte[] b)`ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—èŠ‚æ•°ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—èŠ‚æ•°ç»„ bä¸­ ã€‚

> å°è´´å£«ï¼š
>
> closeæ–¹æ³•ï¼Œå½“å®Œæˆæµçš„æ“ä½œæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚

â€‹	

#### 5.2.4 FileInputStream 

`java.io.FileInputStream `ç±»æ˜¯æ–‡ä»¶è¾“å…¥æµï¼Œä»æ–‡ä»¶ä¸­è¯»å–å­—èŠ‚ã€‚

**æ„é€ æ–¹æ³•**

* `FileInputStream(File file)`ï¼š é€šè¿‡æ‰“å¼€ä¸å®é™…æ–‡ä»¶çš„è¿æ¥æ¥åˆ›å»ºä¸€ä¸ª FileInputStream ï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„ Fileå¯¹è±¡ fileå‘½åã€‚ 
* `FileInputStream(String name)`ï¼š é€šè¿‡æ‰“å¼€ä¸å®é™…æ–‡ä»¶çš„è¿æ¥æ¥åˆ›å»ºä¸€ä¸ª FileInputStream ï¼Œè¯¥æ–‡ä»¶ç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„å nameå‘½åã€‚  

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚è¯¥è·¯å¾„ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶,ä¼šæŠ›å‡º`FileNotFoundException` 

â€‹	

**è¯»å–å­—èŠ‚æ•°æ®**

1. è¯»å–å­—èŠ‚ï¼š`read`æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œæå‡ä¸ºintç±»å‹ï¼Œè¯»å–åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›`-1`

> å°è´´å£«ï¼š
>
> 1. è™½ç„¶è¯»å–äº†ä¸€ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹ã€‚
> 2. æµæ“ä½œå®Œæ¯•åï¼Œå¿…é¡»é‡Šæ”¾ç³»ç»Ÿèµ„æºï¼Œè°ƒç”¨closeæ–¹æ³•ï¼Œåƒä¸‡è®°å¾—ã€‚

2. ä½¿ç”¨å­—èŠ‚æ•°ç»„è¯»å–ï¼š`read(byte[] b)`ï¼Œæ¯æ¬¡è¯»å–bçš„é•¿åº¦ä¸ªå­—èŠ‚åˆ°æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–åˆ°çš„æœ‰æ•ˆå­—èŠ‚ä¸ªæ•°ï¼Œè¯»å–åˆ°æœ«å°¾æ—¶ï¼Œè¿”å›`-1`

> å°è´´å£«ï¼š
>
> ä½¿ç”¨æ•°ç»„è¯»å–ï¼Œæ¯æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚ï¼Œå‡å°‘äº†ç³»ç»Ÿé—´çš„IOæ“ä½œæ¬¡æ•°ï¼Œä»è€Œæé«˜äº†è¯»å†™çš„æ•ˆç‡ï¼Œå»ºè®®å¼€å‘ä¸­ä½¿ç”¨ã€‚

â€‹			

#### 5.2.5 æ–‡ä»¶æ‹·è´æ€æƒ³

 ![](Java02-Javaè¿›é˜¶/2_copy.jpg)

å¤åˆ¶å›¾ç‰‡æ–‡ä»¶ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class Copy {
    public static void main(String[] args) throws IOException {
        // 1.åˆ›å»ºæµå¯¹è±¡
        // 1.1 æŒ‡å®šæ•°æ®æº
        FileInputStream fis = new FileInputStream("D:\\test.jpg");
        // 1.2 æŒ‡å®šç›®çš„åœ°
        FileOutputStream fos = new FileOutputStream("test_copy.jpg");

        // 2.è¯»å†™æ•°æ®
        // 2.1 å®šä¹‰æ•°ç»„
        byte[] b = new byte[1024];
        // 2.2 å®šä¹‰é•¿åº¦
        int len;
        // 2.3 å¾ªç¯è¯»å–
        while ((len = fis.read(b))!=-1) {
            // 2.4 å†™å‡ºæ•°æ®
            fos.write(b, 0 , len);
        }

        // 3.å…³é—­èµ„æº
        fos.close();
        fis.close();
    }
}
```

> å°è´´å£«ï¼š
>
> æµçš„å…³é—­åŸåˆ™ï¼šå…ˆå¼€åå…³ï¼Œåå¼€å…ˆå…³ã€‚

â€‹			

### 5.3 IOå¼‚å¸¸å¤„ç†

**JDK9çš„æ”¹è¿›(æ‰©å±•çŸ¥è¯†ç‚¹äº†è§£å†…å®¹)**

JDK9ä¸­`try-with-resource` çš„æ”¹è¿›ï¼Œå¯¹äº**å¼•å…¥å¯¹è±¡**çš„æ–¹å¼ï¼Œæ”¯æŒçš„æ›´åŠ ç®€æ´ã€‚è¢«å¼•å…¥çš„å¯¹è±¡ï¼ŒåŒæ ·å¯ä»¥è‡ªåŠ¨å…³é—­ï¼Œæ— éœ€æ‰‹åŠ¨closeï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹æ ¼å¼ã€‚

æ”¹è¿›å‰æ ¼å¼ï¼š

```java
// è¢«finalä¿®é¥°çš„å¯¹è±¡
final Resource resource1 = new Resource("resource1");
// æ™®é€šå¯¹è±¡
Resource resource2 = new Resource("resource2");
// å¼•å…¥æ–¹å¼ï¼šåˆ›å»ºæ–°çš„å˜é‡ä¿å­˜
try (Resource r1 = resource1;
     Resource r2 = resource2) {
     // ä½¿ç”¨å¯¹è±¡
}
```

æ”¹è¿›åæ ¼å¼ï¼š

```java
// è¢«finalä¿®é¥°çš„å¯¹è±¡
final Resource resource1 = new Resource("resource1");
// æ™®é€šå¯¹è±¡
Resource resource2 = new Resource("resource2");

// å¼•å…¥æ–¹å¼ï¼šç›´æ¥å¼•å…¥
try (resource1; resource2) {
     // ä½¿ç”¨å¯¹è±¡
}
```

æ”¹è¿›åï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class TryDemo {
    public static void main(String[] args) throws IOException {
       	// åˆ›å»ºæµå¯¹è±¡
        final  FileReader fr  = new FileReader("in.txt");
        FileWriter fw = new FileWriter("out.txt");
       	// å¼•å…¥åˆ°tryä¸­
        try (fr; fw) {
          	// å®šä¹‰å˜é‡
            int b;
          	// è¯»å–æ•°æ®
          	while ((b = fr.read())!=-1) {
            	// å†™å‡ºæ•°æ®
            	fw.write(b);
          	}
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

â€‹		

### 5.4 Javaä¸­ç¼–ç ä¸è§£ç 

ä¹±ç äº§ç”Ÿçš„ä¸¤ä¸ªåŸå› ï¼š

1. è¯»å–æ•°æ®æ—¶æœªè¯»å®Œæ•´ä¸ªæ±‰å­—
2. ç¼–ç å’Œè§£ç çš„æ–¹å¼ä¸ç»Ÿä¸€

![image-20250810201612263](Java02-Javaè¿›é˜¶/image-20250810201612263.png)

â€‹	

### 5.5 å­—ç¬¦æµ

å­—ç¬¦æµçš„åº•å±‚å°±æ˜¯å­—èŠ‚æµï¼šå­—ç¬¦æµ = å­—èŠ‚æµ + å­—ç¬¦é›†

ç‰¹ç‚¹â€©

â€‹	è¾“å…¥æµï¼šä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚ï¼Œé‡åˆ°ä¸­æ–‡æ—¶ï¼Œä¸€æ¬¡è¯»å¤šä¸ªå­—èŠ‚â€©

â€‹	è¾“å‡ºæµï¼šåº•å±‚ä¼šæŠŠæ•°æ®æŒ‰ç…§æŒ‡å®šçš„ç¼–ç æ–¹å¼è¿›è¡Œç¼–ç ï¼Œå˜æˆå­—èŠ‚å†å†™åˆ°æ–‡ä»¶ä¸­

![image-20250810202143591](Java02-Javaè¿›é˜¶/image-20250810202143591.png)

â€‹	

#### 5.5.1 å­—ç¬¦è¾“å…¥æµã€Readerã€‘

`java.io.Reader`æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºç”¨äºè¯»å–å­—ç¬¦æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯ä»¥è¯»å–å­—ç¬¦ä¿¡æ¯åˆ°å†…å­˜ä¸­ã€‚å®ƒå®šä¹‰äº†å­—ç¬¦è¾“å…¥æµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

- `public void close()` ï¼šå…³é—­æ­¤æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚    

- `public int read()`ï¼š ä»è¾“å…¥æµè¯»å–ä¸€ä¸ªå­—ç¬¦ã€‚ 

- `public int read(char[] cbuf)`ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—ç¬¦ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—ç¬¦æ•°ç»„ cbufä¸­ ã€‚

  

#### 5.5.2 FileReaderç±»  

`java.io.FileReader `ç±»æ˜¯è¯»å–å­—ç¬¦æ–‡ä»¶çš„ä¾¿åˆ©ç±»ã€‚æ„é€ æ—¶ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å­—ç¬¦ç¼–ç å’Œé»˜è®¤å­—èŠ‚ç¼“å†²åŒºã€‚

> å°è´´å£«ï¼š
>
> 1. å­—ç¬¦ç¼–ç ï¼šå­—èŠ‚ä¸å­—ç¬¦çš„å¯¹åº”è§„åˆ™ã€‚Windowsç³»ç»Ÿçš„ä¸­æ–‡ç¼–ç é»˜è®¤æ˜¯GBKç¼–ç è¡¨ã€‚
>
>    ideaä¸­UTF-8
>
> 2. å­—èŠ‚ç¼“å†²åŒºï¼šä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œç”¨æ¥ä¸´æ—¶å­˜å‚¨å­—èŠ‚æ•°æ®ã€‚

**æ„é€ æ–¹æ³•**

- `FileReader(File file)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileReader ï¼Œç»™å®šè¦è¯»å–çš„Fileå¯¹è±¡ã€‚   
- `FileReader(String fileName)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileReader ï¼Œç»™å®šè¦è¯»å–çš„æ–‡ä»¶çš„åç§°ã€‚  

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ã€‚ç±»ä¼¼äºFileInputStream ã€‚

â€‹	

**è¯»å–å­—ç¬¦æ•°æ®**

1. è¯»å–å­—ç¬¦ï¼š`read`æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥è¯»å–ä¸€ä¸ªå­—ç¬¦çš„æ•°æ®ï¼Œæå‡ä¸ºintç±»å‹ï¼Œè¯»å–åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›`-1`ï¼Œå¾ªç¯è¯»å–

> å°è´´å£«ï¼šè™½ç„¶è¯»å–äº†ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹ã€‚

2. ä½¿ç”¨å­—ç¬¦æ•°ç»„è¯»å–ï¼š`read(char[] cbuf)`ï¼Œæ¯æ¬¡è¯»å–bçš„é•¿åº¦ä¸ªå­—ç¬¦åˆ°æ•°ç»„ä¸­ï¼Œè¿”å›è¯»å–åˆ°çš„æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°ï¼Œè¯»å–åˆ°æœ«å°¾æ—¶ï¼Œè¿”å›`-1` ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

```java
public class FISRead {
    public static void main(String[] args) throws IOException {
      	// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
       	FileReader fr = new FileReader("read.txt");
      	// å®šä¹‰å˜é‡ï¼Œä¿å­˜æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°
        int lenï¼›
        // å®šä¹‰å­—ç¬¦æ•°ç»„ï¼Œä½œä¸ºè£…å­—ç¬¦æ•°æ®çš„å®¹å™¨
        char[] cbuf = new char[2];
        // å¾ªç¯è¯»å–
        while ((len = fr.read(cbuf))!=-1) {
            System.out.println(new String(cbuf,0,len));
        }
    	// å…³é—­èµ„æº
        fr.close();
    }
}
```

â€‹	

#### 5.5.3 å­—ç¬¦è¾“å‡ºæµã€Writerã€‘

`java.io.Writer `æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºç”¨äºå†™å‡ºå­—ç¬¦æµçš„æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå°†æŒ‡å®šçš„å­—ç¬¦ä¿¡æ¯å†™å‡ºåˆ°ç›®çš„åœ°ã€‚å®ƒå®šä¹‰äº†å­—èŠ‚è¾“å‡ºæµçš„åŸºæœ¬å…±æ€§åŠŸèƒ½æ–¹æ³•ã€‚

- `void write(int c)` å†™å…¥å•ä¸ªå­—ç¬¦ã€‚

- `void write(char[] cbuf) `å†™å…¥å­—ç¬¦æ•°ç»„ã€‚ 

- `abstract  void write(char[] cbuf, int off, int len) `å†™å…¥å­—ç¬¦æ•°ç»„çš„æŸä¸€éƒ¨åˆ†,offæ•°ç»„çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚ 

- `void write(String str) `å†™å…¥å­—ç¬¦ä¸²ã€‚ 

- `void write(String str, int off, int len)` å†™å…¥å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†,offå­—ç¬¦ä¸²çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚

- `void flush() `åˆ·æ–°è¯¥æµçš„ç¼“å†²ã€‚  

- `void close()` å…³é—­æ­¤æµï¼Œä½†è¦å…ˆåˆ·æ–°å®ƒã€‚ 

  

#### 5.5.4 FileWriterç±»

`java.io.FileWriter `ç±»æ˜¯å†™å‡ºå­—ç¬¦åˆ°æ–‡ä»¶çš„ä¾¿åˆ©ç±»ã€‚æ„é€ æ—¶ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å­—ç¬¦ç¼–ç å’Œé»˜è®¤å­—èŠ‚ç¼“å†²åŒºã€‚

**æ„é€ æ–¹æ³•**

- `FileWriter(File file)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileWriterï¼Œç»™å®šè¦è¯»å–çš„Fileå¯¹è±¡ã€‚   
- `FileWriter(String fileName)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ FileWriterï¼Œç»™å®šè¦è¯»å–çš„æ–‡ä»¶çš„åç§°ã€‚  
- `FileWriter(String fileName, boolean append)`ï¼š ç¬¬äºŒä¸ªå‚æ•°æŒ‡æ˜¯å¦ç»­å†™
- `FileWriter(File file, boolean append)`ï¼š ç¬¬äºŒä¸ªå‚æ•°æŒ‡æ˜¯å¦ç»­å†™

å½“ä½ åˆ›å»ºä¸€ä¸ªæµå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œç±»ä¼¼äºFileOutputStreamã€‚

â€‹	

**åŸºæœ¬å†™å‡ºæ•°æ®**

1. å†™å‡ºå­—ç¬¦ï¼š`write(int b)` æ–¹æ³•ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºä¸€ä¸ªå­—ç¬¦æ•°æ®ï¼Œä»£ç ä½¿ç”¨æ¼”ç¤ºï¼š

> å°è´´å£«ï¼š
>
> 1. è™½ç„¶å‚æ•°ä¸ºintç±»å‹å››ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åªä¼šä¿ç•™ä¸€ä¸ªå­—ç¬¦çš„ä¿¡æ¯å†™å‡ºã€‚
> 2. æœªè°ƒç”¨closeæ–¹æ³•ï¼Œæ•°æ®åªæ˜¯ä¿å­˜åˆ°äº†ç¼“å†²åŒºï¼Œå¹¶æœªå†™å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚

â€‹	

**å…³é—­å’Œåˆ·æ–°**

å› ä¸ºå†…ç½®ç¼“å†²åŒºçš„åŸå› ï¼Œå¦‚æœä¸å…³é—­è¾“å‡ºæµï¼Œæ— æ³•å†™å‡ºå­—ç¬¦åˆ°æ–‡ä»¶ä¸­ã€‚ä½†æ˜¯å…³é—­çš„æµå¯¹è±¡ï¼Œæ˜¯æ— æ³•ç»§ç»­å†™å‡ºæ•°æ®çš„ã€‚å¦‚æœæˆ‘ä»¬æ—¢æƒ³å†™å‡ºæ•°æ®ï¼Œåˆæƒ³ç»§ç»­ä½¿ç”¨æµï¼Œå°±éœ€è¦`flush` æ–¹æ³•äº†ã€‚

* `flush` ï¼šåˆ·æ–°ç¼“å†²åŒºï¼Œæµå¯¹è±¡å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚

* `close `:å…ˆåˆ·æ–°ç¼“å†²åŒºï¼Œç„¶åé€šçŸ¥ç³»ç»Ÿé‡Šæ”¾èµ„æºã€‚æµå¯¹è±¡ä¸å¯ä»¥å†è¢«ä½¿ç”¨äº†ã€‚

  

**å†™å‡ºå…¶ä»–æ•°æ®**

1. å†™å‡ºå­—ç¬¦æ•°ç»„ ï¼š`write(char[] cbuf)` å’Œ `write(char[] cbuf, int off, int len)` ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºå­—ç¬¦æ•°ç»„ä¸­çš„æ•°æ®ï¼Œç”¨æ³•ç±»ä¼¼FileOutputStream

2. å†™å‡ºå­—ç¬¦ä¸²ï¼š`write(String str)` å’Œ `write(String str, int off, int len)` ï¼Œæ¯æ¬¡å¯ä»¥å†™å‡ºå­—ç¬¦ä¸²ä¸­çš„æ•°æ®ï¼Œæ›´ä¸ºæ–¹ä¾¿

3. ç»­å†™å’Œæ¢è¡Œï¼šæ“ä½œç±»ä¼¼äºFileOutputStreamã€‚

> å°è´´å£«ï¼šå­—ç¬¦æµï¼Œåªèƒ½æ“ä½œæ–‡æœ¬æ–‡ä»¶ï¼Œä¸èƒ½æ“ä½œå›¾ç‰‡ï¼Œè§†é¢‘ç­‰éæ–‡æœ¬æ–‡ä»¶ã€‚
>
> å½“æˆ‘ä»¬å•çº¯è¯»æˆ–è€…å†™æ–‡æœ¬æ–‡ä»¶æ—¶  ä½¿ç”¨å­—ç¬¦æµ å…¶ä»–æƒ…å†µä½¿ç”¨å­—èŠ‚æµ

â€‹		

### 5.6 ç¼“å†²æµ

![image-20250811174701987](Java02-Javaè¿›é˜¶/image-20250811174701987.png)

ç¼“å†²æµ,ä¹Ÿå«é«˜æ•ˆæµï¼Œæ˜¯å¯¹4ä¸ªåŸºæœ¬çš„`FileXxx` æµçš„å¢å¼ºï¼Œæ‰€ä»¥ä¹Ÿæ˜¯4ä¸ªæµï¼ŒæŒ‰ç…§æ•°æ®ç±»å‹åˆ†ç±»ï¼š

* **å­—èŠ‚ç¼“å†²æµ**ï¼š`BufferedInputStream`ï¼Œ`BufferedOutputStream` 
* **å­—ç¬¦ç¼“å†²æµ**ï¼š`BufferedReader`ï¼Œ`BufferedWriter`

ç¼“å†²æµçš„åŸºæœ¬åŸç†ï¼Œæ˜¯åœ¨åˆ›å»ºæµå¯¹è±¡æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…ç½®çš„é»˜è®¤å¤§å°çš„ç¼“å†²åŒºæ•°ç»„ï¼Œé€šè¿‡ç¼“å†²åŒºè¯»å†™ï¼Œå‡å°‘ç³»ç»ŸIOæ¬¡æ•°ï¼Œä»è€Œæé«˜è¯»å†™çš„æ•ˆç‡ã€‚ï¼ˆå†…å­˜çš„æ“ä½œé€Ÿåº¦å¾ˆå¿«ï¼Œå‡å°‘å’Œç¡¬ç›˜çš„äº¤äº’ï¼‰

â€‹	

#### 5.6.1 å­—èŠ‚ç¼“å†²æµ

**æ„é€ æ–¹æ³•**

* `public BufferedInputStream(InputStream in)` ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚ 
* `public BufferedOutputStream(OutputStream out)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚

```java
// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å…¥æµ
BufferedInputStream bis = new BufferedInputStream(new FileInputStream("bis.txt"));
// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å‡ºæµ
BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("bos.txt"));
```

![image-20250811175539250](Java02-Javaè¿›é˜¶/image-20250811175539250.png)

â€‹	

#### 5.6.2 å­—ç¬¦ç¼“å†²æµ

**æ„é€ æ–¹æ³•**

* `public BufferedReader(Reader in)` ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚ 
* `public BufferedWriter(Writer out)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚

**ç‰¹æœ‰æ–¹æ³• â€»**

å­—ç¬¦ç¼“å†²æµçš„åŸºæœ¬æ–¹æ³•ä¸æ™®é€šå­—ç¬¦æµè°ƒç”¨æ–¹å¼ä¸€è‡´ï¼Œä¸å†é˜è¿°ï¼Œæˆ‘ä»¬æ¥çœ‹å®ƒä»¬å…·å¤‡çš„ç‰¹æœ‰æ–¹æ³•ã€‚

* BufferedReaderï¼š`public String readLine()`: è¯»ä¸€è¡Œæ–‡å­—ã€‚ åˆ°æœ«å°¾è¿”å›nullè€Œé-1
* BufferedWriterï¼š`public void newLine()`: å†™ä¸€è¡Œè¡Œåˆ†éš”ç¬¦,ç”±ç³»ç»Ÿå±æ€§å®šä¹‰ç¬¦å·ã€‚ 

`readLine`æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class BufferedReaderDemo {
    public static void main(String[] args) throws IOException {
      	 // åˆ›å»ºæµå¯¹è±¡
        BufferedReader br = new BufferedReader(new FileReader("in.txt"));
		// å®šä¹‰å­—ç¬¦ä¸²,ä¿å­˜è¯»å–çš„ä¸€è¡Œæ–‡å­—
        String line  = null;
      	// å¾ªç¯è¯»å–,è¯»å–åˆ°æœ€åè¿”å›null
        while ((line = br.readLine())!=null) {
            System.out.print(line);
            System.out.println("------");
        }
		// é‡Šæ”¾èµ„æº
        br.close();
    }
}
```

â€‹				

### 5.7 è½¬æ¢æµ

#### 5.7.1 å­—ç¬¦ç¼–ç ä¸å­—ç¬¦é›†

**å­—ç¬¦ç¼–ç **

è®¡ç®—æœºä¸­å‚¨å­˜çš„ä¿¡æ¯éƒ½æ˜¯ç”¨äºŒè¿›åˆ¶æ•°è¡¨ç¤ºçš„ï¼Œè€Œæˆ‘ä»¬åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„æ•°å­—ã€è‹±æ–‡ã€æ ‡ç‚¹ç¬¦å·ã€æ±‰å­—ç­‰å­—ç¬¦æ˜¯äºŒè¿›åˆ¶æ•°è½¬æ¢ä¹‹åçš„ç»“æœã€‚æŒ‰ç…§æŸç§è§„åˆ™ï¼Œå°†å­—ç¬¦å­˜å‚¨åˆ°è®¡ç®—æœºä¸­ï¼Œç§°ä¸º**ç¼–ç ** ã€‚åä¹‹ï¼Œå°†å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„äºŒè¿›åˆ¶æ•°æŒ‰ç…§æŸç§è§„åˆ™è§£ææ˜¾ç¤ºå‡ºæ¥ï¼Œç§°ä¸º**è§£ç ** ã€‚æ¯”å¦‚è¯´ï¼ŒæŒ‰ç…§Aè§„åˆ™å­˜å‚¨ï¼ŒåŒæ ·æŒ‰ç…§Aè§„åˆ™è§£æï¼Œé‚£ä¹ˆå°±èƒ½æ˜¾ç¤ºæ­£ç¡®çš„æ–‡æœ¬ç¬¦å·ã€‚åä¹‹ï¼ŒæŒ‰ç…§Aè§„åˆ™å­˜å‚¨ï¼Œå†æŒ‰ç…§Bè§„åˆ™è§£æï¼Œå°±ä¼šå¯¼è‡´ä¹±ç ç°è±¡ã€‚

ç¼–ç :å­—ç¬¦(èƒ½çœ‹æ‡‚çš„)--å­—èŠ‚(çœ‹ä¸æ‡‚çš„)

è§£ç :å­—èŠ‚(çœ‹ä¸æ‡‚çš„)-->å­—ç¬¦(èƒ½çœ‹æ‡‚çš„)

* **å­—ç¬¦ç¼–ç `Character Encoding`** : å°±æ˜¯ä¸€å¥—è‡ªç„¶è¯­è¨€çš„å­—ç¬¦ä¸äºŒè¿›åˆ¶æ•°ä¹‹é—´çš„å¯¹åº”è§„åˆ™ã€‚

  ç¼–ç è¡¨:ç”Ÿæ´»ä¸­æ–‡å­—å’Œè®¡ç®—æœºä¸­äºŒè¿›åˆ¶çš„å¯¹åº”è§„åˆ™

  

**å­—ç¬¦é›†**

* **å­—ç¬¦é›† `Charset`**ï¼šä¹Ÿå«ç¼–ç è¡¨ã€‚æ˜¯ä¸€ä¸ªç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰å­—ç¬¦çš„é›†åˆï¼ŒåŒ…æ‹¬å„å›½å®¶æ–‡å­—ã€æ ‡ç‚¹ç¬¦å·ã€å›¾å½¢ç¬¦å·ã€æ•°å­—ç­‰ã€‚

è®¡ç®—æœºè¦å‡†ç¡®çš„å­˜å‚¨å’Œè¯†åˆ«å„ç§å­—ç¬¦é›†ç¬¦å·ï¼Œéœ€è¦è¿›è¡Œå­—ç¬¦ç¼–ç ï¼Œä¸€å¥—å­—ç¬¦é›†å¿…ç„¶è‡³å°‘æœ‰ä¸€å¥—å­—ç¬¦ç¼–ç ã€‚å¸¸è§å­—ç¬¦é›†æœ‰ASCIIå­—ç¬¦é›†ã€GBKå­—ç¬¦é›†ã€Unicodeå­—ç¬¦é›†ç­‰ã€‚![](Java02-Javaè¿›é˜¶/1_charset.jpg)

å¯è§ï¼Œå½“æŒ‡å®šäº†**ç¼–ç **ï¼Œå®ƒæ‰€å¯¹åº”çš„**å­—ç¬¦é›†**è‡ªç„¶å°±æŒ‡å®šäº†ï¼Œæ‰€ä»¥**ç¼–ç **æ‰æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦å…³å¿ƒçš„ã€‚

* **ASCIIå­—ç¬¦é›†** ï¼š
  * ASCIIï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰æ˜¯åŸºäºæ‹‰ä¸å­—æ¯çš„ä¸€å¥—ç”µè„‘ç¼–ç ç³»ç»Ÿï¼Œç”¨äºæ˜¾ç¤ºç°ä»£è‹±è¯­ï¼Œä¸»è¦åŒ…æ‹¬æ§åˆ¶å­—ç¬¦ï¼ˆå›è½¦é”®ã€é€€æ ¼ã€æ¢è¡Œé”®ç­‰ï¼‰å’Œå¯æ˜¾ç¤ºå­—ç¬¦ï¼ˆè‹±æ–‡å¤§å°å†™å­—ç¬¦ã€é˜¿æ‹‰ä¼¯æ•°å­—å’Œè¥¿æ–‡ç¬¦å·ï¼‰ã€‚
  * åŸºæœ¬çš„ASCIIå­—ç¬¦é›†ï¼Œä½¿ç”¨7ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±128å­—ç¬¦ã€‚ASCIIçš„æ‰©å±•å­—ç¬¦é›†ä½¿ç”¨8ä½ï¼ˆbitsï¼‰è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…±256å­—ç¬¦ï¼Œæ–¹ä¾¿æ”¯æŒæ¬§æ´²å¸¸ç”¨å­—ç¬¦ã€‚
* **ISO-8859-1å­—ç¬¦é›†**ï¼š
  * æ‹‰ä¸ç è¡¨ï¼Œåˆ«åLatin-1ï¼Œç”¨äºæ˜¾ç¤ºæ¬§æ´²ä½¿ç”¨çš„è¯­è¨€ï¼ŒåŒ…æ‹¬è·å…°ã€ä¸¹éº¦ã€å¾·è¯­ã€æ„å¤§åˆ©è¯­ã€è¥¿ç­ç‰™è¯­ç­‰ã€‚
  * ISO-8859-1ä½¿ç”¨å•å­—èŠ‚ç¼–ç ï¼Œå…¼å®¹ASCIIç¼–ç ã€‚
* **GBxxxå­—ç¬¦é›†**ï¼š
  * GBå°±æ˜¯å›½æ ‡çš„æ„æ€ï¼Œæ˜¯ä¸ºäº†æ˜¾ç¤ºä¸­æ–‡è€Œè®¾è®¡çš„ä¸€å¥—å­—ç¬¦é›†ã€‚
  * **GB2312**ï¼šç®€ä½“ä¸­æ–‡ç è¡¨ã€‚ä¸€ä¸ªå°äº127çš„å­—ç¬¦çš„æ„ä¹‰ä¸åŸæ¥ç›¸åŒã€‚ä½†ä¸¤ä¸ªå¤§äº127çš„å­—ç¬¦è¿åœ¨ä¸€èµ·æ—¶ï¼Œå°±è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ï¼Œè¿™æ ·å¤§çº¦å¯ä»¥ç»„åˆäº†åŒ…å«7000å¤šä¸ªç®€ä½“æ±‰å­—ï¼Œæ­¤å¤–æ•°å­¦ç¬¦å·ã€ç½—é©¬å¸Œè…Šçš„å­—æ¯ã€æ—¥æ–‡çš„å‡åä»¬éƒ½ç¼–è¿›å»äº†ï¼Œè¿åœ¨ASCIIé‡Œæœ¬æ¥å°±æœ‰çš„æ•°å­—ã€æ ‡ç‚¹ã€å­—æ¯éƒ½ç»Ÿç»Ÿé‡æ–°ç¼–äº†ä¸¤ä¸ªå­—èŠ‚é•¿çš„ç¼–ç ï¼Œè¿™å°±æ˜¯å¸¸è¯´çš„"å…¨è§’"å­—ç¬¦ï¼Œè€ŒåŸæ¥åœ¨127å·ä»¥ä¸‹çš„é‚£äº›å°±å«"åŠè§’"å­—ç¬¦äº†ã€‚
  * **GBK**ï¼šæœ€å¸¸ç”¨çš„ä¸­æ–‡ç è¡¨ã€‚æ˜¯åœ¨GB2312æ ‡å‡†åŸºç¡€ä¸Šçš„æ‰©å±•è§„èŒƒï¼Œä½¿ç”¨äº†åŒå­—èŠ‚ç¼–ç æ–¹æ¡ˆï¼Œå…±æ”¶å½•äº†21003ä¸ªæ±‰å­—ï¼Œå®Œå…¨å…¼å®¹GB2312æ ‡å‡†ï¼ŒåŒæ—¶æ”¯æŒç¹ä½“æ±‰å­—ä»¥åŠæ—¥éŸ©æ±‰å­—ç­‰ã€‚
  * **GB18030**ï¼šæœ€æ–°çš„ä¸­æ–‡ç è¡¨ã€‚æ”¶å½•æ±‰å­—70244ä¸ªï¼Œé‡‡ç”¨å¤šå­—èŠ‚ç¼–ç ï¼Œæ¯ä¸ªå­—å¯ä»¥ç”±1ä¸ªã€2ä¸ªæˆ–4ä¸ªå­—èŠ‚ç»„æˆã€‚æ”¯æŒä¸­å›½å›½å†…å°‘æ•°æ°‘æ—çš„æ–‡å­—ï¼ŒåŒæ—¶æ”¯æŒç¹ä½“æ±‰å­—ä»¥åŠæ—¥éŸ©æ±‰å­—ç­‰ã€‚
* **Unicodeå­—ç¬¦é›†** ï¼š
  * Unicodeç¼–ç ç³»ç»Ÿä¸ºè¡¨è¾¾ä»»æ„è¯­è¨€çš„ä»»æ„å­—ç¬¦è€Œè®¾è®¡ï¼Œæ˜¯ä¸šç•Œçš„ä¸€ç§æ ‡å‡†ï¼Œä¹Ÿç§°ä¸ºç»Ÿä¸€ç ã€æ ‡å‡†ä¸‡å›½ç ã€‚
  * å®ƒæœ€å¤šä½¿ç”¨4ä¸ªå­—èŠ‚çš„æ•°å­—æ¥è¡¨è¾¾æ¯ä¸ªå­—æ¯ã€ç¬¦å·ï¼Œæˆ–è€…æ–‡å­—ã€‚æœ‰ä¸‰ç§ç¼–ç æ–¹æ¡ˆï¼ŒUTF-8ã€UTF-16å’ŒUTF-32ã€‚æœ€ä¸ºå¸¸ç”¨çš„UTF-8ç¼–ç ã€‚
  * UTF-8ç¼–ç ï¼Œå¯ä»¥ç”¨æ¥è¡¨ç¤ºUnicodeæ ‡å‡†ä¸­ä»»ä½•å­—ç¬¦ï¼Œå®ƒæ˜¯ç”µå­é‚®ä»¶ã€ç½‘é¡µåŠå…¶ä»–å­˜å‚¨æˆ–ä¼ é€æ–‡å­—çš„åº”ç”¨ä¸­ï¼Œä¼˜å…ˆé‡‡ç”¨çš„ç¼–ç ã€‚äº’è”ç½‘å·¥ç¨‹å·¥ä½œå°ç»„ï¼ˆIETFï¼‰è¦æ±‚æ‰€æœ‰äº’è”ç½‘åè®®éƒ½å¿…é¡»æ”¯æŒUTF-8ç¼–ç ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¼€å‘Webåº”ç”¨ï¼Œä¹Ÿè¦ä½¿ç”¨UTF-8ç¼–ç ã€‚å®ƒä½¿ç”¨ä¸€è‡³å››ä¸ªå­—èŠ‚ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ç ï¼Œç¼–ç è§„åˆ™ï¼š
    1. 128ä¸ªUS-ASCIIå­—ç¬¦ï¼Œåªéœ€ä¸€ä¸ªå­—èŠ‚ç¼–ç ã€‚
    2. æ‹‰ä¸æ–‡ç­‰å­—ç¬¦ï¼Œéœ€è¦äºŒä¸ªå­—èŠ‚ç¼–ç ã€‚ 
    3. å¤§éƒ¨åˆ†å¸¸ç”¨å­—ï¼ˆå«ä¸­æ–‡ï¼‰ï¼Œä½¿ç”¨ä¸‰ä¸ªå­—èŠ‚ç¼–ç ã€‚
    4. å…¶ä»–æå°‘ä½¿ç”¨çš„Unicodeè¾…åŠ©å­—ç¬¦ï¼Œä½¿ç”¨å››å­—èŠ‚ç¼–ç ã€‚



#### 5.7.2 InputStreamReaderç±»  

è½¬æ¢æµ`java.io.InputStreamReader`ï¼Œæ˜¯Readerçš„å­ç±»ï¼Œæ˜¯ä»å­—èŠ‚æµåˆ°å­—ç¬¦æµçš„æ¡¥æ¢ã€‚å®ƒè¯»å–å­—èŠ‚ï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†å…¶è§£ç ä¸ºå­—ç¬¦ã€‚å®ƒçš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†ã€‚ 

**æ„é€ æ–¹æ³•**

* `InputStreamReader(InputStream in)`: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚ 
* `InputStreamReader(InputStream in, String charsetName)`: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚

**æŒ‡å®šç¼–ç è¯»å–ï¼š**

```java
public class ConvertStreamDemo1 {
    public static void main(String[] args) throws IOException {
        /*
        åˆ©ç”¨è½¬æ¢æµæŒ‰ç…§æŒ‡å®šå­—ç¬¦ç¼–ç è¯»å–(äº†è§£)
        å› ä¸ºJDK11: è¿™ç§æ–¹å¼è¢«æ·˜æ±°äº†ã€‚æ›¿ä»£æ–¹æ¡ˆ(æŒæ¡)
        */

        /*
        //1.åˆ›å»ºå¯¹è±¡å¹¶æŒ‡å®šå­—ç¬¦ç¼–ç 
        InputStreamReader isr = new InputStreamReader(new FileInputStream("myio\\gbkfile.txt"), "GBK");
        //2.è¯»å–æ•°æ®
        int ch;
        while ((ch = isr.read()) != -1){
            System.out.print((char) ch);
        }
        //3.é‡Šæ”¾èµ„æº
        isr.close();
        */

        FileReader fr = new FileReader("myio\\gbkfile.txt", Charset.forName("GBK"));
        //2.è¯»å–æ•°æ®
        int ch;
        while ((ch = fr.read()) != -1){
            System.out.print((char) ch);
        }
    }
}
```

â€‹	

#### 5.7.3 OutputStreamWriterç±»

è½¬æ¢æµ`java.io.OutputStreamWriter` ï¼Œæ˜¯Writerçš„å­ç±»ï¼Œæ˜¯ä»å­—ç¬¦æµåˆ°å­—èŠ‚æµçš„æ¡¥æ¢ã€‚ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†å­—ç¬¦ç¼–ç ä¸ºå­—èŠ‚ã€‚å®ƒçš„å­—ç¬¦é›†å¯ä»¥ç”±åç§°æŒ‡å®šï¼Œä¹Ÿå¯ä»¥æ¥å—å¹³å°çš„é»˜è®¤å­—ç¬¦é›†ã€‚ 

**æ„é€ æ–¹æ³•**

- `OutputStreamWriter(OutputStream in)`: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚ 
- `OutputStreamWriter(OutputStream in, String charsetName)`: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚

**æŒ‡å®šç¼–ç å†™å‡º**

```java
public class ConvertStreamDemo2 {
    public static void main(String[] args) throws IOException {

        /*
        åˆ©ç”¨è½¬æ¢æµæŒ‰æŒ‡å®šå­—ç¬¦ç¼–ç å†™å‡º
        */

        /*//1.åˆ›å»ºè½¬æ¢æµçš„å¯¹è±¡
        OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream("myio\\b.txt"),"GBK");
        //2.å†™å‡ºæ•°æ®
        osw.write("ä½ å¥½ä½ å¥½");
        //3.é‡Šæ”¾èµ„æº
        osw.close();*/

        FileWriter fw = new FileWriter("myio\\c.txt", Charset.forName("GBK"));
        fw.write("ä½ å¥½ä½ å¥½");
        fw.close();
    }
}

```

â€‹			

### 5.8 åºåˆ—åŒ–æµ

Java æä¾›äº†ä¸€ç§å¯¹è±¡**åºåˆ—åŒ–**çš„æœºåˆ¶ã€‚ç”¨ä¸€ä¸ªå­—èŠ‚åºåˆ—å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å­—èŠ‚åºåˆ—åŒ…å«è¯¥`å¯¹è±¡çš„æ•°æ®`ã€`å¯¹è±¡çš„ç±»å‹`å’Œ`å¯¹è±¡ä¸­å­˜å‚¨çš„å±æ€§`ç­‰ä¿¡æ¯ã€‚å­—èŠ‚åºåˆ—å†™å‡ºåˆ°æ–‡ä»¶ä¹‹åï¼Œç›¸å½“äºæ–‡ä»¶ä¸­**æŒä¹…ä¿å­˜**äº†ä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯ã€‚ 

åä¹‹ï¼Œè¯¥å­—èŠ‚åºåˆ—è¿˜å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å›æ¥ï¼Œé‡æ„å¯¹è±¡ï¼Œå¯¹å®ƒè¿›è¡Œ**ååºåˆ—åŒ–**ã€‚`å¯¹è±¡çš„æ•°æ®`ã€`å¯¹è±¡çš„ç±»å‹`å’Œ`å¯¹è±¡ä¸­å­˜å‚¨çš„æ•°æ®`ä¿¡æ¯ï¼Œéƒ½å¯ä»¥ç”¨æ¥åœ¨å†…å­˜ä¸­åˆ›å»ºå¯¹è±¡ã€‚çœ‹å›¾ç†è§£åºåˆ—åŒ–ï¼š ![](Java02-Javaè¿›é˜¶/3_xuliehua.jpg)

â€‹			

#### 5.8.1 ObjectOutputStreamç±»

`java.io.ObjectOutputStream ` ç±»ï¼Œå°†Javaå¯¹è±¡çš„åŸå§‹æ•°æ®ç±»å‹å†™å‡ºåˆ°æ–‡ä»¶,å®ç°å¯¹è±¡çš„æŒä¹…å­˜å‚¨ã€‚

**æ„é€ æ–¹æ³•**

* `public ObjectOutputStream(OutputStream out) `ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šOutputStreamçš„ObjectOutputStreamã€‚

**åºåˆ—åŒ–æ“ä½œ**

1. ä¸€ä¸ªå¯¹è±¡è¦æƒ³åºåˆ—åŒ–ï¼Œå¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶:

* è¯¥ç±»å¿…é¡»å®ç°`java.io.Serializable ` æ¥å£ï¼Œ`Serializable` æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œä¸å®ç°æ­¤æ¥å£çš„ç±»å°†ä¸ä¼šä½¿ä»»ä½•çŠ¶æ€åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ï¼Œä¼šæŠ›å‡º`NotSerializableException` ã€‚
* è¯¥ç±»çš„æ‰€æœ‰å±æ€§å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚å¦‚æœæœ‰ä¸€ä¸ªå±æ€§ä¸éœ€è¦å¯åºåˆ—åŒ–çš„ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»æ³¨æ˜æ˜¯ç¬æ€çš„ï¼Œä½¿ç”¨`transient` å…³é”®å­—ä¿®é¥°ã€‚

* 

```java
public class Employee implements java.io.Serializable {
    public String name;
    public String address;
    public transient int age; // transientç¬æ€ä¿®é¥°æˆå‘˜,ä¸ä¼šè¢«åºåˆ—åŒ–
    public void addressCheck() {
      	System.out.println("Address  check : " + name + " -- " + address);
    }
}
```

2.å†™å‡ºå¯¹è±¡æ–¹æ³•

* `public final void writeObject (Object obj)` : å°†æŒ‡å®šçš„å¯¹è±¡å†™å‡ºã€‚

  

#### 5.8.2 ObjectInputStreamç±»

ObjectInputStreamååºåˆ—åŒ–æµï¼Œå°†ä¹‹å‰ä½¿ç”¨ObjectOutputStreamåºåˆ—åŒ–çš„åŸå§‹æ•°æ®æ¢å¤ä¸ºå¯¹è±¡ã€‚ 

**æ„é€ æ–¹æ³•**

* `public ObjectInputStream(InputStream in) `ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šInputStreamçš„ObjectInputStreamã€‚

**ååºåˆ—åŒ–æ“ä½œ1**

å¦‚æœèƒ½æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡çš„classæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œååºåˆ—åŒ–æ“ä½œï¼Œè°ƒç”¨`ObjectInputStream`è¯»å–å¯¹è±¡çš„æ–¹æ³•ï¼š

- `public final Object readObject ()` : è¯»å–ä¸€ä¸ªå¯¹è±¡ã€‚

å¯¹äºJVMå¯ä»¥ååºåˆ—åŒ–å¯¹è±¡ï¼Œå®ƒå¿…é¡»æ˜¯èƒ½å¤Ÿæ‰¾åˆ°classæ–‡ä»¶çš„ç±»ã€‚å¦‚æœæ‰¾ä¸åˆ°è¯¥ç±»çš„classæ–‡ä»¶ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª `ClassNotFoundException` å¼‚å¸¸ã€‚  

**ååºåˆ—åŒ–æ“ä½œ2**

å¦å¤–ï¼Œå½“JVMååºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œèƒ½æ‰¾åˆ°classæ–‡ä»¶ï¼Œä½†æ˜¯classæ–‡ä»¶åœ¨åºåˆ—åŒ–å¯¹è±¡ä¹‹åå‘ç”Ÿäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆååºåˆ—åŒ–æ“ä½œä¹Ÿä¼šå¤±è´¥ï¼ŒæŠ›å‡ºä¸€ä¸ª`InvalidClassException`å¼‚å¸¸ã€‚å‘ç”Ÿè¿™ä¸ªå¼‚å¸¸çš„åŸå› å¦‚ä¸‹ï¼š

* è¯¥ç±»çš„åºåˆ—ç‰ˆæœ¬å·ä¸ä»æµä¸­è¯»å–çš„ç±»æè¿°ç¬¦çš„ç‰ˆæœ¬å·ä¸åŒ¹é… 
* è¯¥ç±»åŒ…å«æœªçŸ¥æ•°æ®ç±»å‹ 
* è¯¥ç±»æ²¡æœ‰å¯è®¿é—®çš„æ— å‚æ•°æ„é€ æ–¹æ³• 

`Serializable` æ¥å£ç»™éœ€è¦åºåˆ—åŒ–çš„ç±»ï¼Œæä¾›äº†ä¸€ä¸ªåºåˆ—ç‰ˆæœ¬å·ã€‚`serialVersionUID` è¯¥ç‰ˆæœ¬å·çš„ç›®çš„åœ¨äºéªŒè¯åºåˆ—åŒ–çš„å¯¹è±¡å’Œå¯¹åº”ç±»æ˜¯å¦ç‰ˆæœ¬åŒ¹é…ã€‚

```java
public class Employee implements java.io.Serializable {
     // åŠ å…¥åºåˆ—ç‰ˆæœ¬å·
     private static final long serialVersionUID = 1L;
     public String name;
     public String address;
     // æ·»åŠ æ–°çš„å±æ€§ ,é‡æ–°ç¼–è¯‘, å¯ä»¥ååºåˆ—åŒ–,è¯¥å±æ€§èµ‹ä¸ºé»˜è®¤å€¼.
     public int eid; 

     public void addressCheck() {
         System.out.println("Address  check : " + name + " -- " + address);
     }
}
```

â€‹				

### 5.9 æ‰“å°æµ

å¹³æ—¶æˆ‘ä»¬åœ¨æ§åˆ¶å°æ‰“å°è¾“å‡ºï¼Œæ˜¯è°ƒç”¨`print`æ–¹æ³•å’Œ`println`æ–¹æ³•å®Œæˆçš„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥è‡ªäº`java.io.PrintStream`ç±»ï¼Œè¯¥ç±»èƒ½å¤Ÿæ–¹ä¾¿åœ°æ‰“å°å„ç§æ•°æ®ç±»å‹çš„å€¼ï¼Œæ˜¯ä¸€ç§ä¾¿æ·çš„è¾“å‡ºæ–¹å¼ã€‚

#### 5.9.1 å­—èŠ‚æ‰“å°æµï¼ˆPrintStreamï¼‰

**æ„é€ æ–¹æ³•**

- `PrintStream(OutputStream/File/String)`
  å…³è”å­—èŠ‚è¾“å‡ºæµ / æ–‡ä»¶ / æ–‡ä»¶è·¯å¾„
- `PrintStream(String fileName, Charset charset)`
  æŒ‡å®šå­—ç¬¦ç¼–ç 
- `PrintStream(OutputStream out, boolean autoFlush)`
  è‡ªåŠ¨åˆ·æ–°
- `PrintStream(OutputStream out, boolean autoFlush, String encoding)`
  æŒ‡å®šå­—ç¬¦ç¼–ç ä¸”è‡ªåŠ¨åˆ·æ–°

> **æ³¨æ„**ï¼šå­—èŠ‚æµåº•å±‚æ²¡æœ‰ç¼“å†²åŒºï¼Œå¼€ä¸å¼€è‡ªåŠ¨åˆ·æ–°éƒ½ä¸€æ ·ã€‚

**å¸¸ç”¨æ–¹æ³•**

- `write(int b)`
  å¸¸è§„æ–¹æ³•ï¼šå°†æŒ‡å®šçš„å­—èŠ‚å†™å‡º

- `println(Xxx xx)`
  ç‰¹æœ‰æ–¹æ³•ï¼šæ‰“å°ä»»æ„æ•°æ®ï¼Œè‡ªåŠ¨åˆ·æ–°ï¼Œè‡ªåŠ¨æ¢è¡Œ

- `print(Xxx xx)`
  ç‰¹æœ‰æ–¹æ³•ï¼šæ‰“å°ä»»æ„æ•°æ®ï¼Œä¸æ¢è¡Œ

- `printf(String format, Object... args)`
  ç‰¹æœ‰æ–¹æ³•ï¼šå¸¦æœ‰å ä½ç¬¦çš„æ‰“å°è¯­å¥ï¼Œä¸æ¢è¡Œ

  â€‹		

#### 5.9.2 å­—ç¬¦æ‰“å°æµï¼ˆPrintWriterï¼‰

**æ„é€ æ–¹æ³•**

- `PrintWriter(Writer/File/String)`
  å…³è”å­—ç¬¦è¾“å‡ºæµ / æ–‡ä»¶ / æ–‡ä»¶è·¯å¾„
- `PrintWriter(String fileName, Charset charset)`
  æŒ‡å®šå­—ç¬¦ç¼–ç 
- `PrintWriter(Writer w, boolean autoFlush)`
  è‡ªåŠ¨åˆ·æ–°
- `PrintWriter(OutputStream out, boolean autoFlush, Charset charset)`
  æŒ‡å®šå­—ç¬¦ç¼–ç ä¸”è‡ªåŠ¨åˆ·æ–°

> **æ³¨æ„**ï¼šå­—ç¬¦æµåº•å±‚æœ‰ç¼“å†²åŒºï¼Œæƒ³è¦è‡ªåŠ¨åˆ·æ–°éœ€è¦å¼€å¯ã€‚

**å¸¸ç”¨æ–¹æ³•**

- `write(...)`
  å¸¸è§„æ–¹æ³•ï¼šå†™å‡ºå­—ç¬¦æˆ–å­—ç¬¦ä¸²
- `println(Xxx xx)`
  **ç‰¹æœ‰æ–¹æ³•**ï¼šæ‰“å°ä»»æ„ç±»å‹çš„æ•°æ®å¹¶æ¢è¡Œ
- `print(Xxx xx)`
  **ç‰¹æœ‰æ–¹æ³•**ï¼šæ‰“å°ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œä¸æ¢è¡Œ
- `printf(String format, Object... args)`
  **ç‰¹æœ‰æ–¹æ³•**ï¼šå¸¦æœ‰å ä½ç¬¦çš„æ‰“å°è¯­å¥



```java
public class PrintStreamDemo4 {
    public static void main(String[] args) {
        // è·å–æ‰“å°æµå¯¹è±¡ï¼Œé»˜è®¤æŒ‡å‘æ§åˆ¶å°
        PrintStream ps = System.out;

        // å†™å‡ºæ•°æ®ï¼Œè‡ªåŠ¨æ¢è¡Œï¼Œè‡ªåŠ¨åˆ·æ–°
        ps.println("123");

        // ps.close(); // ä¸å»ºè®®å…³é—­ System.out

        ps.println("ä½ å¥½ä½ å¥½");

        System.out.println("456");
    }
}

```

â€‹		

#### 5.9.3 å ä½ç¬¦é€ŸæŸ¥è¡¨

ğŸ¨ Java `printf` å ä½ç¬¦é€ŸæŸ¥è¡¨

|  **ç±»å‹**  | **å ä½ç¬¦** |           **è¯´æ˜**            |  **ç¤ºä¾‹è¾“å‡º**  |
| :--------: | :--------: | :---------------------------: | :------------: |
|  **æ•´æ•°**  |    `%d`    |          åè¿›åˆ¶æ•´æ•°           |     `123`      |
|            |    `%o`    |          å…«è¿›åˆ¶æ•´æ•°           |      `10`      |
|            |    `%x`    |       åå…­è¿›åˆ¶ï¼ˆå°å†™ï¼‰        |      `ff`      |
|            |    `%X`    |       åå…­è¿›åˆ¶ï¼ˆå¤§å†™ï¼‰        |      `FF`      |
|  **æµ®ç‚¹**  |    `%f`    |  åè¿›åˆ¶æµ®ç‚¹ï¼ˆé»˜è®¤ 6 ä½å°æ•°ï¼‰  |   `3.141590`   |
|            |   `%.2f`   |         ä¿ç•™ 2 ä½å°æ•°         |     `3.14`     |
|            |    `%e`    |     ç§‘å­¦è®¡æ•°æ³•ï¼ˆå°å†™ eï¼‰      | `3.140000e+00` |
|            |    `%E`    |     ç§‘å­¦è®¡æ•°æ³•ï¼ˆå¤§å†™ Eï¼‰      | `3.140000E+00` |
|            |    `%g`    | è‡ªåŠ¨é€‰æ‹© `%f` æˆ– `%e`ï¼ˆå°å†™ï¼‰ |     `3.14`     |
|            |    `%G`    | è‡ªåŠ¨é€‰æ‹© `%f` æˆ– `%E`ï¼ˆå¤§å†™ï¼‰ |     `3.14`     |
|  **å­—ç¬¦**  |    `%c`    |           å•ä¸ªå­—ç¬¦            |      `A`       |
| **å­—ç¬¦ä¸²** |    `%s`    |            å­—ç¬¦ä¸²             |    `Hello`     |
|  **å…¶ä»–**  |    `%%`    |          è¾“å‡ºç™¾åˆ†å·           |      `%`       |
|            |    `%n`    |        æ¢è¡Œï¼ˆè·¨å¹³å°ï¼‰         |    æ¢è¡Œæ•ˆæœ    |

ğŸ›  å¸¸ç”¨æ ¼å¼ä¿®é¥°ç¬¦

| **ä¿®é¥°ç¬¦** |      **ä½œç”¨**      |         **ç¤ºä¾‹**         |  **è¾“å‡º**   |
| :--------: | :----------------: | :----------------------: | :---------: |
|   `%5d`    |  å®½åº¦ä¸º 5ï¼Œå³å¯¹é½  |   `printf("%5d", 12)`    |    `12`     |
|   `%-5d`   |  å®½åº¦ä¸º 5ï¼Œå·¦å¯¹é½  |   `printf("%-5d", 12)`   |    `12`     |
|   `%05d`   | å®½åº¦ä¸º 5ï¼Œå‰é¢è¡¥ 0 |   `printf("%05d", 12)`   |   `00012`   |
|   `%,d`    |     åƒä½åˆ†éš”ç¬¦     | `printf("%,d", 1234567)` | `1,234,567` |

â€‹		

### 5.10 å‹ç¼©å’Œè§£å‹ç¼©æµ

å‹ç¼©æµï¼š

â€‹	è´Ÿè´£å‹ç¼©æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹

è§£å‹ç¼©æµï¼š

â€‹	è´Ÿè´£æŠŠå‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹è§£å‹å‡ºæ¥

```java
/*
*   è§£å‹ç¼©æµ
*
* */
public class ZipStreamDemo1 {
    public static void main(String[] args) throws IOException {

        //1.åˆ›å»ºä¸€ä¸ªFileè¡¨ç¤ºè¦è§£å‹çš„å‹ç¼©åŒ…
        File src = new File("D:\\aaa.zip");
        //2.åˆ›å»ºä¸€ä¸ªFileè¡¨ç¤ºè§£å‹çš„ç›®çš„åœ°
        File dest = new File("D:\\");

        //è°ƒç”¨æ–¹æ³•
        unzip(src,dest);

    }

    //å®šä¹‰ä¸€ä¸ªæ–¹æ³•ç”¨æ¥è§£å‹
    public static void unzip(File src,File dest) throws IOException {
        //è§£å‹çš„æœ¬è´¨ï¼šæŠŠå‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹è¯»å–å‡ºæ¥ï¼ŒæŒ‰ç…§å±‚çº§æ‹·è´åˆ°ç›®çš„åœ°å½“ä¸­
        //åˆ›å»ºä¸€ä¸ªè§£å‹ç¼©æµç”¨æ¥è¯»å–å‹ç¼©åŒ…ä¸­çš„æ•°æ®
        ZipInputStream zip = new ZipInputStream(new FileInputStream(src));
        //è¦å…ˆè·å–åˆ°å‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªzipentryå¯¹è±¡
        //è¡¨ç¤ºå½“å‰åœ¨å‹ç¼©åŒ…ä¸­è·å–åˆ°çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹
        ZipEntry entry;
        while((entry = zip.getNextEntry()) != null){
            System.out.println(entry);
            if(entry.isDirectory()){
                //æ–‡ä»¶å¤¹ï¼šéœ€è¦åœ¨ç›®çš„åœ°destå¤„åˆ›å»ºä¸€ä¸ªåŒæ ·çš„æ–‡ä»¶å¤¹
                File file = new File(dest,entry.toString());
                file.mkdirs();
            }else{
                //æ–‡ä»¶ï¼šéœ€è¦è¯»å–åˆ°å‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶ï¼Œå¹¶æŠŠä»–å­˜æ”¾åˆ°ç›®çš„åœ°destæ–‡ä»¶å¤¹ä¸­ï¼ˆæŒ‰ç…§å±‚çº§ç›®å½•è¿›è¡Œå­˜æ”¾ï¼‰
                FileOutputStream fos = new FileOutputStream(new File(dest,entry.toString()));
                int b;
                while((b = zip.read()) != -1){
                    //å†™åˆ°ç›®çš„åœ°
                    fos.write(b);
                }
                fos.close();
                //è¡¨ç¤ºåœ¨å‹ç¼©åŒ…ä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤„ç†å®Œæ¯•äº†ã€‚
                zip.closeEntry();
            }
        }
        zip.close();
    }
}
```

```java
public class ZipStreamDemo3 {
    public static void main(String[] args) throws IOException {
        /*
         *   å‹ç¼©æµ
         *      éœ€æ±‚ï¼š
         *          æŠŠD:\\aaaæ–‡ä»¶å¤¹å‹ç¼©æˆä¸€ä¸ªå‹ç¼©åŒ…
         * */
        //1.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºè¦å‹ç¼©çš„æ–‡ä»¶å¤¹
        File src = new File("D:\\aaa");
        //2.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…æ”¾åœ¨å“ªé‡Œï¼ˆå‹ç¼©åŒ…çš„çˆ¶çº§è·¯å¾„ï¼‰
        File destParent = src.getParentFile();//D:\\
        //3.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…çš„è·¯å¾„
        File dest = new File(destParent,src.getName() + ".zip");
        //4.åˆ›å»ºå‹ç¼©æµå…³è”å‹ç¼©åŒ…
        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(dest));
        //5.è·å–srcé‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­
        toZip(src,zos,src.getName());//aaa
        //6.é‡Šæ”¾èµ„æº
        zos.close();
    }

    /*
    *   ä½œç”¨ï¼šè·å–srcé‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­
    *   å‚æ•°ä¸€ï¼šæ•°æ®æº
    *   å‚æ•°äºŒï¼šå‹ç¼©æµ
    *   å‚æ•°ä¸‰ï¼šå‹ç¼©åŒ…å†…éƒ¨çš„è·¯å¾„
    * */
    public static void toZip(File src,ZipOutputStream zos,String name) throws IOException {
        //1.è¿›å…¥srcæ–‡ä»¶å¤¹
        File[] files = src.listFiles();
        //2.éå†æ•°ç»„
        for (File file : files) {
            if(file.isFile()){
                //3.åˆ¤æ–­-æ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­
                ZipEntry entry = new ZipEntry(name + "\\" + file.getName());//aaa\\no1\\a.txt
                zos.putNextEntry(entry);
                //è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå†™åˆ°å‹ç¼©åŒ…
                FileInputStream fis = new FileInputStream(file);
                int b;
                while((b = fis.read()) != -1){
                    zos.write(b);
                }
                fis.close();
                zos.closeEntry();
            }else{
                //4.åˆ¤æ–­-æ–‡ä»¶å¤¹ï¼Œé€’å½’
                toZip(file,zos,name + "\\" + file.getName());
                //     no1            aaa   \\   no1
            }
        }
    }
}
```

`ZipEntry` å†³å®šäº†å‹ç¼©åŒ…å†…éƒ¨çš„è·¯å¾„

`zos.putNextEntry(entry)` å†³å®šå†™å…¥ç›®æ ‡ï¼šä¼šæŠŠæ¥ä¸‹æ¥å†™å…¥çš„æ‰€æœ‰æ•°æ®ï¼ˆ`zos.write(...)`ï¼‰éƒ½å†™åˆ°è¿™ä¸ª `ZipEntry` å¯¹åº”çš„æ–‡ä»¶é‡Œã€‚
ç›´åˆ°ä½ è°ƒç”¨ `zos.closeEntry()`ï¼Œæ‰ç®—ç»“æŸè¿™ä¸ªæ–‡ä»¶çš„å†™å…¥ã€‚

â€‹		

### 5.11 å¸¸ç”¨å·¥å…·åŒ… Commons-io

ä»‹ç»ï¼š

â€‹	Commonsæ˜¯apacheå¼€æºåŸºé‡‘ç»„ç»‡æä¾›çš„å·¥å…·åŒ…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¸®åŠ©æˆ‘ä»¬æé«˜å¼€å‘æ•ˆç‡çš„API

æ¯”å¦‚ï¼š

â€‹	StringUtilsÂ Â  å­—ç¬¦ä¸²å·¥å…·ç±»

â€‹	NumberUtilsÂ Â  æ•°å­—å·¥å…·ç±» 

â€‹	ArrayUtilsÂ Â  æ•°ç»„å·¥å…·ç±»  

â€‹	RandomUtilsÂ Â  éšæœºæ•°å·¥å…·ç±»

â€‹	DateUtilsÂ Â  æ—¥æœŸå·¥å…·ç±» 

â€‹	StopWatchÂ Â  ç§’è¡¨å·¥å…·ç±» 

â€‹	ClassUtilsÂ Â  åå°„å·¥å…·ç±»  

â€‹	SystemUtilsÂ Â  ç³»ç»Ÿå·¥å…·ç±»  

â€‹	MapUtilsÂ Â  é›†åˆå·¥å…·ç±»

â€‹	BeanutilsÂ Â  beanå·¥å…·ç±»

â€‹	Commons-io ioçš„å·¥å…·ç±»

â€‹	ç­‰ç­‰.....

å…¶ä¸­ï¼šCommons-ioæ˜¯apacheå¼€æºåŸºé‡‘ç»„ç»‡æä¾›çš„ä¸€ç»„æœ‰å…³IOæ“ä½œçš„å¼€æºå·¥å…·åŒ…ã€‚

ä½œç”¨ï¼šæé«˜IOæµçš„å¼€å‘æ•ˆç‡ã€‚

ä½¿ç”¨æ–¹å¼ï¼š

1ï¼Œæ–°å»ºlibæ–‡ä»¶å¤¹

2ï¼ŒæŠŠç¬¬ä¸‰æ–¹jaråŒ…ç²˜è´´åˆ°æ–‡ä»¶å¤¹ä¸­

3ï¼Œå³é”®ç‚¹å‡»add as a library

```java
        /*
          FileUtilsç±»
                static void copyFile(File srcFile, File destFile)                   å¤åˆ¶æ–‡ä»¶
                static void copyDirectory(File srcDir, File destDir)                å¤åˆ¶æ–‡ä»¶å¤¹
                static void copyDirectoryToDirectory(File srcDir, File destDir)     å¤åˆ¶æ–‡ä»¶å¤¹
                static void deleteDirectory(File directory)                         åˆ é™¤æ–‡ä»¶å¤¹
                static void cleanDirectory(File directory)                          æ¸…ç©ºæ–‡ä»¶å¤¹
                static String readFileToString(File file, Charset encoding)         è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®å˜æˆæˆå­—ç¬¦ä¸²
                static void write(File file, CharSequence data, String encoding)    å†™å‡ºæ•°æ®

            IOUtilsç±»
                public static int copy(InputStream input, OutputStream output)      å¤åˆ¶æ–‡ä»¶
                public static int copyLarge(Reader input, Writer output)            å¤åˆ¶å¤§æ–‡ä»¶
                public static String readLines(Reader input)                        è¯»å–æ•°æ®
                public static void write(String data, OutputStream output)          å†™å‡ºæ•°æ®
         */
```

â€‹	

### 5.12 å·¥å…·åŒ…ï¼ˆhutoolï¼‰

ä»‹ç»ï¼š

â€‹	Hutoolæ˜¯å›½äººå¼€å‘çš„å¼€æºå·¥å…·åŒ…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¸®åŠ©æˆ‘ä»¬æé«˜å¼€å‘æ•ˆç‡çš„API

â€‹	ç½‘å€ï¼šhutool.cn

æ¯”å¦‚ï¼š

â€‹	DateUtilÂ  æ—¥æœŸæ—¶é—´å·¥å…·ç±» 

â€‹	TimeIntervalÂ  è®¡æ—¶å™¨å·¥å…·ç±» 

â€‹	StrUtilÂ  å­—ç¬¦ä¸²å·¥å…·ç±»

â€‹	HexUtilÂ Â  16è¿›åˆ¶å·¥å…·ç±»

â€‹	HashUtilÂ Â  Hashç®—æ³•ç±»

â€‹	ObjectUtilÂ  å¯¹è±¡å·¥å…·ç±»

â€‹	ReflectUtilÂ Â  åå°„å·¥å…·ç±»

â€‹	TypeUtilÂ  æ³›å‹ç±»å‹å·¥å…·ç±»

â€‹	PageUtilÂ  åˆ†é¡µå·¥å…·ç±»

â€‹	NumberUtilÂ  æ•°å­—å·¥å…·ç±»

ä½¿ç”¨æ–¹å¼ï¼š

1ï¼Œæ–°å»ºlibæ–‡ä»¶å¤¹

2ï¼ŒæŠŠç¬¬ä¸‰æ–¹jaråŒ…ç²˜è´´åˆ°æ–‡ä»¶å¤¹ä¸­

3ï¼Œå³é”®ç‚¹å‡»add as a library

```java
    /*
        FileUtilç±»:
                fileï¼šæ ¹æ®å‚æ•°åˆ›å»ºä¸€ä¸ªfileå¯¹è±¡
                touchï¼šæ ¹æ®å‚æ•°åˆ›å»ºæ–‡ä»¶

                writeLinesï¼šæŠŠé›†åˆä¸­çš„æ•°æ®å†™å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œè¦†ç›–æ¨¡å¼ã€‚
                appendLinesï¼šæŠŠé›†åˆä¸­çš„æ•°æ®å†™å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œç»­å†™æ¨¡å¼ã€‚
                readLinesï¼šæŒ‡å®šå­—ç¬¦ç¼–ç ï¼ŒæŠŠæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¯»åˆ°é›†åˆä¸­ã€‚
                readUtf8Linesï¼šæŒ‰ç…§UTF-8çš„å½¢å¼ï¼ŒæŠŠæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œè¯»åˆ°é›†åˆä¸­

                copyï¼šæ‹·è´æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹
    */
```

â€‹	

## 6. å¤šçº¿ç¨‹

### 6.1 æ¦‚è¿°

æ˜¯æŒ‡ä»è½¯ä»¶æˆ–è€…ç¡¬ä»¶ä¸Šå®ç°å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æŠ€æœ¯ã€‚
å…·æœ‰å¤šçº¿ç¨‹èƒ½åŠ›çš„è®¡ç®—æœºå› æœ‰ç¡¬ä»¶æ”¯æŒè€Œèƒ½å¤Ÿåœ¨åŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæå‡æ€§èƒ½ã€‚

**å¹¶å‘å’Œå¹¶è¡Œã€ç†è§£ã€‘**

+ å¹¶è¡Œï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å¤šä¸ªCPUä¸ŠåŒæ—¶æ‰§è¡Œã€‚

- å¹¶å‘ï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å•ä¸ªCPUä¸Šäº¤æ›¿æ‰§è¡Œã€‚

**è¿›ç¨‹å’Œçº¿ç¨‹ã€ç†è§£ã€‘**

- è¿›ç¨‹ï¼šæ˜¯æ­£åœ¨è¿è¡Œçš„ç¨‹åº

  ç‹¬ç«‹æ€§ï¼šè¿›ç¨‹æ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç³»ç»Ÿåˆ†é…èµ„æºå’Œè°ƒåº¦çš„ç‹¬ç«‹å•ä½
  åŠ¨æ€æ€§ï¼šè¿›ç¨‹çš„å®è´¨æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿›ç¨‹æ˜¯åŠ¨æ€äº§ç”Ÿï¼ŒåŠ¨æ€æ¶ˆäº¡çš„
  å¹¶å‘æ€§ï¼šä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥åŒå…¶ä»–è¿›ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œ

- çº¿ç¨‹ï¼šæ˜¯è¿›ç¨‹ä¸­çš„å•ä¸ªé¡ºåºæ§åˆ¶æµï¼Œæ˜¯ä¸€æ¡æ‰§è¡Œè·¯å¾„

  â€‹	å•çº¿ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å¦‚æœåªæœ‰ä¸€æ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ç§°ä¸ºå•çº¿ç¨‹ç¨‹åº

  â€‹	å¤šçº¿ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å¦‚æœæœ‰å¤šæ¡æ‰§è¡Œè·¯å¾„ï¼Œåˆ™ç§°ä¸ºå¤šçº¿ç¨‹ç¨‹åº

  

### 6.2 å®ç°å¤šçº¿ç¨‹çš„æ–¹å¼

![image-20250817151501427](Java02-Javaè¿›é˜¶/image-20250817151501427.png)

#### 6.2.1 æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»

- æ–¹æ³•ä»‹ç»

  | æ–¹æ³•å       | è¯´æ˜                                        |
  | ------------ | ------------------------------------------- |
  | void run()   | åœ¨çº¿ç¨‹å¼€å¯åï¼Œæ­¤æ–¹æ³•å°†è¢«è°ƒç”¨æ‰§è¡Œ            |
  | void start() | ä½¿æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒJavaè™šæ‹Ÿæœºä¼šè°ƒç”¨runæ–¹æ³•() |

- å®ç°æ­¥éª¤

  - å®šä¹‰ä¸€ä¸ªç±»MyThreadç»§æ‰¿Threadç±»
  - åœ¨MyThreadç±»ä¸­é‡å†™run()æ–¹æ³•
  - åˆ›å»ºMyThreadç±»çš„å¯¹è±¡
  - å¯åŠ¨çº¿ç¨‹

- ä»£ç æ¼”ç¤º

  ```java
  public class MyThread extends Thread {
      @Override
      public void run() {
          for(int i=0; i<100; i++) {
              System.out.println(i);
          }
      }
  }
  public class MyThreadDemo {
      public static void main(String[] args) {
          MyThread my1 = new MyThread();
          MyThread my2 = new MyThread();
  
  //        my1.run();
  //        my2.run();
  
          //void start() å¯¼è‡´æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³•
          my1.start();
          my2.start();
      }
  }
  ```

- ä¸¤ä¸ªå°é—®é¢˜

  - ä¸ºä»€ä¹ˆè¦é‡å†™run()æ–¹æ³•ï¼Ÿ

    å› ä¸ºrun()æ˜¯ç”¨æ¥å°è£…è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç 

  - run()æ–¹æ³•å’Œstart()æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ

    run()ï¼šå°è£…çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œç›´æ¥è°ƒç”¨ï¼Œç›¸å½“äºæ™®é€šæ–¹æ³•çš„è°ƒç”¨

    start()ï¼šå¯åŠ¨çº¿ç¨‹ï¼›ç„¶åç”±JVMè°ƒç”¨æ­¤çº¿ç¨‹çš„run()æ–¹æ³•

    â€‹	

#### 6.2.2 å¼äºŒï¼šå®ç°Runnableæ¥å£

- Threadæ„é€ æ–¹æ³•

  | æ–¹æ³•å                               | è¯´æ˜                   |
  | ------------------------------------ | ---------------------- |
  | Thread(Runnable target)              | åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡ |
  | Thread(Runnable target, String name) | åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡ |

- å®ç°æ­¥éª¤

  - å®šä¹‰ä¸€ä¸ªç±»MyRunnableå®ç°Runnableæ¥å£
  - åœ¨MyRunnableç±»ä¸­é‡å†™run()æ–¹æ³•
  - åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡
  - åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
  - å¯åŠ¨çº¿ç¨‹

- ä»£ç æ¼”ç¤º

  ```java
  public class MyRunnable implements Runnable {
      @Override
      public void run() {
          for(int i=0; i<100; i++) {
              System.out.println(Thread.currentThread().getName()+":"+i);
          }
      }
  }
  public class MyRunnableDemo {
      public static void main(String[] args) {
          //åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡
          MyRunnable my = new MyRunnable();
  
          //åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
          //Thread(Runnable target)
  //        Thread t1 = new Thread(my);
  //        Thread t2 = new Thread(my);
          //Thread(Runnable target, String name)
          Thread t1 = new Thread(my,"å¦å…‹");
          Thread t2 = new Thread(my,"é£æœº");
  
          //å¯åŠ¨çº¿ç¨‹
          t1.start();
          t2.start();
      }
  }
  ```

  â€‹		

#### 6.2.3 æ–¹å¼ä¸‰: å®ç°Callableæ¥å£

+ æ–¹æ³•ä»‹ç»

  | æ–¹æ³•å                           | è¯´æ˜                                               |
  | -------------------------------- | -------------------------------------------------- |
  | V call()                         | è®¡ç®—ç»“æœï¼Œå¦‚æœæ— æ³•è®¡ç®—ç»“æœï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸         |
  | FutureTask(Callable<V> callable) | åˆ›å»ºä¸€ä¸ª FutureTaskï¼Œä¸€æ—¦è¿è¡Œå°±æ‰§è¡Œç»™å®šçš„ Callable |
  | V get()                          | å¦‚æœ‰å¿…è¦ï¼Œç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åè·å–å…¶ç»“æœ             |

+ å®ç°æ­¥éª¤

  + å®šä¹‰ä¸€ä¸ªç±»MyCallableå®ç°Callableæ¥å£
  + åœ¨MyCallableç±»ä¸­é‡å†™call()æ–¹æ³•
  + åˆ›å»ºMyCallableç±»çš„å¯¹è±¡
  + åˆ›å»ºFutureçš„å®ç°ç±»FutureTaskå¯¹è±¡ï¼ŒæŠŠMyCallableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
  + åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠFutureTaskå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
  + å¯åŠ¨çº¿ç¨‹
  + å†è°ƒç”¨getæ–¹æ³•ï¼Œå°±å¯ä»¥è·å–çº¿ç¨‹ç»“æŸä¹‹åçš„ç»“æœã€‚

+ ä»£ç æ¼”ç¤º

  ```java
  public class MyCallable implements Callable<String> {
      @Override
      public String call() throws Exception {
          for (int i = 0; i < 100; i++) {
              System.out.println("è·Ÿå¥³å­©è¡¨ç™½" + i);
          }
          //è¿”å›å€¼å°±è¡¨ç¤ºçº¿ç¨‹è¿è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ
          return "ç­”åº”";
      }
  }
  public class Demo {
      public static void main(String[] args) throws ExecutionException, InterruptedException {
          //çº¿ç¨‹å¼€å¯ä¹‹åéœ€è¦æ‰§è¡Œé‡Œé¢çš„callæ–¹æ³•
          MyCallable mc = new MyCallable();
  
          //Thread t1 = new Thread(mc);
  
          //å¯ä»¥è·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ.ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadå¯¹è±¡
          FutureTask<String> ft = new FutureTask<>(mc);
  
          //åˆ›å»ºçº¿ç¨‹å¯¹è±¡
          Thread t1 = new Thread(ft);
  
          String s = ft.get();
          //å¼€å¯çº¿ç¨‹
          t1.start();
  
          //String s = ft.get();
          System.out.println(s);
      }
  }
  ```

  â€‹			

### 6.3 å¸¸ç”¨æˆå‘˜æ–¹æ³•

| æ–¹æ³•åç§°                         | è¯´æ˜                                     |
| -------------------------------- | ---------------------------------------- |
| String getName()                 | è¿”å›æ­¤çº¿ç¨‹çš„åç§°                         |
| void setName(String name)        | è®¾ç½®çº¿ç¨‹çš„åå­—ï¼ˆæ„é€ æ–¹æ³•ä¹Ÿå¯ä»¥è®¾ç½®åå­—ï¼‰ |
| static Thread currentThread()    | è·å–å½“å‰çº¿ç¨‹çš„å¯¹è±¡                       |
| static void sleep(long time)     | è®©çº¿ç¨‹ä¼‘çœ æŒ‡å®šçš„æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’         |
| setPriority(int newPriority)     | è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§                         |
| final int getPriority()          | è·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§                         |
| final void setDaemon(boolean on) | è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹                           |
| public static void yield()       | å‡ºè®©çº¿ç¨‹/ç¤¼è®©çº¿ç¨‹                        |
| public static void join()        | æ’å…¥çº¿ç¨‹/æ’é˜Ÿçº¿ç¨‹                        |

**`String getName()` / `void setName(String name)`**

- ç»†èŠ‚
  1. å¦‚æœæ²¡æœ‰ç»™çº¿ç¨‹è®¾ç½®åç§°ï¼Œçº¿ç¨‹ä¼šæœ‰é»˜è®¤çš„åç§°ï¼Œæ ¼å¼ä¸ºï¼š`Thread-X`ï¼ˆX ä» 0 å¼€å§‹ï¼‰
  2. å¯ä»¥é€šè¿‡ `set` æ–¹æ³•è®¾ç½®åç§°ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸­è®¾ç½®

**`static Thread currentThread()`**

- ç»†èŠ‚
  - å½“ JVM å¯åŠ¨åï¼Œä¼šè‡ªåŠ¨å¯åŠ¨å¤šæ¡çº¿ç¨‹ï¼Œå…¶ä¸­æœ‰ä¸€æ¡å« **main çº¿ç¨‹**
  - main çº¿ç¨‹çš„ä½œç”¨æ˜¯è°ƒç”¨ `main` æ–¹æ³•å¹¶æ‰§è¡Œå…¶ä¸­çš„ä»£ç 
  - ä¹‹å‰å†™çš„æ‰€æœ‰ä»£ç ï¼Œå®é™…ä¸Šéƒ½æ˜¯è¿è¡Œåœ¨ main çº¿ç¨‹ä¸­

**`static void sleep(long time)`**

- ç»†èŠ‚
  1. å“ªæ¡çº¿ç¨‹æ‰§è¡Œåˆ°è¯¥æ–¹æ³•ï¼Œå“ªæ¡çº¿ç¨‹å°±ä¼šåœ¨è¿™é‡Œæš‚åœå¯¹åº”çš„æ—¶é—´
  2. å‚æ•°è¡¨ç¤ºä¼‘çœ çš„æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼ˆ1 ç§’ = 1000 æ¯«ç§’ï¼‰
  3. æ—¶é—´åˆ°è¾¾åï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨é†’æ¥å¹¶ç»§ç»­æ‰§è¡Œåç»­ä»£ç 

**`final void setDaemon(boolean on)`**

- ç»†èŠ‚

  - å½“å…¶ä»–éå®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šè‡ªåŠ¨ç»“æŸ

  - é€šä¿—ç†è§£ï¼šå½“â€œå¥³ç¥çº¿ç¨‹â€ç»“æŸäº†ï¼Œâ€œå¤‡èƒçº¿ç¨‹â€ä¹Ÿæ²¡æœ‰å­˜åœ¨çš„å¿…è¦äº†

    â€‹			

### 6.4 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€

![image-20250817153920464](Java02-Javaè¿›é˜¶/image-20250817153920464.png)

![image-20250817174841013](Java02-Javaè¿›é˜¶/image-20250817174841013.png)

å½“çº¿ç¨‹è¢«åˆ›å»ºå¹¶å¯åŠ¨ä»¥åï¼Œå®ƒæ—¢ä¸æ˜¯ä¸€å¯åŠ¨å°±è¿›å…¥äº†æ‰§è¡ŒçŠ¶æ€ï¼Œä¹Ÿä¸æ˜¯ä¸€ç›´å¤„äºæ‰§è¡ŒçŠ¶æ€ã€‚çº¿ç¨‹å¯¹è±¡åœ¨ä¸åŒçš„æ—¶æœŸæœ‰ä¸åŒçš„çŠ¶æ€ã€‚é‚£ä¹ˆJavaä¸­çš„çº¿ç¨‹å­˜åœ¨å“ªå‡ ç§çŠ¶æ€å‘¢ï¼ŸJavaä¸­çš„çº¿ç¨‹

çŠ¶æ€è¢«å®šä¹‰åœ¨äº†java.lang.Thread.Stateæšä¸¾ç±»ä¸­ï¼ŒStateæšä¸¾ç±»çš„æºç å¦‚ä¸‹ï¼š

```java
public class Thread {
    
    public enum State {
    
        /* æ–°å»º */
        NEW , 

        /* å¯è¿è¡ŒçŠ¶æ€ */
        RUNNABLE , 

        /* é˜»å¡çŠ¶æ€ */
        BLOCKED , 

        /* æ— é™ç­‰å¾…çŠ¶æ€ */
        WAITING , 

        /* è®¡æ—¶ç­‰å¾… */
        TIMED_WAITING , 

        /* ç»ˆæ­¢ */
        TERMINATED;
    
	}
    
    // è·å–å½“å‰çº¿ç¨‹çš„çŠ¶æ€
    public State getState() {
        return jdk.internal.misc.VM.toThreadState(threadStatus);
    }
    
}
```

é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Javaä¸­çš„çº¿ç¨‹å­˜åœ¨6ç§çŠ¶æ€ï¼Œæ¯ç§çº¿ç¨‹çŠ¶æ€çš„å«ä¹‰å¦‚ä¸‹

| çº¿ç¨‹çŠ¶æ€      | å…·ä½“å«ä¹‰                                                     |
| ------------- | ------------------------------------------------------------ |
| NEW           | ä¸€ä¸ªå°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºåˆå§‹çŠ¶æ€ã€å¼€å§‹çŠ¶æ€ã€‚çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨ã€‚è¿˜æ²¡è°ƒç”¨startæ–¹æ³•ã€‚MyThread t = new MyThread()åªæœ‰çº¿ç¨‹è±¡ï¼Œæ²¡æœ‰çº¿ç¨‹ç‰¹å¾ã€‚ |
| RUNNABLE      | å½“æˆ‘ä»¬è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹å¯¹è±¡è¿›å…¥äº†RUNNABLEçŠ¶æ€ã€‚é‚£ä¹ˆæ­¤æ—¶æ‰æ˜¯çœŸæ­£çš„åœ¨JVMè¿›ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€ç»å¯åŠ¨å¹¶ä¸æ˜¯ç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œçº¿ç¨‹çš„è¿è¡Œä¸å¦è¦å¬ä»¤ä¸CPUçš„è°ƒåº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ä¸ªä¸­é—´çŠ¶æ€ç§°ä¹‹ä¸ºå¯æ‰§è¡ŒçŠ¶æ€(RUNNABLE)ä¹Ÿå°±æ˜¯è¯´å®ƒå…·å¤‡æ‰§è¡Œçš„èµ„æ ¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œèµ·æ¥è€Œæ˜¯åœ¨ç­‰å¾…CPUçš„åº¦ã€‚ |
| BLOCKED       | å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå¯¹è±¡é”ï¼Œè€Œè¯¥å¯¹è±¡é”è¢«å…¶ä»–çš„çº¿ç¨‹æŒæœ‰ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€ï¼›å½“è¯¥çº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œè¯¥çº¿ç¨‹å°†å˜æˆRunnableçŠ¶æ€ã€‚ |
| WAITING       | ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹ç­‰å¾…çš„åŸå› æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨Object.wait()ã€join()æ–¹æ³•ã€‚å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼šå› ä¸ºwait()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨notify()æˆ–notifyAll()ï¼›ä¸€ä¸ªå› ä¸ºjoin()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸã€‚ |
| TIMED_WAITING | ä¸€ä¸ªåœ¨é™å®šæ—¶é—´å†…ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºé™æ—¶ç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹é™æ—¶ç­‰å¾…çŠ¶æ€çš„åŸå› æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šThread.sleep(long)ï¼ŒObject.wait(long)ã€join(long)ã€‚ |
| TERMINATED    | ä¸€ä¸ªå®Œå…¨è¿è¡Œå®Œæˆçš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç»ˆæ­¢çŠ¶æ€ã€ç»“æŸçŠ¶æ€     |

å„ä¸ªçŠ¶æ€çš„è½¬æ¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![1591163781941](Java02-Javaè¿›é˜¶/1591163781941.png)

â€‹					

### 6.5 çº¿ç¨‹å®‰å…¨é—®é¢˜

#### 6.5.1 åŒæ­¥ä»£ç å—

- **å®‰å…¨é—®é¢˜å‡ºç°çš„æ¡ä»¶**

  - æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒ

  - æœ‰å…±äº«æ•°æ®

  - æœ‰å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®

- **å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜å‘¢?**

  - åŸºæœ¬æ€æƒ³ï¼šè®©ç¨‹åºæ²¡æœ‰å®‰å…¨é—®é¢˜çš„ç¯å¢ƒ

- **æ€ä¹ˆå®ç°å‘¢?**

  - æŠŠå¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ç»™é”èµ·æ¥ï¼Œè®©ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå³å¯

  - Javaæä¾›äº†åŒæ­¥ä»£ç å—çš„æ–¹å¼æ¥è§£å†³

- **åŒæ­¥ä»£ç å—æ ¼å¼ï¼š**

  ```java
  synchronized(ä»»æ„å¯¹è±¡) { 
  	å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç  
  }
  ```

  synchronized(ä»»æ„å¯¹è±¡)ï¼šå°±ç›¸å½“äºç»™ä»£ç åŠ é”äº†ï¼Œä»»æ„å¯¹è±¡å°±å¯ä»¥çœ‹æˆæ˜¯ä¸€æŠŠé”

- åŒæ­¥çš„å¥½å¤„å’Œå¼Šç«¯  

  - å¥½å¤„ï¼šè§£å†³äº†å¤šçº¿ç¨‹çš„æ•°æ®å®‰å…¨é—®é¢˜

  - å¼Šç«¯ï¼šå½“çº¿ç¨‹å¾ˆå¤šæ—¶ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå»åˆ¤æ–­åŒæ­¥ä¸Šçš„é”ï¼Œè¿™æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œæ— å½¢ä¸­ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡

- ä»£ç æ¼”ç¤º

  ```java
  public class SellTicket implements Runnable {
      private int tickets = 100;
      private Object obj = new Object();
  
      @Override
      public void run() {
          while (true) {
              synchronized (obj) { // å¯¹å¯èƒ½æœ‰å®‰å…¨é—®é¢˜çš„ä»£ç åŠ é”,å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”
                  //t1è¿›æ¥åï¼Œå°±ä¼šæŠŠè¿™æ®µä»£ç ç»™é”èµ·æ¥
                  if (tickets > 0) {
                      try {
                          Thread.sleep(100);
                          //t1ä¼‘æ¯100æ¯«ç§’
                      } catch (InterruptedException e) {
                          e.printStackTrace();
                      }
                      //çª—å£1æ­£åœ¨å‡ºå”®ç¬¬100å¼ ç¥¨
                      System.out.println(Thread.currentThread().getName() + "æ­£åœ¨å‡ºå”®ç¬¬" + tickets + "å¼ ç¥¨");
                      tickets--; //tickets = 99;
                  }
              }
              //t1å‡ºæ¥äº†ï¼Œè¿™æ®µä»£ç çš„é”å°±è¢«é‡Šæ”¾äº†
          }
      }
  }
  
  ......
  ```


> å†™ä¸ªè¿™é‡Œä»£ç çš„å¥—è·¯ï¼š
>
> 1. å¾ªç¯
> 2. åŒæ­¥ä»£ç å—
> 3. åˆ¤æ–­å…±äº«æ•°æ®æ˜¯å¦åˆ°äº†æœ«å°¾ï¼ˆåˆ°äº†æœ«å°¾çš„ä»£ç ï¼‰
> 4. åˆ¤æ–­å…±äº«æ•°æ®æ˜¯å¦åˆ°äº†æœ«å°¾ï¼ˆæ²¡åˆ°æœ«å°¾çš„ä»£ç ï¼Œæ‰§è¡Œæ ¸å¿ƒé€»è¾‘ï¼‰

â€‹						

#### 6.5.2 åŒæ­¥æ–¹æ³•

- åŒæ­¥æ–¹æ³•çš„æ ¼å¼

  åŒæ­¥æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°æ–¹æ³•ä¸Š

  ```java
  ä¿®é¥°ç¬¦ synchronized è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) { 
  	æ–¹æ³•ä½“ï¼›
  }
  ```

  åŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?

  â€‹	this

- é™æ€åŒæ­¥æ–¹æ³•

  åŒæ­¥é™æ€æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°é™æ€æ–¹æ³•ä¸Š

  ```java
  ä¿®é¥°ç¬¦ static synchronized è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) { 
  	æ–¹æ³•ä½“ï¼›
  }
  ```

  åŒæ­¥é™æ€æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?

  â€‹	ç±»å.class

  â€‹				

#### 6.5.3 Locké”

è™½ç„¶æˆ‘ä»¬å¯ä»¥ç†è§£åŒæ­¥ä»£ç å—å’ŒåŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥çœ‹åˆ°åœ¨å“ªé‡ŒåŠ ä¸Šäº†é”ï¼Œåœ¨å“ªé‡Œé‡Šæ”¾äº†é”ï¼Œä¸ºäº†æ›´æ¸…æ™°çš„è¡¨è¾¾å¦‚ä½•åŠ é”å’Œé‡Šæ”¾é”ï¼ŒJDK5ä»¥åæä¾›äº†ä¸€ä¸ªæ–°çš„é”å¯¹è±¡Lock

Lockæ˜¯æ¥å£ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œè¿™é‡Œé‡‡ç”¨å®ƒçš„å®ç°ç±»ReentrantLockæ¥å®ä¾‹åŒ–

- ReentrantLockæ„é€ æ–¹æ³•

  | æ–¹æ³•å          | è¯´æ˜                        |
  | --------------- | --------------------------- |
  | ReentrantLock() | åˆ›å»ºä¸€ä¸ªReentrantLockçš„å®ä¾‹ |

- åŠ é”è§£é”æ–¹æ³•

  | æ–¹æ³•å        | è¯´æ˜   |
  | ------------- | ------ |
  | void lock()   | è·å¾—é” |
  | void unlock() | é‡Šæ”¾é” |

- ä»£ç æ¼”ç¤º

  ```java
  public class Ticket implements Runnable {
      //ç¥¨çš„æ•°é‡
      private int ticket = 100;
      private Object obj = new Object();
      private ReentrantLock lock = new ReentrantLock();

      @Override
      public void run() {
          while (true) {
              //synchronized (obj){//å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”.
              try {
                  lock.lock();
                  if (ticket <= 0) {
                      //å–å®Œäº†
                      break;
                  } else {
                      Thread.sleep(100);
                      ticket--;
                      System.out.println(Thread.currentThread().getName() + "åœ¨å–ç¥¨,è¿˜å‰©ä¸‹" + ticket + "å¼ ç¥¨");
                  }
              } catch (InterruptedException e) {
                  e.printStackTrace();
              } finally {
                  lock.unlock();
              }
              // }
          }
      }
  }

  ......
  ```
  

â€‹			

### 6.6  ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼

#### 6.6.1 æ¦‚è¿°

![image-20250817163927459](Java02-Javaè¿›é˜¶/image-20250817163927459.png)

- æ¦‚è¿°

  ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼æ˜¯ä¸€ä¸ªååˆ†ç»å…¸çš„å¤šçº¿ç¨‹åä½œçš„æ¨¡å¼ï¼Œå¼„æ‡‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜èƒ½å¤Ÿè®©æˆ‘ä»¬å¯¹å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç†è§£æ›´åŠ æ·±åˆ»ã€‚

  æ‰€è°“ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œå®é™…ä¸Šä¸»è¦æ˜¯åŒ…å«äº†ä¸¤ç±»çº¿ç¨‹ï¼š

  â€‹	ä¸€ç±»æ˜¯ç”Ÿäº§è€…çº¿ç¨‹ç”¨äºç”Ÿäº§æ•°æ®

  â€‹	ä¸€ç±»æ˜¯æ¶ˆè´¹è€…çº¿ç¨‹ç”¨äºæ¶ˆè´¹æ•°æ®

  ä¸ºäº†è§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…³ç³»ï¼Œé€šå¸¸ä¼šé‡‡ç”¨å…±äº«çš„æ•°æ®åŒºåŸŸï¼Œå°±åƒæ˜¯ä¸€ä¸ªä»“åº“

  ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ä¹‹åç›´æ¥æ”¾ç½®åœ¨å…±äº«æ•°æ®åŒºä¸­ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒæ¶ˆè´¹è€…çš„è¡Œä¸º

  æ¶ˆè´¹è€…åªéœ€è¦ä»å…±äº«æ•°æ®åŒºä¸­å»è·å–æ•°æ®ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒç”Ÿäº§è€…çš„è¡Œä¸º

- Objectç±»çš„ç­‰å¾…å’Œå”¤é†’æ–¹æ³•

  | æ–¹æ³•å           | è¯´æ˜                                                         |
  | ---------------- | ------------------------------------------------------------ |
  | void wait()      | å¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„ notify()æ–¹æ³•æˆ– notifyAll()æ–¹æ³• |
  | void notify()    | å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„å•ä¸ªçº¿ç¨‹                             |
  | void notifyAll() | å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„æ‰€æœ‰çº¿ç¨‹                             |

  â€‹			

#### 6.6.2 ç­‰å¾…å”¤é†’æœºåˆ¶æ¡ˆä¾‹

+ éœ€æ±‚

  + å°†Deskç±»ä¸­çš„å˜é‡,é‡‡ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…èµ·æ¥
  + ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç±»ä¸­æ„é€ æ–¹æ³•æ¥æ”¶Deskç±»å¯¹è±¡,ä¹‹ååœ¨runæ–¹æ³•ä¸­è¿›è¡Œä½¿ç”¨
  + åˆ›å»ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ å…¥Deskç±»å¯¹è±¡
  + å¼€å¯ä¸¤ä¸ªçº¿ç¨‹

+ ä»£ç å®ç°

  ```java
  public class Desk {
  
      //å®šä¹‰ä¸€ä¸ªæ ‡è®°
      //true å°±è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸åƒè´§æ‰§è¡Œ
      //false å°±è¡¨ç¤ºæ¡Œå­ä¸Šæ²¡æœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸å¨å¸ˆæ‰§è¡Œ
      //public static boolean flag = false;
      private boolean flag;
  
      //æ±‰å ¡åŒ…çš„æ€»æ•°é‡
      //public static int count = 10;
      //ä»¥åæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ç§å¿…é¡»æœ‰é»˜è®¤å€¼çš„å˜é‡
     // private int count = 10;
      private int count;
  
      //é”å¯¹è±¡
      //public static final Object lock = new Object();
      private final Object lock = new Object();
  
      public Desk() {
          this(false,10); // åœ¨ç©ºå‚å†…éƒ¨è°ƒç”¨å¸¦å‚,å¯¹æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼,ä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨æˆå‘˜å˜é‡äº†
      }
  
      public Desk(boolean flag, int count) {
          this.flag = flag;
          this.count = count;
      }
  
      public boolean isFlag() {
          return flag;
      }
  
      public void setFlag(boolean flag) {
          this.flag = flag;
      }
  
      public int getCount() {
          return count;
      }
  
      public void setCount(int count) {
          this.count = count;
      }
  
      public Object getLock() {
          return lock;
      }
  
      @Override
      public String toString() {
          return "Desk{" +
                  "flag=" + flag +
                  ", count=" + count +
                  ", lock=" + lock +
                  '}';
      }
  }
  
  public class Cooker extends Thread {
  
      private Desk desk;
  
      public Cooker(Desk desk) {
          this.desk = desk;
      }
  //    ç”Ÿäº§è€…æ­¥éª¤ï¼š
  //            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…
  //    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚
  //            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚
  //            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚
  
      @Override
      public void run() {
          while(true){
              synchronized (desk.getLock()){
                  if(desk.getCount() == 0){
                      break;
                  }else{
                      //System.out.println("éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†");
                      if(!desk.isFlag()){
                          //ç”Ÿäº§
                          System.out.println("å¨å¸ˆæ­£åœ¨ç”Ÿäº§æ±‰å ¡åŒ…");
                          desk.setFlag(true);
                          desk.getLock().notifyAll();
                      }else{
                          try {
                              desk.getLock().wait();
                          } catch (InterruptedException e) {
                              e.printStackTrace();
                          }
                      }
                  }
              }
          }
      }
  }
  
  public class Foodie extends Thread {
      private Desk desk;
  
      public Foodie(Desk desk) {
          this.desk = desk;
      }
  
      @Override
      public void run() {
  //        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚
  //        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚
  //        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ
  //        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†
  //                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§
  //        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€
  
          //å¥—è·¯:
              //1. while(true)æ­»å¾ªç¯
              //2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€
              //3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ
              //4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ
          while(true){
              synchronized (desk.getLock()){
                  if(desk.getCount() == 0){
                      break;
                  }else{
                      //System.out.println("éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†");
                      if(desk.isFlag()){
                          //æœ‰
                          System.out.println("åƒè´§åœ¨åƒæ±‰å ¡åŒ…");
                          desk.setFlag(false);
                          desk.getLock().notifyAll();
                          desk.setCount(desk.getCount() - 1);
                      }else{
                          //æ²¡æœ‰å°±ç­‰å¾…
                          //ä½¿ç”¨ä»€ä¹ˆå¯¹è±¡å½“åšé”,é‚£ä¹ˆå°±å¿…é¡»ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•.
                          try {
                              desk.getLock().wait();
                          } catch (InterruptedException e) {
                              e.printStackTrace();
                          }
                      }
                  }
              }
          }
  
      }
  }
  
  public class Demo {
      public static void main(String[] args) {
          /*æ¶ˆè´¹è€…æ­¥éª¤ï¼š
          1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚
          2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚
          3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ
          4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†
                  å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§
          æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€*/
  
          /*ç”Ÿäº§è€…æ­¥éª¤ï¼š
          1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…
          å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚
          2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚
          3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚*/
  
          Desk desk = new Desk();
  
          Foodie f = new Foodie(desk);
          Cooker c = new Cooker(desk);
  
          f.start();
          c.start();
  
      }
  }
  ```

  â€‹				

#### 6.6.3 é˜»å¡é˜Ÿåˆ—å®ç°

+ é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„

  ![06_é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„](Java02-Javaè¿›é˜¶/06_é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„.png)


+ å¸¸è§BlockingQueue:

  ArrayBlockingQueue: åº•å±‚æ˜¯æ•°ç»„,æœ‰ç•Œ

  LinkedBlockingQueue: åº•å±‚æ˜¯é“¾è¡¨,æ— ç•Œ.ä½†ä¸æ˜¯çœŸæ­£çš„æ— ç•Œ,æœ€å¤§ä¸ºintçš„æœ€å¤§å€¼

+ BlockingQueueçš„æ ¸å¿ƒæ–¹æ³•:

  put(anObject): å°†å‚æ•°æ”¾å…¥é˜Ÿåˆ—,å¦‚æœæ”¾ä¸è¿›å»ä¼šé˜»å¡

  take(): å–å‡ºç¬¬ä¸€ä¸ªæ•°æ®,å–ä¸åˆ°ä¼šé˜»å¡

+ ä»£ç ç¤ºä¾‹

  ```java
  public class Demo02 {
      public static void main(String[] args) throws Exception {
          // åˆ›å»ºé˜»å¡é˜Ÿåˆ—çš„å¯¹è±¡,å®¹é‡ä¸º 1
          ArrayBlockingQueue<String> arrayBlockingQueue = new ArrayBlockingQueue<>(1);
  
          // å­˜å‚¨å…ƒç´ 
          arrayBlockingQueue.put("æ±‰å ¡åŒ…");
  
          // å–å…ƒç´ 
          System.out.println(arrayBlockingQueue.take());
          System.out.println(arrayBlockingQueue.take()); // å–ä¸åˆ°ä¼šé˜»å¡
  
          System.out.println("ç¨‹åºç»“æŸäº†");
      }
  }
  ```

+ ä»£ç å®ç°

  ```java
  public class Cooker extends Thread {
  
      private ArrayBlockingQueue<String> bd;
  
      public Cooker(ArrayBlockingQueue<String> bd) {
          this.bd = bd;
      }
  //    ç”Ÿäº§è€…æ­¥éª¤ï¼š
  //            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…
  //    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚
  //            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚
  //            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚
  
      @Override
      public void run() {
          while (true) {
              try {
                  bd.put("æ±‰å ¡åŒ…");
                  System.out.println("å¨å¸ˆæ”¾å…¥ä¸€ä¸ªæ±‰å ¡åŒ…");
              } catch (InterruptedException e) {
                  e.printStackTrace();
              }
          }
      }
  }
  
  public class Foodie extends Thread {
      private ArrayBlockingQueue<String> bd;
  
      public Foodie(ArrayBlockingQueue<String> bd) {
          this.bd = bd;
      }
  
      @Override
      public void run() {
  //        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚
  //        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚
  //        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ
  //        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†
  //                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§
  //        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€
  
          //å¥—è·¯:
          //1. while(true)æ­»å¾ªç¯
          //2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€
          //3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ
          //4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ
          while (true) {
              try {
                  String take = bd.take();
                  System.out.println("åƒè´§å°†" + take + "æ‹¿å‡ºæ¥åƒäº†");
              } catch (InterruptedException e) {
                  e.printStackTrace();
              }
          }
  
      }
  }
  
  public class Demo {
      public static void main(String[] args) {
          ArrayBlockingQueue<String> bd = new ArrayBlockingQueue<>(1);
  
          Foodie f = new Foodie(bd);
          Cooker c = new Cooker(bd);
  
          f.start();
          c.start();
      }
  }
  ```

  â€‹					

### 6.7 çº¿ç¨‹æ± 

#### 6.7.1 åŸºæœ¬åŸç†

å½“çº¿ç¨‹è¢«åˆ›å»ºå¹¶å¯åŠ¨ä»¥åï¼Œå®ƒæ—¢ä¸æ˜¯ä¸€å¯åŠ¨å°±è¿›å…¥äº†æ‰§è¡ŒçŠ¶æ€ï¼Œä¹Ÿä¸æ˜¯ä¸€ç›´å¤„äºæ‰§è¡ŒçŠ¶æ€ã€‚çº¿ç¨‹å¯¹è±¡åœ¨ä¸åŒçš„æ—¶æœŸæœ‰ä¸åŒçš„çŠ¶æ€ã€‚é‚£ä¹ˆJavaä¸­çš„çº¿ç¨‹å­˜åœ¨å“ªå‡ ç§çŠ¶æ€å‘¢ï¼ŸJavaä¸­çš„çº¿ç¨‹

çŠ¶æ€è¢«å®šä¹‰åœ¨äº†java.lang.Thread.Stateæšä¸¾ç±»ä¸­ï¼ŒStateæšä¸¾ç±»çš„æºç å¦‚ä¸‹ï¼š

```java
public class Thread {
    
    public enum State {
    
        /* æ–°å»º */
        NEW , 

        /* å¯è¿è¡ŒçŠ¶æ€ */
        RUNNABLE , 

        /* é˜»å¡çŠ¶æ€ */
        BLOCKED , 

        /* æ— é™ç­‰å¾…çŠ¶æ€ */
        WAITING , 

        /* è®¡æ—¶ç­‰å¾… */
        TIMED_WAITING , 

        /* ç»ˆæ­¢ */
        TERMINATED;
    
	}
    
    // è·å–å½“å‰çº¿ç¨‹çš„çŠ¶æ€
    public State getState() {
        return jdk.internal.misc.VM.toThreadState(threadStatus);
    }
    
}
```

é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Javaä¸­çš„çº¿ç¨‹å­˜åœ¨6ç§çŠ¶æ€ï¼Œæ¯ç§çº¿ç¨‹çŠ¶æ€çš„å«ä¹‰å¦‚ä¸‹

| çº¿ç¨‹çŠ¶æ€      | å…·ä½“å«ä¹‰                                                     |
| ------------- | ------------------------------------------------------------ |
| NEW           | ä¸€ä¸ªå°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºåˆå§‹çŠ¶æ€ã€å¼€å§‹çŠ¶æ€ã€‚çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨ã€‚è¿˜æ²¡è°ƒç”¨startæ–¹æ³•ã€‚MyThread t = new MyThread()åªæœ‰çº¿ç¨‹è±¡ï¼Œæ²¡æœ‰çº¿ç¨‹ç‰¹å¾ã€‚ |
| RUNNABLE      | å½“æˆ‘ä»¬è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹å¯¹è±¡è¿›å…¥äº†RUNNABLEçŠ¶æ€ã€‚é‚£ä¹ˆæ­¤æ—¶æ‰æ˜¯çœŸæ­£çš„åœ¨JVMè¿›ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€ç»å¯åŠ¨å¹¶ä¸æ˜¯ç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œçº¿ç¨‹çš„è¿è¡Œä¸å¦è¦å¬ä»¤ä¸CPUçš„è°ƒåº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ä¸ªä¸­é—´çŠ¶æ€ç§°ä¹‹ä¸ºå¯æ‰§è¡ŒçŠ¶æ€(RUNNABLE)ä¹Ÿå°±æ˜¯è¯´å®ƒå…·å¤‡æ‰§è¡Œçš„èµ„æ ¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œèµ·æ¥è€Œæ˜¯åœ¨ç­‰å¾…CPUçš„åº¦ã€‚ |
| BLOCKED       | å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå¯¹è±¡é”ï¼Œè€Œè¯¥å¯¹è±¡é”è¢«å…¶ä»–çš„çº¿ç¨‹æŒæœ‰ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€ï¼›å½“è¯¥çº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œè¯¥çº¿ç¨‹å°†å˜æˆRunnableçŠ¶æ€ã€‚ |
| WAITING       | ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹ç­‰å¾…çš„åŸå› æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨Object.wait()ã€join()æ–¹æ³•ã€‚å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼šå› ä¸ºwait()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨notify()æˆ–notifyAll()ï¼›ä¸€ä¸ªå› ä¸ºjoin()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸã€‚ |
| TIMED_WAITING | ä¸€ä¸ªåœ¨é™å®šæ—¶é—´å†…ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºé™æ—¶ç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹é™æ—¶ç­‰å¾…çŠ¶æ€çš„åŸå› æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šThread.sleep(long)ï¼ŒObject.wait(long)ã€join(long)ã€‚ |
| TERMINATED    | ä¸€ä¸ªå®Œå…¨è¿è¡Œå®Œæˆçš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç»ˆæ­¢çŠ¶æ€ã€ç»“æŸçŠ¶æ€     |

å„ä¸ªçŠ¶æ€çš„è½¬æ¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![1591163781941](Java02-Javaè¿›é˜¶/1591163781941.png)

**æ¦‚è¿° :** 

â€‹	æåˆ°æ± ï¼Œå¤§å®¶åº”è¯¥èƒ½æƒ³åˆ°çš„å°±æ˜¯æ°´æ± ã€‚æ°´æ± å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œåœ¨è¯¥å®¹å™¨ä¸­å­˜å‚¨äº†å¾ˆå¤šçš„æ°´ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯çº¿ç¨‹æ± å‘¢ï¼Ÿçº¿ç¨‹æ± ä¹Ÿæ˜¯å¯ä»¥çœ‹åšæˆä¸€ä¸ªæ± å­ï¼Œåœ¨è¯¥æ± å­ä¸­å­˜å‚¨å¾ˆå¤šä¸ªçº¿ç¨‹ã€‚

çº¿ç¨‹æ± å­˜åœ¨çš„æ„ä¹‰ï¼š

â€‹	ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå½“ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¤§é‡ç”Ÿå­˜æœŸå¾ˆçŸ­æš‚çš„çº¿ç¨‹æ—¶ï¼Œé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹ç³»ç»Ÿçš„èµ„æºæ¶ˆè€—æœ‰å¯èƒ½å¤§äºä¸šåŠ¡å¤„ç†æ˜¯å¯¹ç³»

â€‹	ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œè¿™æ ·å°±æœ‰ç‚¹"èˆæœ¬é€æœ«"äº†ã€‚é’ˆå¯¹è¿™ä¸€ç§æƒ…å†µï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨çº¿ç¨‹æ± ã€‚çº¿ç¨‹æ± åœ¨å¯åŠ¨çš„æ—¶ï¼Œä¼šåˆ›å»ºå¤§é‡ç©ºé—²çº¿ç¨‹ï¼Œå½“æˆ‘ä»¬å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡çš„æ—¶ï¼Œçº¿ç¨‹æ± å°±

â€‹	ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œçº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›åˆ°çº¿ç¨‹æ± ä¸­ç§°ä¸ºç©ºé—²çŠ¶æ€ã€‚ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„æ‰§è¡Œã€‚

**çº¿ç¨‹æ± çš„è®¾è®¡æ€è·¯ :**

1. å‡†å¤‡ä¸€ä¸ªä»»åŠ¡å®¹å™¨

2. ä¸€æ¬¡æ€§å¯åŠ¨å¤šä¸ª(2ä¸ª)æ¶ˆè´¹è€…çº¿ç¨‹

3. åˆšå¼€å§‹ä»»åŠ¡å®¹å™¨æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥çº¿ç¨‹éƒ½åœ¨wait

4. ç›´åˆ°ä¸€ä¸ªå¤–éƒ¨çº¿ç¨‹å‘è¿™ä¸ªä»»åŠ¡å®¹å™¨ä¸­æ‰”äº†ä¸€ä¸ª"ä»»åŠ¡"ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’

5. è¿™ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹å–å‡º"ä»»åŠ¡"ï¼Œå¹¶ä¸”æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œç»§ç»­ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„åˆ°æ¥

   â€‹					

#### 6.7.2 ä¸¤ç§çº¿ç¨‹æ± 

æ¦‚è¿° : JDKå¯¹çº¿ç¨‹æ± ä¹Ÿè¿›è¡Œäº†ç›¸å…³çš„å®ç°ï¼Œåœ¨çœŸå®ä¼ä¸šå¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå¾ˆå°‘å»è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œè€Œæ˜¯ä½¿ç”¨JDKä¸­è‡ªå¸¦çš„çº¿ç¨‹æ± ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Executorsä¸­æ‰€æä¾›çš„**é™æ€**æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± 

â€‹	`static ExecutorService newCachedThreadPool()`   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± 
â€‹	`static newFixedThreadPool(int nThreads)`	    åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± 

**ä»£ç å®ç° :** 

```java
public class MyThreadPoolDemo {
    public static void main(String[] args) throws InterruptedException {

        //1,åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± å¯¹è±¡.æ± å­ä¸­é»˜è®¤æ˜¯ç©ºçš„.é»˜è®¤æœ€å¤šå¯ä»¥å®¹çº³intç±»å‹çš„æœ€å¤§å€¼.
        ExecutorService executorService = Executors.newCachedThreadPool();
        //Executors --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡
        //ExecutorService --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ§åˆ¶çº¿ç¨‹æ± 
		
        //æäº¤ä»»åŠ¡
        executorService.submit(()->{
            System.out.println(Thread.currentThread().getName() + "åœ¨æ‰§è¡Œäº†");
        });

        //Thread.sleep(2000);

        executorService.submit(()->{
            System.out.println(Thread.currentThread().getName() + "åœ¨æ‰§è¡Œäº†");
        });
		
        //å…³é—­çº¿ç¨‹æ± 
        executorService.shutdown();
    }
}
```

â€‹			

#### 6.7.3 è‡ªå®šä¹‰çº¿ç¨‹æ± 

**åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡ :** 

`ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(æ ¸å¿ƒçº¿ç¨‹æ•°é‡,æœ€å¤§çº¿ç¨‹æ•°é‡,ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä»»åŠ¡é˜Ÿåˆ—,åˆ›å»ºçº¿ç¨‹å·¥å‚,ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥);`

**ä»£ç å®ç° :** 

```java
public class MyThreadPoolDemo3 {
//    å‚æ•°ä¸€ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡
//    å‚æ•°äºŒï¼šæœ€å¤§çº¿ç¨‹æ•°
//    å‚æ•°ä¸‰ï¼šç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´
//    å‚æ•°å››ï¼šæ—¶é—´å•ä½
//    å‚æ•°äº”ï¼šä»»åŠ¡é˜Ÿåˆ—
//    å‚æ•°å…­ï¼šåˆ›å»ºçº¿ç¨‹å·¥å‚
//    å‚æ•°ä¸ƒï¼šä»»åŠ¡çš„æ‹’ç»ç­–ç•¥
    public static void main(String[] args) {
        ThreadPoolExecutor pool = new ThreadPoolExecutor(
            2,
            5,
            2,
            TimeUnit.SECONDS,
            new ArrayBlockingQueue<>(10), 
            Executors.defaultThreadFactory(),
            new ThreadPoolExecutor.AbortPolicy()
        );
        pool.submit(new MyRunnable());
        pool.submit(new MyRunnable());

        pool.shutdown();
    }
}
```

**å‚æ•°è¯¦è§£**

![1591165506516](Java02-Javaè¿›é˜¶/1591165506516.png)

```java
public ThreadPoolExecutor(int corePoolSize,
                              int maximumPoolSize,
                              long keepAliveTime,
                              TimeUnit unit,
                              BlockingQueue<Runnable> workQueue,
                              ThreadFactory threadFactory,
                              RejectedExecutionHandler handler)
    
corePoolSizeï¼š   æ ¸å¿ƒçº¿ç¨‹çš„æœ€å¤§å€¼ï¼Œä¸èƒ½å°äº0
maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸èƒ½å°äºç­‰äº0ï¼ŒmaximumPoolSize >= corePoolSize
keepAliveTimeï¼š  ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä¸èƒ½å°äº0
unitï¼š           æ—¶é—´å•ä½
workQueueï¼š      ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸èƒ½ä¸ºnull
threadFactoryï¼š  åˆ›å»ºçº¿ç¨‹å·¥å‚,ä¸èƒ½ä¸ºnull      
handlerï¼š        ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥,ä¸èƒ½ä¸ºnull  
```

â€‹			

#### 6.7.4 éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥

RejectedExecutionHandleræ˜¯jdkæä¾›çš„ä¸€ä¸ªä»»åŠ¡æ‹’ç»ç­–ç•¥æ¥å£ï¼Œå®ƒä¸‹é¢å­˜åœ¨4ä¸ªå­ç±»ã€‚

```java
ThreadPoolExecutor.AbortPolicy: 		    ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚æ˜¯é»˜è®¤çš„ç­–ç•¥ã€‚
ThreadPoolExecutor.DiscardPolicyï¼š 		   ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ è¿™æ˜¯ä¸æ¨èçš„åšæ³•ã€‚
ThreadPoolExecutor.DiscardOldestPolicyï¼š    æŠ›å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ ç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚
ThreadPoolExecutor.CallerRunsPolicy:        è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚
```

æ³¨ï¼šæ˜ç¡®çº¿ç¨‹æ± å¯¹å¤šå¯æ‰§è¡Œçš„ä»»åŠ¡æ•° = é˜Ÿåˆ—å®¹é‡ + æœ€å¤§çº¿ç¨‹æ•°

â€‹	

#### 6.7.5 çº¿ç¨‹æ± å¤šå¤§åˆé€‚

![image-20250817205926271](Java02-Javaè¿›é˜¶/image-20250817205926271.png)

â€‹		

## 7. ç½‘ç»œç¼–ç¨‹

### 7.1 æ¦‚è¿°

- è®¡ç®—æœºç½‘ç»œ

  æ˜¯æŒ‡å°†åœ°ç†ä½ç½®ä¸åŒçš„å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„å¤šå°è®¡ç®—æœºåŠå…¶å¤–éƒ¨è®¾å¤‡ï¼Œé€šè¿‡é€šä¿¡çº¿è·¯è¿æ¥èµ·æ¥ï¼Œåœ¨ç½‘ç»œæ“ä½œç³»ç»Ÿï¼Œç½‘ç»œç®¡ç†è½¯ä»¶åŠç½‘ç»œé€šä¿¡åè®®çš„ç®¡ç†å’Œåè°ƒä¸‹ï¼Œå®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’çš„è®¡ç®—æœºç³»ç»Ÿ

- ç½‘ç»œç¼–ç¨‹

  åœ¨ç½‘ç»œé€šä¿¡åè®®ä¸‹ï¼Œä¸åŒè®¡ç®—æœºä¸Šè¿è¡Œçš„ç¨‹åºï¼Œå¯ä»¥è¿›è¡Œæ•°æ®ä¼ è¾“

#### 7.1.1 ä¸‰è¦ç´ 

- IPåœ°å€

  è¦æƒ³è®©ç½‘ç»œä¸­çš„è®¡ç®—æœºèƒ½å¤Ÿäº’ç›¸é€šä¿¡ï¼Œå¿…é¡»ä¸ºæ¯å°è®¡ç®—æœºæŒ‡å®šä¸€ä¸ªæ ‡è¯†å·ï¼Œé€šè¿‡è¿™ä¸ªæ ‡è¯†å·æ¥æŒ‡å®šè¦æ¥æ”¶æ•°æ®çš„è®¡ç®—æœºå’Œè¯†åˆ«å‘é€çš„è®¡ç®—æœºï¼Œè€ŒIPåœ°å€å°±æ˜¯è¿™ä¸ªæ ‡è¯†å·ã€‚ä¹Ÿå°±æ˜¯è®¾å¤‡çš„æ ‡è¯†

- ç«¯å£

  ç½‘ç»œçš„é€šä¿¡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ªåº”ç”¨ç¨‹åºçš„é€šä¿¡ã€‚æ¯å°è®¡ç®—æœºéƒ½æœ‰å¾ˆå¤šçš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œé€šä¿¡æ—¶ï¼Œå¦‚ä½•åŒºåˆ†è¿™äº›åº”ç”¨ç¨‹åºå‘¢ï¼Ÿå¦‚æœè¯´IPåœ°å€å¯ä»¥å”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„è®¾å¤‡ï¼Œé‚£ä¹ˆç«¯å£å·å°±å¯ä»¥å”¯ä¸€æ ‡è¯†è®¾å¤‡ä¸­çš„åº”ç”¨ç¨‹åºäº†ã€‚ä¹Ÿå°±æ˜¯åº”ç”¨ç¨‹åºçš„æ ‡è¯†

- åè®®

  é€šè¿‡è®¡ç®—æœºç½‘ç»œå¯ä»¥ä½¿å¤šå°è®¡ç®—æœºå®ç°è¿æ¥ï¼Œä½äºåŒä¸€ä¸ªç½‘ç»œä¸­çš„è®¡ç®—æœºåœ¨è¿›è¡Œè¿æ¥å’Œé€šä¿¡æ—¶éœ€è¦éµå®ˆä¸€å®šçš„è§„åˆ™ï¼Œè¿™å°±å¥½æ¯”åœ¨é“è·¯ä¸­è¡Œé©¶çš„æ±½è½¦ä¸€å®šè¦éµå®ˆäº¤é€šè§„åˆ™ä¸€æ ·ã€‚åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¿™äº›è¿æ¥å’Œé€šä¿¡çš„è§„åˆ™è¢«ç§°ä¸ºç½‘ç»œé€šä¿¡åè®®ï¼Œå®ƒå¯¹æ•°æ®çš„ä¼ è¾“æ ¼å¼ã€ä¼ è¾“é€Ÿç‡ã€ä¼ è¾“æ­¥éª¤ç­‰åšäº†ç»Ÿä¸€è§„å®šï¼Œé€šä¿¡åŒæ–¹å¿…é¡»åŒæ—¶éµå®ˆæ‰èƒ½å®Œæˆæ•°æ®äº¤æ¢ã€‚å¸¸è§çš„åè®®æœ‰UDPåè®®å’ŒTCPåè®®

  â€‹		

#### 7.1.2 IPåœ°å€

IPåœ°å€ï¼šæ˜¯ç½‘ç»œä¸­è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†

- IPåœ°å€åˆ†ä¸ºä¸¤å¤§ç±»

  - IPv4ï¼šæ˜¯ç»™æ¯ä¸ªè¿æ¥åœ¨ç½‘ç»œä¸Šçš„ä¸»æœºåˆ†é…ä¸€ä¸ª32bitåœ°å€ã€‚æŒ‰ç…§TCP/IPè§„å®šï¼ŒIPåœ°å€ç”¨äºŒè¿›åˆ¶æ¥è¡¨ç¤ºï¼Œæ¯ä¸ªIPåœ°å€é•¿32bitï¼Œä¹Ÿå°±æ˜¯4ä¸ªå­—èŠ‚ã€‚ä¾‹å¦‚ä¸€ä¸ªé‡‡ç”¨äºŒè¿›åˆ¶å½¢å¼çš„IPåœ°å€æ˜¯â€œ11000000 10101000 00000001 01000010â€ï¼Œè¿™ä¹ˆé•¿çš„åœ°å€ï¼Œå¤„ç†èµ·æ¥ä¹Ÿå¤ªè´¹åŠ²äº†ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ŒIPåœ°å€ç»å¸¸è¢«å†™æˆåè¿›åˆ¶çš„å½¢å¼ï¼Œä¸­é—´ä½¿ç”¨ç¬¦å·â€œ.â€åˆ†éš”ä¸åŒçš„å­—èŠ‚ã€‚äºæ˜¯ï¼Œä¸Šé¢çš„IPåœ°å€å¯ä»¥è¡¨ç¤ºä¸ºâ€œ192.168.1.66â€ã€‚IPåœ°å€çš„è¿™ç§è¡¨ç¤ºæ³•å«åšâ€œç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•â€ï¼Œè¿™æ˜¾ç„¶æ¯”1å’Œ0å®¹æ˜“è®°å¿†å¾—å¤š
  - IPv6ï¼šç”±äºäº’è”ç½‘çš„è“¬å‹ƒå‘å±•ï¼ŒIPåœ°å€çš„éœ€æ±‚é‡æ„ˆæ¥æ„ˆå¤§ï¼Œä½†æ˜¯ç½‘ç»œåœ°å€èµ„æºæœ‰é™ï¼Œä½¿å¾—IPçš„åˆ†é…è¶Šå‘ç´§å¼ ã€‚ä¸ºäº†æ‰©å¤§åœ°å€ç©ºé—´ï¼Œé€šè¿‡IPv6é‡æ–°å®šä¹‰åœ°å€ç©ºé—´ï¼Œé‡‡ç”¨128ä½åœ°å€é•¿åº¦ï¼Œæ¯16ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œåˆ†æˆ8ç»„åå…­è¿›åˆ¶æ•°ï¼Œè¿™æ ·å°±è§£å†³äº†ç½‘ç»œåœ°å€èµ„æºæ•°é‡ä¸å¤Ÿçš„é—®é¢˜

- DOSå¸¸ç”¨å‘½ä»¤ï¼š

  - ipconfigï¼šæŸ¥çœ‹æœ¬æœºIPåœ°å€
  - ping IPåœ°å€ï¼šæ£€æŸ¥ç½‘ç»œæ˜¯å¦è¿é€š

- ç‰¹æ®ŠIPåœ°å€ï¼š

  - 127.0.0.1ï¼šæ˜¯å›é€åœ°å€ï¼Œå¯ä»¥ä»£è¡¨æœ¬æœºåœ°å€ï¼Œä¸€èˆ¬ç”¨æ¥æµ‹è¯•ä½¿ç”¨

    â€‹			

#### 7.1.3 InetAddress

InetAddressï¼šæ­¤ç±»è¡¨ç¤ºInternetåè®®ï¼ˆIPï¼‰åœ°å€

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å                                    | è¯´æ˜                                                         |
  | ----------------------------------------- | ------------------------------------------------------------ |
  | static InetAddress getByName(String host) | ç¡®å®šä¸»æœºåç§°çš„IPåœ°å€ã€‚ä¸»æœºåç§°å¯ä»¥æ˜¯æœºå™¨åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯IPåœ°å€ |
  | String getHostName()                      | è·å–æ­¤IPåœ°å€çš„ä¸»æœºå                                         |
  | String getHostAddress()                   | è¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²                                 |

  â€‹				

#### 7.1.4 ç«¯å£å’Œåè®®

- ç«¯å£

  - è®¾å¤‡ä¸Šåº”ç”¨ç¨‹åºçš„å”¯ä¸€æ ‡è¯†

- ç«¯å£å·

  - ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ•´æ•°ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯0~65535ã€‚å…¶ä¸­ï¼Œ0~1023ä¹‹é—´çš„ç«¯å£å·ç”¨äºä¸€äº›çŸ¥åçš„ç½‘ç»œæœåŠ¡å’Œåº”ç”¨ï¼Œæ™®é€šçš„åº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨1024ä»¥ä¸Šçš„ç«¯å£å·ã€‚å¦‚æœç«¯å£å·è¢«å¦å¤–ä¸€ä¸ªæœåŠ¡æˆ–åº”ç”¨æ‰€å ç”¨ï¼Œä¼šå¯¼è‡´å½“å‰ç¨‹åºå¯åŠ¨å¤±è´¥

- åè®®

  - è®¡ç®—æœºç½‘ç»œä¸­ï¼Œè¿æ¥å’Œé€šä¿¡çš„è§„åˆ™è¢«ç§°ä¸ºç½‘ç»œé€šä¿¡åè®®

- UDPåè®®

  - ç”¨æˆ·æ•°æ®æŠ¥åè®®(User Datagram Protocol)
  - UDPæ˜¯æ— è¿æ¥é€šä¿¡åè®®ï¼Œå³åœ¨æ•°æ®ä¼ è¾“æ—¶ï¼Œæ•°æ®çš„å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¸å»ºç«‹é€»è¾‘è¿æ¥ã€‚ç®€å•æ¥è¯´ï¼Œå½“ä¸€å°è®¡ç®—æœºå‘å¦å¤–ä¸€å°è®¡ç®—æœºå‘é€æ•°æ®æ—¶ï¼Œå‘é€ç«¯ä¸ä¼šç¡®è®¤æ¥æ”¶ç«¯æ˜¯å¦å­˜åœ¨ï¼Œå°±ä¼šå‘å‡ºæ•°æ®ï¼ŒåŒæ ·æ¥æ”¶ç«¯åœ¨æ”¶åˆ°æ•°æ®æ—¶ï¼Œä¹Ÿä¸ä¼šå‘å‘é€ç«¯åé¦ˆæ˜¯å¦æ”¶åˆ°æ•°æ®ã€‚
  - ç”±äºä½¿ç”¨UDPåè®®æ¶ˆè€—ç³»ç»Ÿèµ„æºå°ï¼Œé€šä¿¡æ•ˆç‡é«˜ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šç”¨äºéŸ³é¢‘ã€è§†é¢‘å’Œæ™®é€šæ•°æ®çš„ä¼ è¾“
  - ä¾‹å¦‚è§†é¢‘ä¼šè®®é€šå¸¸é‡‡ç”¨UDPåè®®ï¼Œå› ä¸ºè¿™ç§æƒ…å†µå³ä½¿å¶å°”ä¸¢å¤±ä¸€ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œä¹Ÿä¸ä¼šå¯¹æ¥æ”¶ç»“æœäº§ç”Ÿå¤ªå¤§å½±å“ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨UDPåè®®ä¼ é€æ•°æ®æ—¶ï¼Œç”±äºUDPçš„é¢å‘æ— è¿æ¥æ€§ï¼Œä¸èƒ½ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå› æ­¤åœ¨ä¼ è¾“é‡è¦æ•°æ®æ—¶ä¸å»ºè®®ä½¿ç”¨UDPåè®®

- TCPåè®®

  - ä¼ è¾“æ§åˆ¶åè®® (Transmission Control Protocol)

  - TCPåè®®æ˜¯é¢å‘è¿æ¥çš„é€šä¿¡åè®®ï¼Œå³ä¼ è¾“æ•°æ®ä¹‹å‰ï¼Œåœ¨å‘é€ç«¯å’Œæ¥æ”¶ç«¯å»ºç«‹é€»è¾‘è¿æ¥ï¼Œç„¶åå†ä¼ è¾“æ•°æ®ï¼Œå®ƒæä¾›äº†ä¸¤å°è®¡ç®—æœºä¹‹é—´å¯é æ— å·®é”™çš„æ•°æ®ä¼ è¾“ã€‚åœ¨TCPè¿æ¥ä¸­å¿…é¡»è¦æ˜ç¡®å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ï¼Œç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œæ¯æ¬¡è¿æ¥çš„åˆ›å»ºéƒ½éœ€è¦ç»è¿‡â€œä¸‰æ¬¡æ¡æ‰‹â€

  - ä¸‰æ¬¡æ¡æ‰‹ï¼šTCPåè®®ä¸­ï¼Œåœ¨å‘é€æ•°æ®çš„å‡†å¤‡é˜¶æ®µï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¸‰æ¬¡äº¤äº’ï¼Œä»¥ä¿è¯è¿æ¥çš„å¯é 

    ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤

    ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯å›é€ä¸€ä¸ªå“åº”ï¼Œé€šçŸ¥å®¢æˆ·ç«¯æ”¶åˆ°äº†è¿æ¥è¯·æ±‚

    ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å†æ¬¡å‘æœåŠ¡å™¨ç«¯å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œç¡®è®¤è¿æ¥

  - å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œè¿æ¥å»ºç«‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±å¯ä»¥å¼€å§‹è¿›è¡Œæ•°æ®ä¼ è¾“äº†ã€‚ç”±äºè¿™ç§é¢å‘è¿æ¥çš„ç‰¹æ€§ï¼ŒTCPåè®®å¯ä»¥ä¿è¯ä¼ è¾“æ•°æ®çš„å®‰å…¨ï¼Œæ‰€ä»¥åº”ç”¨ååˆ†å¹¿æ³›ã€‚ä¾‹å¦‚ä¸Šä¼ æ–‡ä»¶ã€ä¸‹è½½æ–‡ä»¶ã€æµè§ˆç½‘é¡µç­‰

    â€‹			

### 7.2 UDPé€šä¿¡ç¨‹åº

#### 7.2.1 å‘é€æ•°æ®

- Javaä¸­çš„UDPé€šä¿¡

  - UDPåè®®æ˜¯ä¸€ç§ä¸å¯é çš„ç½‘ç»œåè®®ï¼Œå®ƒåœ¨é€šä¿¡çš„ä¸¤ç«¯å„å»ºç«‹ä¸€ä¸ªSocketå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªSocketåªæ˜¯å‘é€ï¼Œæ¥æ”¶æ•°æ®çš„å¯¹è±¡ï¼Œå› æ­¤å¯¹äºåŸºäºUDPåè®®çš„é€šä¿¡åŒæ–¹è€Œè¨€ï¼Œæ²¡æœ‰æ‰€è°“çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„æ¦‚å¿µ
  - Javaæä¾›äº†DatagramSocketç±»ä½œä¸ºåŸºäºUDPåè®®çš„Socket

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                                                      | è¯´æ˜                                                 |
  | ----------------------------------------------------------- | ---------------------------------------------------- |
  | DatagramSocket()                                            | åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£ |
  | DatagramPacket(byte[] buf,int len,InetAddress add,int port) | åˆ›å»ºæ•°æ®åŒ…,å‘é€é•¿åº¦ä¸ºlençš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºçš„æŒ‡å®šç«¯å£ |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å                         | è¯´æ˜                   |
  | ------------------------------ | ---------------------- |
  | void send(DatagramPacket p)    | å‘é€æ•°æ®æŠ¥åŒ…           |
  | void close()                   | å…³é—­æ•°æ®æŠ¥å¥—æ¥å­—       |
  | void receive(DatagramPacket p) | ä»æ­¤å¥—æ¥å­—æ¥å—æ•°æ®æŠ¥åŒ… |

- å‘é€æ•°æ®çš„æ­¥éª¤

  - åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
  - åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…
  - è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®
  - å…³é—­å‘é€ç«¯


- ä»£ç æ¼”ç¤º

  ```java
  public class SendDemo {
      public static void main(String[] args) throws IOException {
          //åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
          // DatagramSocket() æ„é€ æ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£
          DatagramSocket ds = new DatagramSocket();
  
          //åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…
          //DatagramPacket(byte[] buf, int length, InetAddress address, int port)
          //æ„é€ ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‘é€é•¿åº¦ä¸º lengthçš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚
          byte[] bys = "hello,udp,æˆ‘æ¥äº†".getBytes();
  
          DatagramPacket dp = new DatagramPacket(bys,bys.length,InetAddress.getByName("127.0.0.1"),10086);
  
          //è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®
          //void send(DatagramPacket p) ä»æ­¤å¥—æ¥å­—å‘é€æ•°æ®æŠ¥åŒ…
          ds.send(dp);
  
          //å…³é—­å‘é€ç«¯
          //void close() å…³é—­æ­¤æ•°æ®æŠ¥å¥—æ¥å­—
          ds.close();
      }
  }
  ```

  â€‹			

#### 7.2.2 æ¥æ”¶æ•°æ®

- æ¥æ”¶æ•°æ®çš„æ­¥éª¤

  - åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
  - åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
  - è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
  - è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
  - å…³é—­æ¥æ”¶ç«¯

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                              | è¯´æ˜                                            |
  | ----------------------------------- | ----------------------------------------------- |
  | DatagramPacket(byte[] buf, int len) | åˆ›å»ºä¸€ä¸ªDatagramPacketç”¨äºæ¥æ”¶é•¿åº¦ä¸ºlençš„æ•°æ®åŒ… |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å            | è¯´æ˜                                     |
  | ----------------- | ---------------------------------------- |
  | byte[]  getData() | è¿”å›æ•°æ®ç¼“å†²åŒº                           |
  | int  getLength()  | è¿”å›è¦å‘é€çš„æ•°æ®çš„é•¿åº¦æˆ–æ¥æ”¶çš„æ•°æ®çš„é•¿åº¦ |

- ç¤ºä¾‹ä»£ç 

  ```java
  public class ReceiveDemo {
      public static void main(String[] args) throws IOException {
        	//åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
        	DatagramSocket ds = new DatagramSocket(12345);
  
        	//åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
        	byte[] bys = new byte[1024];
        	DatagramPacket dp = new DatagramPacket(bys, bys.length);
  
        	//è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
        	ds.receive(dp);
  
        	//è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
        	System.out.println("æ•°æ®æ˜¯ï¼š" + new String(dp.getData(), 0,                                             dp.getLength()));
          }
      }
  }
  ```

  â€‹			

#### 7.2.3 UDPä¸‰ç§é€šè®¯æ–¹å¼

- å•æ’­

  å•æ’­ç”¨äºä¸¤ä¸ªä¸»æœºä¹‹é—´çš„ç«¯å¯¹ç«¯é€šä¿¡

- ç»„æ’­

  ç»„æ’­ç”¨äºå¯¹ä¸€ç»„ç‰¹å®šçš„ä¸»æœºè¿›è¡Œé€šä¿¡

- å¹¿æ’­

  å¹¿æ’­ç”¨äºä¸€ä¸ªä¸»æœºå¯¹æ•´ä¸ªå±€åŸŸç½‘ä¸Šæ‰€æœ‰ä¸»æœºä¸Šçš„æ•°æ®é€šä¿¡

****

**ç»„æ’­ï¼š**

- å®ç°æ­¥éª¤

  - å‘é€ç«¯
    1. åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
    2. åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)
    3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)
    4. é‡Šæ”¾èµ„æº
  - æ¥æ”¶ç«¯
    1. åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)
    2. åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®
    3. æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€
    4. å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­
    5. è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®
    6. é‡Šæ”¾èµ„æº

- ä»£ç å®ç°

  ```java
  // å‘é€ç«¯
  public class ClinetDemo {
      public static void main(String[] args) throws IOException {
          // 1. åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
          DatagramSocket ds = new DatagramSocket();
          String s = "hello ç»„æ’­";
          byte[] bytes = s.getBytes();
          InetAddress address = InetAddress.getByName("224.0.1.0");
          int port = 10000;
          // 2. åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)
          DatagramPacket dp = new DatagramPacket(bytes,bytes.length,address,port);
          // 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)
          ds.send(dp);
          // 4. é‡Šæ”¾èµ„æº
          ds.close();
      }
  }
  // æ¥æ”¶ç«¯
  public class ServerDemo {
      public static void main(String[] args) throws IOException {
          // 1. åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)
          MulticastSocket ms = new MulticastSocket(10000);
          // 2. åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®
          DatagramPacket dp = new DatagramPacket(new byte[1024],1024);
          // 3. æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€,è¡¨ç¤ºæ·»åŠ åˆ°è¿™ä¸€ç»„ä¸­.
          ms.joinGroup(InetAddress.getByName("224.0.1.0"));
          // 4. å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­
          ms.receive(dp);
          // 5. è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®
          byte[] data = dp.getData();
          int length = dp.getLength();
          System.out.println(new String(data,0,length));
          // 6. é‡Šæ”¾èµ„æº
          ms.close();
      }
  }
  ```

  â€‹	

****

**å¹¿æ’­ï¼š**

- å®ç°æ­¥éª¤

  - å‘é€ç«¯
    1. åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)
    2. åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»
    3. å‘é€æ•°æ®
    4. é‡Šæ”¾èµ„æº
  - æ¥æ”¶ç«¯
    1. åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
    2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
    3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
    4. è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
    5. å…³é—­æ¥æ”¶ç«¯

- ä»£ç å®ç°

  ```java
  // å‘é€ç«¯
  public class ClientDemo {
      public static void main(String[] args) throws IOException {
        	// 1. åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)
          DatagramSocket ds = new DatagramSocket();
  		// 2. åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»
          String s = "å¹¿æ’­ hello";
          byte[] bytes = s.getBytes();
          InetAddress address = InetAddress.getByName("255.255.255.255");
          int port = 10000;
          DatagramPacket dp = new DatagramPacket(bytes,bytes.length,address,port);
  		// 3. å‘é€æ•°æ®
          ds.send(dp);
  		// 4. é‡Šæ”¾èµ„æº
          ds.close();
      }
  }
  
  // æ¥æ”¶ç«¯
  public class ServerDemo {
      public static void main(String[] args) throws IOException {
          // 1. åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
          DatagramSocket ds = new DatagramSocket(10000);
          // 2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
          DatagramPacket dp = new DatagramPacket(new byte[1024],1024);
          // 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
          ds.receive(dp);
          // 4. è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
          byte[] data = dp.getData();
          int length = dp.getLength();
          System.out.println(new String(data,0,length));
          // 5. å…³é—­æ¥æ”¶ç«¯
          ds.close();
      }
  }
  ```

  â€‹			

### 7.3 TCPé€šä¿¡ç¨‹åº

#### 7.3.1 å‘é€æ•°æ®

- Javaä¸­çš„TCPé€šä¿¡

  - Javaå¯¹åŸºäºTCPåè®®çš„çš„ç½‘ç»œæä¾›äº†è‰¯å¥½çš„å°è£…ï¼Œä½¿ç”¨Socketå¯¹è±¡æ¥ä»£è¡¨ä¸¤ç«¯çš„é€šä¿¡ç«¯å£ï¼Œå¹¶é€šè¿‡Socketäº§ç”ŸIOæµæ¥è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚
  - Javaä¸ºå®¢æˆ·ç«¯æä¾›äº†Socketç±»ï¼Œä¸ºæœåŠ¡å™¨ç«¯æä¾›äº†ServerSocketç±»

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                               | è¯´æ˜                                           |
  | ------------------------------------ | ---------------------------------------------- |
  | Socket(InetAddress address,int port) | åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šIPæŒ‡å®šç«¯å£å·       |
  | Socket(String host, int port)        | åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å· |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å                         | è¯´æ˜                 |
  | ------------------------------ | -------------------- |
  | InputStream  getInputStream()  | è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å…¥æµ |
  | OutputStream getOutputStream() | è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ |

- ç¤ºä¾‹ä»£ç 

  ```java
  public class Client {
      public static void main(String[] args) throws IOException {
          //TCPåè®®ï¼Œå‘é€æ•°æ®
  
          //1.åˆ›å»ºSocketå¯¹è±¡
          //ç»†èŠ‚ï¼šåœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶ä¼šè¿æ¥æœåŠ¡ç«¯
          //      å¦‚æœè¿æ¥ä¸ä¸Šï¼Œä»£ç ä¼šæŠ¥é”™
          Socket socket = new Socket("127.0.0.1",10000);
  
          //2.å¯ä»¥ä»è¿æ¥é€šé“ä¸­è·å–è¾“å‡ºæµ
          OutputStream os = socket.getOutputStream();
          //å†™å‡ºæ•°æ®
          os.write("aaa".getBytes());
  
          //3.é‡Šæ”¾èµ„æº
          os.close();
          socket.close();
      }
  }
  ```

  â€‹			

#### 7.3.2 æ¥æ”¶æ•°æ®

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                  | è¯´æ˜                             |
  | ----------------------- | -------------------------------- |
  | ServletSocket(int port) | åˆ›å»ºç»‘å®šåˆ°æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨å¥—æ¥å­— |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å          | è¯´æ˜                           |
  | --------------- | ------------------------------ |
  | Socket accept() | ç›‘å¬è¦è¿æ¥åˆ°æ­¤çš„å¥—æ¥å­—å¹¶æ¥å—å®ƒ |

- æ³¨æ„äº‹é¡¹

  1. acceptæ–¹æ³•æ˜¯é˜»å¡çš„,ä½œç”¨å°±æ˜¯ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥
  2. å®¢æˆ·ç«¯åˆ›å»ºå¯¹è±¡å¹¶è¿æ¥æœåŠ¡å™¨,æ­¤æ—¶æ˜¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹åè®®,ä¿è¯è·ŸæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥
  3. é’ˆå¯¹å®¢æˆ·ç«¯æ¥è®²,æ˜¯å¾€å¤–å†™çš„,æ‰€ä»¥æ˜¯è¾“å‡ºæµ
     é’ˆå¯¹æœåŠ¡å™¨æ¥è®²,æ˜¯å¾€é‡Œè¯»çš„,æ‰€ä»¥æ˜¯è¾“å…¥æµ
  4. readæ–¹æ³•ä¹Ÿæ˜¯é˜»å¡çš„
  5. å®¢æˆ·ç«¯åœ¨å…³æµçš„æ—¶å€™,è¿˜å¤šäº†ä¸€ä¸ªå¾€æœåŠ¡å™¨å†™ç»“æŸæ ‡è®°çš„åŠ¨ä½œ
  6. æœ€åä¸€æ­¥æ–­å¼€è¿æ¥,é€šè¿‡å››æ¬¡æŒ¥æ‰‹åè®®ä¿è¯è¿æ¥ç»ˆæ­¢

- ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹

  - ä¸‰æ¬¡æ¡æ‰‹

    ![07_TCPä¸‰æ¬¡æ¡æ‰‹](../../../../img/07_TCPä¸‰æ¬¡æ¡æ‰‹.png)

  - å››æ¬¡æŒ¥æ‰‹

    ![08_TCPå››æ¬¡æŒ¥æ‰‹](../../../../zyw4259/developJava/èµ„æ–™/day33-ç½‘ç»œç¼–ç¨‹/ç¬”è®°/img/08_TCPå››æ¬¡æŒ¥æ‰‹.png)

- ç¤ºä¾‹ä»£ç 

  ```java
  public class Server {
      public static void main(String[] args) throws IOException {
          //TCPåè®®ï¼Œæ¥æ”¶æ•°æ®
  
          //1.åˆ›å»ºå¯¹è±¡ServerSocker
          ServerSocket ss = new ServerSocket(10000);
  
          //2.ç›‘å¬å®¢æˆ·ç«¯çš„é“¾æ¥
          Socket socket = ss.accept();
  
          //3.ä»è¿æ¥é€šé“ä¸­è·å–è¾“å…¥æµè¯»å–æ•°æ®
          InputStream is = socket.getInputStream();
          int b;
          while ((b = is.read()) != -1){
              System.out.println((char) b);
          }
  
          //4.é‡Šæ”¾èµ„æº
          socket.close();
          ss.close();
      }
  }
  ```
  
  â€‹				

## 8. åå°„

### 8.1 æ¦‚è¿°

â€‹	**ä¸“ä¸šçš„è§£é‡Šï¼ˆäº†è§£ä¸€ä¸‹ï¼‰ï¼š**

â€‹       æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›

â€‹       å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„å±æ€§å’Œæ–¹æ³•ï¼›

â€‹       è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚

â€‹	**é€šä¿—çš„ç†è§£ï¼šï¼ˆæŒæ¡ï¼‰**

* åˆ©ç”¨**åå°„**åˆ›å»ºçš„å¯¹è±¡**å¯ä»¥æ— è§†ä¿®é¥°ç¬¦**è°ƒç”¨ç±»é‡Œé¢çš„å†…å®¹

* å¯ä»¥è·Ÿ**é…ç½®æ–‡ä»¶ç»“åˆèµ·æ¥ä½¿ç”¨**ï¼ŒæŠŠè¦åˆ›å»ºçš„å¯¹è±¡ä¿¡æ¯å’Œæ–¹æ³•å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚

  è¯»å–åˆ°ä»€ä¹ˆç±»ï¼Œå°±åˆ›å»ºä»€ä¹ˆç±»çš„å¯¹è±¡

  è¯»å–åˆ°ä»€ä¹ˆæ–¹æ³•ï¼Œå°±è°ƒç”¨ä»€ä¹ˆæ–¹æ³•

  æ­¤æ—¶å½“éœ€æ±‚å˜æ›´çš„æ—¶å€™ä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œåªè¦ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚

åå°„éƒ½æ˜¯ä»classå­—èŠ‚ç æ–‡ä»¶ä¸­è·å–çš„å†…å®¹ã€‚

* å¦‚ä½•è·å–classå­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡

* åˆ©ç”¨åå°„å¦‚ä½•è·å–æ„é€ æ–¹æ³•ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰

* åˆ©ç”¨åå°„å¦‚ä½•è·å–æˆå‘˜å˜é‡ï¼ˆèµ‹å€¼ï¼Œè·å–å€¼ï¼‰

* åˆ©ç”¨åå°„å¦‚ä½•è·å–æˆå‘˜æ–¹æ³•ï¼ˆè¿è¡Œï¼‰

  â€‹			

### 8.2 è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡çš„ä¸‰ç§æ–¹å¼

* Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forNameï¼ˆâ€œå…¨ç±»åâ€ï¼‰**ï¼ˆæœ€å¸¸ç”¨ï¼‰**
* é€šè¿‡classå±æ€§è·å–  
* é€šè¿‡å¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡

ä»£ç ç¤ºä¾‹ï¼š

```java
//1.Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forName
//Class.forName("ç±»çš„å…¨ç±»å")ï¼š å…¨ç±»å = åŒ…å + ç±»å
Class clazz1 = Class.forName("com.itheima.reflectdemo.Student");
//æºä»£ç é˜¶æ®µè·å– --- å…ˆæŠŠStudentåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†è·å–å­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡
//clazz å°±è¡¨ç¤ºStudentè¿™ä¸ªç±»çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ã€‚
//å°±æ˜¯å½“Student.classè¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åï¼Œäº§ç”Ÿçš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡


//2.é€šè¿‡classå±æ€§è·å–
//ç±»å.class
Class clazz2 = Student.class;

//å› ä¸ºclassæ–‡ä»¶åœ¨ç¡¬ç›˜ä¸­æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ï¼Œå½“è¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åäº§ç”Ÿçš„å¯¹è±¡ä¹Ÿæ˜¯å”¯ä¸€çš„
System.out.println(clazz1 == clazz2);//true


//3.é€šè¿‡Studentå¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
Student s = new Student();
Class clazz3 = s.getClass();
System.out.println(clazz1 == clazz2);//true
System.out.println(clazz2 == clazz3);//true
```

â€‹			

### 8.3 è·å–æ„é€ æ–¹æ³•

è§„åˆ™ï¼š

â€‹	getè¡¨ç¤ºè·å–

â€‹	Declaredè¡¨ç¤ºç§æœ‰

â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼

â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨

| æ–¹æ³•å                                                       | è¯´æ˜                              |
| ------------------------------------------------------------ | --------------------------------- |
| Constructor<?>[] getConstructors()                           | è·å¾—æ‰€æœ‰çš„æ„é€ ï¼ˆåªèƒ½publicä¿®é¥°ï¼‰  |
| Constructor<?>[] getDeclaredConstructors()                   | è·å¾—æ‰€æœ‰çš„æ„é€ ï¼ˆåŒ…å«privateä¿®é¥°ï¼‰ |
| Constructor<T> getConstructor(Class<?>... parameterTypes)    | è·å–æŒ‡å®šæ„é€ ï¼ˆåªèƒ½publicä¿®é¥°ï¼‰    |
| Constructor<T> getDeclaredConstructor(Class<?>... parameterTypes) | è·å–æŒ‡å®šæ„é€ ï¼ˆåŒ…å«privateä¿®é¥°ï¼‰   |

ä»£ç ç¤ºä¾‹ï¼š

```java
public class ReflectDemo2 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException {
        //1.è·å¾—æ•´ä½“ï¼ˆclasså­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼‰
        Class clazz = Class.forName("com.itheima.reflectdemo.Student");


        //2.è·å–æ„é€ æ–¹æ³•å¯¹è±¡
        //è·å–æ‰€æœ‰æ„é€ æ–¹æ³•ï¼ˆpublicï¼‰
        Constructor[] constructors1 = clazz.getConstructors();
        for (Constructor constructor : constructors1) {
            System.out.println(constructor);
        }

        System.out.println("=======================");

        //è·å–æ‰€æœ‰æ„é€ ï¼ˆå¸¦ç§æœ‰çš„ï¼‰
        Constructor[] constructors2 = clazz.getDeclaredConstructors();

        for (Constructor constructor : constructors2) {
            System.out.println(constructor);
        }
        System.out.println("=======================");

        //è·å–æŒ‡å®šçš„ç©ºå‚æ„é€ 
        Constructor con1 = clazz.getConstructor();
        System.out.println(con1);

        Constructor con2 = clazz.getConstructor(String.class,int.class);
        System.out.println(con2);

        System.out.println("=======================");
        //è·å–æŒ‡å®šçš„æ„é€ (æ‰€æœ‰æ„é€ éƒ½å¯ä»¥è·å–åˆ°ï¼ŒåŒ…æ‹¬publicåŒ…æ‹¬private)
        Constructor con3 = clazz.getDeclaredConstructor();
        System.out.println(con3);
        //äº†è§£ System.out.println(con3 == con1);
        //æ¯ä¸€æ¬¡è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ—¶å€™ï¼Œéƒ½ä¼šæ–°newä¸€ä¸ªã€‚

        Constructor con4 = clazz.getDeclaredConstructor(String.class);
        System.out.println(con4);
    }
}
```

â€‹	

### 8.4 è·å–æ„é€ æ–¹æ³•å¹¶åˆ›å»ºå¯¹è±¡

æ¶‰åŠåˆ°çš„æ–¹æ³•ï¼šnewInstance

ä»£ç ç¤ºä¾‹ï¼š

```java
//é¦–å…ˆè¦æœ‰ä¸€ä¸ªjavabeanç±»
public class Student {
    private String name;

    private int age;


    public Student() {

    }

    public Student(String name) {
        this.name = name;
    }

    private Student(String name, int age) {
        this.name = name;
        this.age = age;
    }


    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + "}";
    }
}



//æµ‹è¯•ç±»ä¸­çš„ä»£ç ï¼š
//éœ€æ±‚1ï¼š
//è·å–ç©ºå‚ï¼Œå¹¶åˆ›å»ºå¯¹è±¡

//1.è·å–æ•´ä½“çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
Class clazz = Class.forName("com.itheima.a02reflectdemo1.Student");
//2.è·å–ç©ºå‚çš„æ„é€ æ–¹æ³•
Constructor con = clazz.getConstructor();
//3.åˆ©ç”¨ç©ºå‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡
Student stu = (Student) con.newInstance();
System.out.println(stu);


System.out.println("=============================================");


//æµ‹è¯•ç±»ä¸­çš„ä»£ç ï¼š
//éœ€æ±‚2ï¼š
//è·å–å¸¦å‚æ„é€ ï¼Œå¹¶åˆ›å»ºå¯¹è±¡
//1.è·å–æ•´ä½“çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
Class clazz = Class.forName("com.itheima.a02reflectdemo1.Student");
//2.è·å–æœ‰å‚æ„é€ æ–¹æ³•
Constructor con = clazz.getDeclaredConstructor(String.class, int.class);
//3.ä¸´æ—¶ä¿®æ”¹æ„é€ æ–¹æ³•çš„è®¿é—®æƒé™ï¼ˆæš´åŠ›åå°„ï¼‰
con.setAccessible(true);
//4.ç›´æ¥åˆ›å»ºå¯¹è±¡
Student stu = (Student) con.newInstance("zhangsan", 23);
System.out.println(stu);
```

â€‹	

### 8.5 è·å–æˆå‘˜å˜é‡

è§„åˆ™ï¼š

â€‹	getè¡¨ç¤ºè·å–

â€‹	Declaredè¡¨ç¤ºç§æœ‰

â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼

â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨

æ–¹æ³•åï¼š

| æ–¹æ³•å                              | è¯´æ˜                                         |
| ----------------------------------- | -------------------------------------------- |
| Field[] getFields()                 | è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰ |
| Field[] getDeclaredFields()         | è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°     |
| Field getField(String name)         | è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰       |
| Field getDeclaredField(String name) | è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°           |

ä»£ç ç¤ºä¾‹ï¼š

```java
public class ReflectDemo4 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException {
        //è·å–æˆå‘˜å˜é‡å¯¹è±¡

        //1.è·å–classå¯¹è±¡
        Class clazz = Class.forName("com.itheima.reflectdemo.Student");

        //2.è·å–æˆå‘˜å˜é‡çš„å¯¹è±¡ï¼ˆFieldå¯¹è±¡)åªèƒ½è·å–publicä¿®é¥°çš„
        Field[] fields1 = clazz.getFields();
        for (Field field : fields1) {
            System.out.println(field);
        }

        System.out.println("===============================");

        //è·å–æˆå‘˜å˜é‡çš„å¯¹è±¡ï¼ˆpublic + privateï¼‰
        Field[] fields2 = clazz.getDeclaredFields();
        for (Field field : fields2) {
            System.out.println(field);
        }

        System.out.println("===============================");
        //è·å¾—å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡
        //å¦‚æœè·å–çš„å±æ€§æ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£ä¹ˆä¼šæŠ¥å¼‚å¸¸
        //Field field3 = clazz.getField("aaa");
        //System.out.println(field3);//NoSuchFieldException

        Field field4 = clazz.getField("gender");
        System.out.println(field4);

        System.out.println("===============================");
        //è·å–å•ä¸ªæˆå‘˜å˜é‡ï¼ˆç§æœ‰ï¼‰
        Field field5 = clazz.getDeclaredField("name");
        System.out.println(field5);

    }
}



public class Student {
    private String name;

    private int age;

    public String gender;

    public String address;


    public Student() {
    }

    public Student(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }


    public Student(String name, int age, String gender, String address) {
        this.name = name;
        this.age = age;
        this.gender = gender;
        this.address = address;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    /**
     * è·å–
     * @return gender
     */
    public String getGender() {
        return gender;
    }

    /**
     * è®¾ç½®
     * @param gender
     */
    public void setGender(String gender) {
        this.gender = gender;
    }

    /**
     * è·å–
     * @return address
     */
    public String getAddress() {
        return address;
    }

    /**
     * è®¾ç½®
     * @param address
     */
    public void setAddress(String address) {
        this.address = address;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + ", gender = " + gender + ", address = " + address + "}";
    }
}

```

â€‹	

### 8.6 è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼

| æ–¹æ³•                                | è¯´æ˜   |
| ----------------------------------- | ------ |
| void set(Object obj, Object valueï¼‰ | èµ‹å€¼   |
| Object get(Object obj)              | è·å–å€¼ |

ä»£ç ç¤ºä¾‹ï¼š

```java
public class ReflectDemo5 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException, IllegalAccessException {
        Student s = new Student("zhangsan",23,"å¹¿å·");
        Student ss = new Student("lisi",24,"åŒ—äº¬");

        //éœ€æ±‚ï¼š
        //åˆ©ç”¨åå°„è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼

        //1.è·å–classå¯¹è±¡
        Class clazz = Class.forName("com.itheima.reflectdemo.Student");

        //2.è·å–nameæˆå‘˜å˜é‡
        //fieldå°±è¡¨ç¤ºnameè¿™ä¸ªå±æ€§çš„å¯¹è±¡
        Field field = clazz.getDeclaredField("name");
        //ä¸´æ—¶ä¿®é¥°ä»–çš„è®¿é—®æƒé™
        field.setAccessible(true);

        //3.è®¾ç½®(ä¿®æ”¹)nameçš„å€¼
        //å‚æ•°ä¸€ï¼šè¡¨ç¤ºè¦ä¿®æ”¹å“ªä¸ªå¯¹è±¡çš„nameï¼Ÿ
        //å‚æ•°äºŒï¼šè¡¨ç¤ºè¦ä¿®æ”¹ä¸ºå¤šå°‘ï¼Ÿ
        field.set(s,"wangwu");

        //3.è·å–nameçš„å€¼
        //è¡¨ç¤ºæˆ‘è¦è·å–è¿™ä¸ªå¯¹è±¡çš„nameçš„å€¼
        String result = (String)field.get(s);

        //4.æ‰“å°ç»“æœ
        System.out.println(result);

        System.out.println(s);
        System.out.println(ss);

    }
}


public class Student {
    private String name;
    private int age;
    public String gender;
    public String address;


    public Student() {
    }

    public Student(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }


    public Student(String name, int age, String gender, String address) {
        this.name = name;
        this.age = age;
        this.gender = gender;
        this.address = address;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    /**
     * è·å–
     * @return gender
     */
    public String getGender() {
        return gender;
    }

    /**
     * è®¾ç½®
     * @param gender
     */
    public void setGender(String gender) {
        this.gender = gender;
    }

    /**
     * è·å–
     * @return address
     */
    public String getAddress() {
        return address;
    }

    /**
     * è®¾ç½®
     * @param address
     */
    public void setAddress(String address) {
        this.address = address;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + ", gender = " + gender + ", address = " + address + "}";
    }
}

```

â€‹		

### 8.7 è·å–æˆå‘˜æ–¹æ³•

è§„åˆ™ï¼š

â€‹	getè¡¨ç¤ºè·å–

â€‹	Declaredè¡¨ç¤ºç§æœ‰

â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼

â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨

| æ–¹æ³•å                                                       | è¯´æ˜                                         |
| ------------------------------------------------------------ | -------------------------------------------- |
| Method[] getMethods()                                        | è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰ |
| Method[] getDeclaredMethods()                                | è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°     |
| Method getMethod(String name, Class<?>... parameterTypes)    | è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰       |
| Method getDeclaredMethod(String name, Class<?>... parameterTypes) | è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°           |

ä»£ç ç¤ºä¾‹ï¼š

```java
public class ReflectDemo6 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException {
        //1.è·å–classå¯¹è±¡
        Class<?> clazz = Class.forName("com.itheima.reflectdemo.Student");


        //2.è·å–æ–¹æ³•
        //getMethodså¯ä»¥è·å–çˆ¶ç±»ä¸­publicä¿®é¥°çš„æ–¹æ³•
        Method[] methods1 = clazz.getMethods();
        for (Method method : methods1) {
            System.out.println(method);
        }

        System.out.println("===========================");
        //è·å–æ‰€æœ‰çš„æ–¹æ³•ï¼ˆåŒ…å«ç§æœ‰ï¼‰
        //ä½†æ˜¯åªèƒ½è·å–è‡ªå·±ç±»ä¸­çš„æ–¹æ³•
        Method[] methods2 = clazz.getDeclaredMethods();
        for (Method method : methods2) {
            System.out.println(method);
        }

        System.out.println("===========================");
        //è·å–æŒ‡å®šçš„æ–¹æ³•ï¼ˆç©ºå‚ï¼‰
        Method method3 = clazz.getMethod("sleep");
        System.out.println(method3);

        Method method4 = clazz.getMethod("eat",String.class);
        System.out.println(method4);

        //è·å–æŒ‡å®šçš„ç§æœ‰æ–¹æ³•
        Method method5 = clazz.getDeclaredMethod("playGame");
        System.out.println(method5);
    }
}

```

â€‹	

### 8.8 è·å–æˆå‘˜æ–¹æ³•å¹¶è¿è¡Œ

æ–¹æ³•

 Object invoke(Object obj, Object... args) ï¼šè¿è¡Œæ–¹æ³•

å‚æ•°ä¸€ï¼šç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•

å‚æ•°äºŒï¼šè°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰

è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰

ä»£ç ç¤ºä¾‹ï¼š

```java
package com.itheima.a02reflectdemo1;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class ReflectDemo6 {
    public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        //1.è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
        Class clazz = Class.forName("com.itheima.a02reflectdemo1.Student");
		
        //2.è·å–ä¸€ä¸ªå¯¹è±¡
        //éœ€è¦ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨æ–¹æ³•
        Student s = new Student();
        
        //3.è·å–ä¸€ä¸ªæŒ‡å®šçš„æ–¹æ³•
        //å‚æ•°ä¸€ï¼šæ–¹æ³•å
        //å‚æ•°äºŒï¼šå‚æ•°åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ä¸å†™
        Method eatMethod = clazz.getMethod("eat",String.class);
        
        //è¿è¡Œ
        //å‚æ•°ä¸€ï¼šè¡¨ç¤ºæ–¹æ³•çš„è°ƒç”¨å¯¹è±¡
        //å‚æ•°äºŒï¼šæ–¹æ³•åœ¨è¿è¡Œæ—¶éœ€è¦çš„å®é™…å‚æ•°
        //æ³¨æ„ç‚¹ï¼šå¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆéœ€è¦æ¥æ”¶invokeçš„ç»“æœ
        //å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™ä¸éœ€è¦æ¥æ”¶
        String result = (String) eatMethod.invoke(s, "é‡åº†å°é¢");
        System.out.println(result);

    }
}



public class Student {
    private String name;
    private int age;
    public String gender;
    public String address;


    public Student() {

    }

    public Student(String name) {
        this.name = name;
    }

    private Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    /**
     * è·å–
     * @return name
     */
    public String getName() {
        return name;
    }

    /**
     * è®¾ç½®
     * @param name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * è·å–
     * @return age
     */
    public int getAge() {
        return age;
    }

    /**
     * è®¾ç½®
     * @param age
     */
    public void setAge(int age) {
        this.age = age;
    }

    public String toString() {
        return "Student{name = " + name + ", age = " + age + "}";
    }

    private void study(){
        System.out.println("å­¦ç”Ÿåœ¨å­¦ä¹ ");
    }

    private void sleep(){
        System.out.println("å­¦ç”Ÿåœ¨ç¡è§‰");
    }

    public String eat(String something){
        System.out.println("å­¦ç”Ÿåœ¨åƒ" + something);
        return "å­¦ç”Ÿå·²ç»åƒå®Œäº†ï¼Œéå¸¸happy";
    }
}
```
